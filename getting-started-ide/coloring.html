<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Delivering Dylan Applications" href="delivery.html" /><link rel="prev" title="Remote Debugging" href="remotedbg.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>Dispatch Optimization Coloring in the Editor - Open Dylan</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Open Dylan</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/images/opendylan-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/images/opendylan-dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Get Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hacker-guide/index.html">Hacker Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Hacker Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/documentation/index.html">Writing Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Writing Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/guidelines.html">Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/generating.html">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/doctower.html">Doctower</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/example.html">Example documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/build-system.html">Jam-based Build System</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/compiler/index.html">DFMC, The Dylan Flow Machine Compiler</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of DFMC, The Dylan Flow Machine Compiler</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/notes-warnings-errors.html">Notes, Warnings and Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/old/design.html">Compiler Design (Old)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/old/internals.html">Compiler Internals (Old)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/runtime/index.html">The Runtime</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of The Runtime</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/object-representation.html">Object Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/calling-convention.html">Calling Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/special-features.html">Special Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/mangling.html">Name Mangling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/threads.html">Compiler Support for Threads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/startup.html">Startup</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/runtime-manager/index.html">Runtime Manager</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Runtime Manager</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime-manager/access-path.html">The ACCESS-PATH library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime-manager/debugger-manager.html">The DEBUGGER-MANAGER library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/duim/index.html">DUIM - Dylan User Interface Manager</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/topics/index.html">Topics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/method-dispatch.html">Method Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/porting.html">Porting to a New Target Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/ppml.html">The PPML library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/making-a-release.html">Release Check-list</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../proposals/index.html">Enhancement Proposals</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Enhancement Proposals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0001-dep-process.html">DEP Purpose and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0002-define-function.html">Define Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0003-c3-linearization.html">C3 superclass linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0004-strings-library.html">New strings Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0005-subclass-function.html">Subclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0006-single-file-library.html">Single File Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0007-collection-type-safety.html">Type-Safe Limited Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0008-multi-line-strings.html">Multi-line Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0010-element-otherwise.html">Defaulted Element Reference Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0011-numeric-literal-syntax.html">Numeric Literal Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0012-string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../about/index.html">Tour of Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tour of Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/hello_world.html">Hello, World!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/everything_value.html">Everything is a value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/classes.html">Classes &amp; Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/generic_functions.html">Generic Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/getters_setters_functions.html">Getters &amp; Setters are functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/keyword_arguments.html">Keyword Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/limited_types.html">Limited Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/macros.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/multiple_return_values.html">Multiple Return Values</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started-cli/index.html">Getting Started Guide</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Getting Started Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/hello-world.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/source-registries.html">Using Source Registries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/managing-dependencies.html">Managing Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/quick-tips.html">A Few More Quick Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-compiler.html">Using dylan-compiler interactively</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-environment.html">An example of dylan-environment interactive functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/editor-support.html">Editor Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-mode-for-emacs.html">Dylan Interactor Mode for Emacs (DIME)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/debugging-with-gdb-lldb.html">Debugging with GDB or LLDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/windows.html">Notes for Windows Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/environment-variables.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/cross-compilation.html">Cross Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/platform-specific.html">Platform Specific Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/dpg/">Dylan Programming Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://play.opendylan.org">Dylan Playground</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/drm/">Dylan Reference Manual</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../library-reference/index.html">Open Dylan Libraries</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Open Dylan Libraries</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/language-extensions/index.html">Dylan Language Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Dylan Language Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/language-differences.html">Language Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/define-function.html">Function Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/for-iteration.html">Extensions to the FOR iteration construct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/weak-tables.html">Weak tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/inlining.html">Inlining adjectives for methods, constants, functions, and slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/numbers.html">Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/object-with-elements.html">object-with-elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/macro-system-extensions.html">Macro System Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/parser-expansions.html">Parser Expansions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/alternative-curry-syntax.html">Alternative Curry Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/numeric-literals.html">Numeric Literal Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/lid.html">LID File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/c-ffi/index.html">The c-ffi Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/collections/index.html">The collections Library</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of The collections Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/bit-set.html">The bit-set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/bit-vector.html">The bit-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/collectors.html">The collectors Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/plists.html">The plists Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/set.html">The set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/table-extensions.html">The table-extensions Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/coloring-stream/index.html">The coloring-stream Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/common-dylan/index.html">The common-dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of The common-dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/byte-vector.html">The byte-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/common-extensions.html">The common-extensions Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/machine-words.html">The machine-words Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-format.html">The simple-format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-profiling.html">The simple-profiling Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-random.html">The simple-random Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-timers.html">The simple-timers Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/transcendentals.html">The transcendentals Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/dood/index.html">The DOOD library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/dylan/index.html">The dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of The dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/finalization.html">The finalization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/primitives.html">The dylan-primitives Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/threads.html">The threads Module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/io/index.html">The io Library</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of The io Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/format.html">The format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/format-out.html">The format-out Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/print.html">The print and pprint Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/streams.html">The streams Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/standard-io.html">The standard-io Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/network/index.html">The network Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/progress-stream/index.html">The progress-stream Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/sql/index.html">The sql Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/system/index.html">The system Library</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of The system Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/date.html">The date Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/locators.html">The locators Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/file-system.html">The file-system Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/operating-system.html">The operating-system Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/t-lists/index.html">The t-lists Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/win32/index.html">The Win32 API Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../documentation/index.html">All Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of All Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../news/index.html">News</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../documentation/cheatsheets/index.html">Cheat Sheets</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Cheat Sheets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/syntax.html">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/conditionals.html">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/collections.html">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/iteration.html">Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/scheme.html">For Schemers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/publications.html">Publications</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../intro-dylan/index.html">Intro to Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Intro to Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/why-dylan.html">Why Dylan?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/expressions-variables.html">Expressions &amp; Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/methods-generic-functions.html">Methods &amp; Generic Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/objects.html">Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/multiple-dispatch.html">Multiple Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/modules-libraries.html">Modules &amp; Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/conditions.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../corba-guide/index.html">CORBA Guide</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of CORBA Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/intro.html">About Open Dylan CORBA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/getstart.html">Quick Start Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/bank-setup.html">Setting up the Bank Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/bank-idl.html">Writing and Compiling IDL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/bank-client.html">The Bank Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/bank-server.html">The Bank Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/projects.html">Creating CORBA Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/rundebug.html">Running and Debugging CORBA Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/scepter.html">Using the Dylan IDL Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../corba-guide/idl-app.html">An IDL Binding for Dylan</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../building-with-duim/index.html">DUIM Guide</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of DUIM Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/design.html">Designing A Simple DUIM Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/improve.html">Improving The Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/menus.html">Adding Menus To The Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/callbacks.html">Adding Callbacks to the Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/commands.html">Using Command Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/tour.html">A Tour of the DUIM Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/source.html">Source Code For The Task List Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../duim-reference/index.html">DUIM Reference</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of DUIM Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/conventions.html">Conventions in this Manual</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/geom.html">DUIM-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/ext-geom.html">DUIM-Extended-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/dcs.html">DUIM-DCs Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/sheets.html">DUIM-Sheets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/graphics.html">DUIM-Graphics Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/layouts.html">DUIM-Layouts Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/gadgets.html">DUIM-Gadgets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/frames.html">DUIM-Frames Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">Getting Started / IDE</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Getting Started / IDE</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="quick-start.html">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="expanding.html">Fixing Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="model.html">Programming in Open Dylan</a></li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">Creating and Using Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="browsing.html">Learning More About an Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">Debugging and Interactive Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="remotedbg.html">Remote Debugging</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Dispatch Optimization Coloring in the Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="delivery.html">Delivering Dylan Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="editopt.html">The Interactive Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="com-projects.html">Creating COM Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../release-notes/index.html">Release Notes</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Release Notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2023.1.html">Open Dylan 2023.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2022.1.html">Open Dylan 2022.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2020.1.html">Open Dylan 2020.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2019.1.html">Open Dylan 2019.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2014.1.html">Open Dylan 2014.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2013.2.html">Open Dylan 2013.2 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2013.1.html">Open Dylan 2013.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2012.1.html">Open Dylan 2012.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2011.1.html">Open Dylan 2011.1 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide/index.html">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Full Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/dylan-lang/website/edit/master/source/getting-started-ide/coloring.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="dispatch-optimization-coloring-in-the-editor">
<h1>Dispatch Optimization Coloring in the Editor<a class="headerlink" href="#dispatch-optimization-coloring-in-the-editor" title="Permalink to this heading">#</a></h1>
<p>This chapter is about source-code coloring in the editor that shows
where and how optimizations have taken place.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Optimization work is best done in Production mode.
See <a class="reference internal" href="projects.html#project-settings"><span class="std std-ref">Project settings</span></a>.</p>
</div>
<section id="about-dispatch-optimizations">
<span id="index-0"></span><h2>About dispatch optimizations<a class="headerlink" href="#about-dispatch-optimizations" title="Permalink to this heading">#</a></h2>
<p>When you call a generic function in Dylan, the method that will be
executed has to be selected from the set of methods defined on that
generic function.</p>
<p>The method is selected by comparing the types of the arguments passed in
the generic function call to the parameter lists of the methods
available; the method whose parameter list is closest to the types of
the arguments passed in the call is the one that will be selected. (Note
that there may be situations where no one method is more applicable than
another, or even where there is no applicable method at all. These
situations, which may be detected either at compile time or at run time,
signal an error.)</p>
<p>The process of selecting the right method to call is known as <em>method
dispatch</em>. The algorithm for selecting a method is described in Chapter
6 of the DRM.</p>
<p>Method dispatch can, in principle, occur entirely at run time; but in
some circumstances, the Open Dylan compiler can work out at compile
time precisely which method needs to be called, and so optimize away the
need for run-time dispatch, making delivered applications faster.
Depending on the circumstances, these <em>dispatch optimizations</em> can
consist of replacing the generic function call with a direct call to the
correct method; replacing the generic function call with a class slot
access; or inlining the call completely.</p>
</section>
<section id="optimization-coloring">
<span id="index-1"></span><h2>Optimization coloring<a class="headerlink" href="#optimization-coloring" title="Permalink to this heading">#</a></h2>
<p>When you compile a project, the Open Dylan compiler records the
kinds of optimizations it performed for each source code file in the
project. It also records cases where compile-time optimization was for
one reason or another not possible.</p>
<p>The Open Dylan editor provides a way to see this information, by
choosing <strong>View &gt; Color Dispatch Optimizations</strong>. This command colors a
source code file so that you can see where the compiler managed to
optimize method dispatch, and also places where you may be able to make
changes that will make dispatch optimizations possible next time you
compile the project.</p>
<p>For instance, you will see a generic function call colored in blue where
the compiler worked out the exact method to call and emitted a direct
call to that method in the compiled code. <a class="reference internal" href="#dispatch-optimization-colors"><span class="std std-ref">Dispatch optimization colors and their meanings</span></a>
contains a full list of colors and their meanings.</p>
<section id="editing-colored-source-code">
<h3>Editing colored source code<a class="headerlink" href="#editing-colored-source-code" title="Permalink to this heading">#</a></h3>
<p>Dispatch optimization coloring in a file shows only what the compiler
achieved the last time you compiled the project containing the file. If
you edit colored source code, the changes you make could affect the
optimizations the compiler can carry out upon it the next time you
compile the project.</p>
<p>For this reason, when <strong>View &gt; Color Dispatch Optimizations</strong> is on and
you edit a colored line, the editor resets the entire line to black. All
the other lines in the file keep their color.</p>
<p>In this situation, you can re-color the line by doing <strong>View &gt; Refresh</strong>.
Note that once you have edited the text, the coloring information may no
longer fit it, but you may still find it useful. Alternatively you may
prefer to turn off coloring altogether once the coloring information for
part of the file has been invalidated.</p>
</section>
<section id="effect-of-compilation-mode-on-dispatch-optimizations">
<h3>Effect of compilation mode on dispatch optimizations<a class="headerlink" href="#effect-of-compilation-mode-on-dispatch-optimizations" title="Permalink to this heading">#</a></h3>
<p>The Open Dylan compiler tries to optimize method dispatch whether
compiling a project in Interactive Development mode or in Production
mode. Because the compiler does more optimization in Production mode,
you will see more coloring information after a Production-mode build.</p>
</section>
<section id="dispatch-optimization-colors-and-their-meanings">
<span id="dispatch-optimization-colors"></span><h3>Dispatch optimization colors and their meanings<a class="headerlink" href="#dispatch-optimization-colors-and-their-meanings" title="Permalink to this heading">#</a></h3>
<p>The following table shows the colors used to indicate different kinds of
dispatch optimization.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Color</p></th>
<th class="head"><p>Meaning</p></th>
<th class="head"><p>Recommended Action</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Magenta</p></td>
<td><p>Call not optimized because
the compiler could not
determine all the applicable
methods.</p></td>
<td><p>Happens when the generic
function is open. Where
possible, turn open
protocols into sealed
protocols.</p></td>
</tr>
<tr class="row-odd"><td><p>Red</p></td>
<td><p>Call not optimized despite
the compiler finding all the
applicable methods.</p>
<p>Can happen when the type of
an argument is not specific
enough.</p>
</td>
<td><p>Where possible, add type
specializers to the
bindings of the
arguments to the call.</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>Call optimized. The compiler
found the appropriate method,
and emitted a direct call to
it.</p></td>
<td><p>None required.</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>Call optimized. The compiler
found that this call was an
access to a slot whose
position in a class is fixed.
It replaced the function call
with (faster) code to access
that slot value.</p></td>
<td><p>None required.</p></td>
</tr>
<tr class="row-even"><td><p>Dark Gray</p></td>
<td><p>Call optimized. The compiler
inlined the code of the
appropriate method.</p></td>
<td><p>None required.</p></td>
</tr>
<tr class="row-odd"><td><p>Light Gray</p></td>
<td><p>This code was eliminated
completely. The compiler
either determined that this
call would never be made or
that it would not make any
difference to the outcome of
other code with which it was
associated, or it managed to
evaluate the call directly.</p></td>
<td><p>None required. (Unless
the code should have
been called.)</p></td>
</tr>
</tbody>
</table>
</div>
<p>Where possible, add type specializers to the bindings of the arguments
to the call.</p>
</section>
</section>
<section id="optimizing-the-reversi-application">
<h2>Optimizing the Reversi application<a class="headerlink" href="#optimizing-the-reversi-application" title="Permalink to this heading">#</a></h2>
<p>In this section we look at the dispatch optimization color information
for part of the Reversi application and see what we can do to optimize
it.</p>
<p>Before doing that, we should build the Reversi application in Production
mode so we know that the application has been optimized as much as
possible.</p>
<p>Open the Reversi project.</p>
<ol class="arabic simple">
<li><p>Choose <strong>Project &gt; Settings</strong> and, on the Compile page, set the
compilation mode to Production mode.</p></li>
<li><p>Choose <strong>Project &gt; Clean Build</strong>.</p></li>
<li><p>When the build is complete, go to the Sources page and open the file
<em>game.dylan</em>.</p></li>
</ol>
<p>An editor window showing <em>game.dylan</em> appears.</p>
<ol class="arabic simple">
<li><p>In the editor window, turn on the <strong>View &gt; Color Dispatch
Optimizations</strong> check item.</p></li>
</ol>
<p>We can now see color information showing how dispatch optimizations were
or were not carried out during the last build.</p>
<ol class="arabic simple">
<li><p>Go to the definition of the method <code class="docutils literal notranslate"><span class="pre">&lt;reversi-game&gt;</span></code>.</p></li>
</ol>
<p>You can use <strong>Edit &gt; Find</strong> or the binoculars toolbar button to do this.</p>
<p>This is the definition of <code class="docutils literal notranslate"><span class="pre">&lt;reversi-game&gt;</span></code> :</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;reversi-game&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">reversi-game-board</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;reversi-board&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;reversi-board&gt;</span><span class="p">);</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">%player</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;player&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">#&quot;black&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">player:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">%players</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">players:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">black-algorithm</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;algorithm&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">default-algorithm-for-player</span><span class="p">(</span><span class="ss">#&quot;black&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">black-algorithm:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">white-algorithm</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;algorithm&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">default-algorithm-for-player</span><span class="p">(</span><span class="ss">#&quot;white&quot;</span><span class="p">),</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">white-algorithm:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">reversi-game-update-callback</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;function&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">always</span><span class="p">(</span><span class="l">#f</span><span class="p">),</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">update-callback:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">reversi-game-message-function</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nb">false-or</span><span class="p">(</span><span class="nc">&lt;function&gt;</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">#f</span><span class="p">,</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">message-function:</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;reversi-game&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>There are three different colorings in this definition. The call to the
function <em>always</em>, a Dylan language built-in function, is in light
gray. That means the call has been eliminated completely from the
compiled application. A call to the function <em>always</em> is defined to
return a function object that always returns the value passed in the
call to <em>always</em>. So here, the function object would always return <code class="docutils literal notranslate"><span class="pre">#f</span></code>.
Unsurprisingly, the compiler evaluated this call completely, avoiding
the need for run-time method dispatch.</p>
<p>The two calls to <em>default-algorithm-for-player</em>, a Reversi application
method from <em>algorithms.dylan</em>, are colored in blue, signifying that
the compiler managed to determine precisely which method to call, and
inserted a direct call to that method in the compiled application.
Again, the need for run-time method dispatch was averted.</p>
<p>Investigation shows that there is only one method on
<em>default-algorithm-for-player</em>, which makes blue optimization simple
here. The generic function for <em>default-algorithm-for-player</em> is defined
implicitly, in the single <code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">method</span> <span class="pre">default-algorithm-for-player</span></code>
call. Recall from the DRM (chapter 6) that implicitly defined generic
functions are sealed by default. That fact allows the compiler to conclude
that this method is the only method there will ever be on
<em>default-algorithm-for-player</em>, making the optimization possible.</p>
<p>The third coloring is magenta, in the call to <code class="docutils literal notranslate"><span class="pre">make</span></code> on
<code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code>, in the <em>reversi-game-board</em> slot definition. Here,
then, is a generic function call that was not optimized. Magenta
coloring means that for this call to <code class="docutils literal notranslate"><span class="pre">make</span></code>, the compiler could not
determine the complete set of methods from which it could attempt to
select the appropriate method to call. We will now make changes to the
Reversi sources to optimize this call.</p>
<p>The problem here is that the compiler cannot be sure that additional
methods on <code class="docutils literal notranslate"><span class="pre">make</span></code> might not be added at run time. By defining a sealed
domain on make for <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code>, we can clear this up.</p>
<ol class="arabic simple">
<li><p>Add the following to <em>game.dylan</em> :</p></li>
</ol>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nb">subclass</span><span class="p">(</span><span class="nc">&lt;reversi-board&gt;</span><span class="p">));</span>
</pre></div>
</div>
<p>With this information, the compiler knows it has access to the complete
set of methods on <code class="docutils literal notranslate"><span class="pre">make</span></code> for this class, and therefore can attempt to do
the method selection itself.</p>
<p>We can recompile the application to see what effect our change has had.</p>
<ol class="arabic simple">
<li><p>Save <em>game.dylan</em> with <strong>File &gt; Save</strong>.</p></li>
<li><p>Rebuild the application, and refresh the color information for
<em>game.dylan</em> with <strong>View &gt; Refresh</strong>.</p></li>
</ol>
<p>The refreshed coloring shows the call to <code class="docutils literal notranslate"><span class="pre">make</span></code> on <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code> in
the <em>reversi-game-board</em> slot definition in light gray. This coloring
means that the compiler determined which <code class="docutils literal notranslate"><span class="pre">make</span></code> method to call, computed
the result of the calla <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code> objectand inlined the
object.</p>
<p>Looking further down <em>game.dylan</em>, notice that the definition of
<em>reversi-game-size-setter</em> also calls <code class="docutils literal notranslate"><span class="pre">make</span></code> on <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code>, a
call that is also colored light gray.</p>
<p>We can now look at other possible optimizations in <em>game.dylan</em>.</p>
<ol class="arabic simple">
<li><p>Go to the definition of the method <em>initialize-board</em>.</p></li>
</ol>
<p>The definition of <em>initialize-board</em> is:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">initialize-board</span><span class="w"> </span><span class="p">(</span><span class="n">board</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;reversi-board&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">squares</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reversi-board-squares</span><span class="p">(</span><span class="n">board</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">square</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">below</span><span class="w"> </span><span class="nb">size</span><span class="p">(</span><span class="n">squares</span><span class="p">))</span>
<span class="w">    </span><span class="n">squares</span><span class="p">[</span><span class="n">square</span><span class="p">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="l">#f</span>
<span class="w">  </span><span class="k">end</span><span class="p">;</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">piece</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">initial-pieces</span><span class="p">(</span><span class="n">board</span><span class="p">))</span>
<span class="w">    </span><span class="k">let</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">piece</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">    </span><span class="n">squares</span><span class="p">[</span><span class="n">square</span><span class="p">]</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">piece</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="w">  </span><span class="k">end</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">initialize-board</span><span class="p">;</span>
</pre></div>
</div>
<p>In this method there is a green-colored call to <em>reversi-board-squares</em>
on the parameter <em>board</em>, an instance of <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code>. Green
coloring denotes an access to a slot whose position in a class is fixed.
This optimization was possible because the <em>reversi-board-squares</em>
method is just the implicitly defined accessor for the slot
<em>reversi-board-squares</em> :</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;reversi-board&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">reversi-board-size</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">$default-board-size</span><span class="p">,</span>
<span class="w">    </span><span class="k">init-keyword:</span><span class="w"> </span><span class="k">size:</span><span class="p">;</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">reversi-board-squares</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;sequence&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">#[];</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;reversi-board&gt;</span><span class="p">;</span>
</pre></div>
</div>
<p>The compiler achieved this optimization because it knew three things.
First, it knew that the generic function implicitly defined by the
accessor method was sealed. (As normal Dylan methods, accessor methods
implicitly define a generic function if one does not already exist; such
a generic function is sealed because implicitly defined generic
functions are sealed by default.) Second, the compiler knew the type of
<em>board</em> in the call to the accessor method. Third, the compiler knew
that the class <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code> was sealed, because classes are sealed
by default.</p>
<p>We can now move on to some other optimization. The call <em>size(squares)</em>
in <em>initialize-board</em> is colored in magenta. There are several similar
magenta colorings in <em>game.dylan</em>, where the compiler could not
optimize a method call on the value returned from
<em>reversi-board-squares</em> : calls to <em>element</em>, <em>element-setter</em>,
<em>empty?</em>, and <em>size</em>. In all cases this is because the type of
<em>reversi-board-squares</em> is <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>, which is an open class.</p>
<p>We could seal domains on <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a> to get optimizations here. But the
DRM defines <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a> as an open class, and it is not good practice
to seal protocols that do not belong to your library or libraries.
However, we can change the type of <em>reversi-board-squares</em> to be in a
domain which is already sealed. Changing the slot type to
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#simple-object-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;simple-object-vector&gt;</span></code></a> gives us a sealed type as well as preserving
the protocol in use, so that we do not have to change any of the calls
being made.</p>
<ol class="arabic simple">
<li><p>Go to the definition of <code class="docutils literal notranslate"><span class="pre">&lt;reversi-board&gt;</span></code>.</p></li>
<li><p>Change the type of <em>reversi-board-squares</em> to be
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#simple-object-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;simple-object-vector&gt;</span></code></a>.</p></li>
<li><p>Save <em>game.dylan</em> with <strong>File &gt; Save</strong>.</p></li>
<li><p>Rebuild the application, and refresh the color information for
<em>game.dylan</em> with <strong>View &gt; Refresh</strong>.</p></li>
<li><p>Go back to the definition of <em>initialize-board</em>.</p></li>
</ol>
<p>The <em>size(squares)</em> call is now colored green. Green coloring means the
compiler determined that the call was equivalent to a slot
accessparticularly, an access to slot having a fixed offset from the
memory address at which its class is located. The compiler removed the
need for run-time method dispatch by replacing the call with code to
access the location that would contain the slot value.</p>
<p>This particular optimization was possible because <em>size</em> is a slot
accessor for instances of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#simple-object-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;simple-object-vector&gt;</span></code></a>, and, of course,
because <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#simple-object-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;simple-object-vector&gt;</span></code></a> is sealed.</p>
<p>You could examine the effects of this change on other calls that use the
return value of <em>reversi-board-squares</em>. Some calls turn blue. Some
calls to <em>element-setter</em> remain magenta because the compiler does not
know the type of the index. Constraining the type of the index would
improve such a call, turning it blue or even dark gray (inlined).</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="delivery.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Delivering Dylan Applications</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="remotedbg.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Remote Debugging</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2011-2023, Dylan Hackers
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Dispatch Optimization Coloring in the Editor</a><ul>
<li><a class="reference internal" href="#about-dispatch-optimizations">About dispatch optimizations</a></li>
<li><a class="reference internal" href="#optimization-coloring">Optimization coloring</a><ul>
<li><a class="reference internal" href="#editing-colored-source-code">Editing colored source code</a></li>
<li><a class="reference internal" href="#effect-of-compilation-mode-on-dispatch-optimizations">Effect of compilation mode on dispatch optimizations</a></li>
<li><a class="reference internal" href="#dispatch-optimization-colors-and-their-meanings">Dispatch optimization colors and their meanings</a></li>
</ul>
</li>
<li><a class="reference internal" href="#optimizing-the-reversi-application">Optimizing the Reversi application</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=2df60dd4"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>