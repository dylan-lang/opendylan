<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Building Applications With DUIM" href="../building-with-duim/index.html" /><link rel="prev" title="Using the Dylan IDL Compiler" href="scepter.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>An IDL Binding for Dylan - Open Dylan</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Open Dylan</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/images/opendylan-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/images/opendylan-dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../community/index.html">Get Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../download/index.html">Download</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../hacker-guide/index.html">Hacker Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Hacker Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/documentation/index.html">Writing Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Writing Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/guidelines.html">Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/generating.html">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/doctower.html">Doctower</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/documentation/example.html">Example documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/build-system.html">Jam-based Build System</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/compiler/index.html">DFMC, The Dylan Flow Machine Compiler</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of DFMC, The Dylan Flow Machine Compiler</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/notes-warnings-errors.html">Notes, Warnings and Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/old/design.html">Compiler Design (Old)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/compiler/old/internals.html">Compiler Internals (Old)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/runtime/index.html">The Runtime</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of The Runtime</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/object-representation.html">Object Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/calling-convention.html">Calling Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/special-features.html">Special Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/mangling.html">Name Mangling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/threads.html">Compiler Support for Threads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime/startup.html">Startup</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/runtime-manager/index.html">Runtime Manager</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Runtime Manager</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime-manager/access-path.html">The ACCESS-PATH library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/runtime-manager/debugger-manager.html">The DEBUGGER-MANAGER library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/duim/index.html">DUIM - Dylan User Interface Manager</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../hacker-guide/topics/index.html">Topics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/method-dispatch.html">Method Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/porting.html">Porting to a New Target Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/ppml.html">The PPML library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hacker-guide/topics/making-a-release.html">Release Check-list</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hacker-guide/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../proposals/index.html">Enhancement Proposals</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Enhancement Proposals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0001-dep-process.html">DEP Purpose and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0002-define-function.html">Define Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0003-c3-linearization.html">C3 superclass linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0004-strings-library.html">New strings Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0005-subclass-function.html">Subclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0006-single-file-library.html">Single File Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0007-collection-type-safety.html">Type-Safe Limited Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0008-multi-line-strings.html">Multi-line Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0010-element-otherwise.html">Defaulted Element Reference Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0011-numeric-literal-syntax.html">Numeric Literal Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../proposals/dep-0012-string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../about/index.html">Tour of Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tour of Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/hello_world.html">Hello, World!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/everything_value.html">Everything is a value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/classes.html">Classes &amp; Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/generic_functions.html">Generic Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/getters_setters_functions.html">Getters &amp; Setters are functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/keyword_arguments.html">Keyword Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/limited_types.html">Limited Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/macros.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../about/examples/multiple_return_values.html">Multiple Return Values</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../getting-started-cli/index.html">Getting Started Guide</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Getting Started Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/hello-world.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/source-registries.html">Using Source Registries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/managing-dependencies.html">Managing Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/quick-tips.html">A Few More Quick Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-compiler.html">Using dylan-compiler interactively</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-environment.html">An example of dylan-environment interactive functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/editor-support.html">Editor Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/dylan-mode-for-emacs.html">Dylan Interactor Mode for Emacs (DIME)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/debugging-with-gdb-lldb.html">Debugging with GDB or LLDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/windows.html">Notes for Windows Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/environment-variables.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/cross-compilation.html">Cross Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/platform-specific.html">Platform Specific Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started-cli/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/dpg/">Dylan Programming Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://play.opendylan.org">Dylan Playground</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/drm/">Dylan Reference Manual</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../library-reference/index.html">Open Dylan Libraries</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Open Dylan Libraries</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/language-extensions/index.html">Dylan Language Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Dylan Language Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/language-differences.html">Language Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/define-function.html">Function Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/for-iteration.html">Extensions to the FOR iteration construct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/weak-tables.html">Weak tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/inlining.html">Inlining adjectives for methods, constants, functions, and slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/numbers.html">Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/object-with-elements.html">object-with-elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/macro-system-extensions.html">Macro System Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/parser-expansions.html">Parser Expansions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/alternative-curry-syntax.html">Alternative Curry Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/numeric-literals.html">Numeric Literal Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/language-extensions/string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/lid.html">LID File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/c-ffi/index.html">The c-ffi Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/collections/index.html">The collections Library</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of The collections Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/bit-set.html">The bit-set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/bit-vector.html">The bit-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/collectors.html">The collectors Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/plists.html">The plists Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/set.html">The set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/collections/table-extensions.html">The table-extensions Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/coloring-stream/index.html">The coloring-stream Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/common-dylan/index.html">The common-dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of The common-dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/byte-vector.html">The byte-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/common-extensions.html">The common-extensions Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/machine-words.html">The machine-words Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-format.html">The simple-format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-profiling.html">The simple-profiling Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-random.html">The simple-random Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/simple-timers.html">The simple-timers Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/common-dylan/transcendentals.html">The transcendentals Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/dood/index.html">The DOOD library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/dylan/index.html">The dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of The dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/finalization.html">The finalization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/primitives.html">The dylan-primitives Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/dylan/threads.html">The threads Module</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/io/index.html">The io Library</a><input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of The io Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/format.html">The format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/format-out.html">The format-out Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/print.html">The print and pprint Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/streams.html">The streams Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/io/standard-io.html">The standard-io Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/network/index.html">The network Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/progress-stream/index.html">The progress-stream Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/sql/index.html">The sql Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../library-reference/system/index.html">The system Library</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of The system Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/date.html">The date Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/locators.html">The locators Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/file-system.html">The file-system Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../library-reference/system/operating-system.html">The operating-system Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/t-lists/index.html">The t-lists Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/win32/index.html">The Win32 API Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../library-reference/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../documentation/index.html">All Documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of All Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../news/index.html">News</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../documentation/cheatsheets/index.html">Cheat Sheets</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Cheat Sheets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/syntax.html">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/conditionals.html">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/collections.html">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/iteration.html">Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../documentation/cheatsheets/scheme.html">For Schemers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/publications.html">Publications</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../intro-dylan/index.html">Intro to Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Intro to Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/why-dylan.html">Why Dylan?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/expressions-variables.html">Expressions &amp; Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/methods-generic-functions.html">Methods &amp; Generic Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/objects.html">Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/multiple-dispatch.html">Multiple Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/modules-libraries.html">Modules &amp; Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/conditions.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intro-dylan/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">CORBA Guide</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of CORBA Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="intro.html">About Open Dylan CORBA</a></li>
<li class="toctree-l3"><a class="reference internal" href="getstart.html">Quick Start Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="bank-setup.html">Setting up the Bank Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="bank-idl.html">Writing and Compiling IDL</a></li>
<li class="toctree-l3"><a class="reference internal" href="bank-client.html">The Bank Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="bank-server.html">The Bank Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">Creating CORBA Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="rundebug.html">Running and Debugging CORBA Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="scepter.html">Using the Dylan IDL Compiler</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">An IDL Binding for Dylan</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../building-with-duim/index.html">DUIM Guide</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of DUIM Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/design.html">Designing A Simple DUIM Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/improve.html">Improving The Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/menus.html">Adding Menus To The Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/callbacks.html">Adding Callbacks to the Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/commands.html">Using Command Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/tour.html">A Tour of the DUIM Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/source.html">Source Code For The Task List Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../building-with-duim/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../duim-reference/index.html">DUIM Reference</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of DUIM Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/conventions.html">Conventions in this Manual</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/geom.html">DUIM-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/ext-geom.html">DUIM-Extended-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/dcs.html">DUIM-DCs Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/sheets.html">DUIM-Sheets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/graphics.html">DUIM-Graphics Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/layouts.html">DUIM-Layouts Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/gadgets.html">DUIM-Gadgets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/frames.html">DUIM-Frames Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../duim-reference/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../getting-started-ide/index.html">Getting Started / IDE</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Getting Started / IDE</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/quick-start.html">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/expanding.html">Fixing Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/model.html">Programming in Open Dylan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/projects.html">Creating and Using Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/browsing.html">Learning More About an Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/debug.html">Debugging and Interactive Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/remotedbg.html">Remote Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/coloring.html">Dispatch Optimization Coloring in the Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/delivery.html">Delivering Dylan Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/editopt.html">The Interactive Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/com-projects.html">Creating COM Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started-ide/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../release-notes/index.html">Release Notes</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Release Notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2024.1.html">Open Dylan 2024.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2023.1.html">Open Dylan 2023.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2022.1.html">Open Dylan 2022.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2020.1.html">Open Dylan 2020.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2019.1.html">Open Dylan 2019.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2014.1.html">Open Dylan 2014.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2013.2.html">Open Dylan 2013.2 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2013.1.html">Open Dylan 2013.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2012.1.html">Open Dylan 2012.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release-notes/2011.1.html">Open Dylan 2011.1 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../style-guide/index.html">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Full Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/dylan-lang/website/edit/master/source/corba-guide/idl-app.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="an-idl-binding-for-dylan">
<h1>An IDL Binding for Dylan<a class="headerlink" href="#an-idl-binding-for-dylan" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>This chapter proposes an IDL binding for Dylan. It is based on the
draft OMG Request For Comment submission.</p>
<section id="document-conventions">
<h3>Document conventions<a class="headerlink" href="#document-conventions" title="Permalink to this heading">#</a></h3>
<p>The requirements of this specification are indicated by the verb
“shall”. All other statements are either explanatory, amplifying, or
relaxing. All implementation notes are so labeled.</p>
<p>Dylan names within the text and all example Dylan code appears in
fixed-point font, <code class="docutils literal notranslate"><span class="pre">like</span> <span class="pre">this</span></code>.</p>
</section>
<section id="bibliography">
<h3>Bibliography<a class="headerlink" href="#bibliography" title="Permalink to this heading">#</a></h3>
<p>This specification mentions the following documents.</p>
<dl class="simple">
<dt>[DP 97]</dt><dd><p>Neal Feinberg, S. E. Keene, R.O. Mathews, P. T. Withington,
<cite>Dylan Programming</cite>, Addison Wesley, 1997.</p>
</dd>
<dt>[DRM 96]</dt><dd><p>L. M. Shalit, <cite>The Dylan Reference Manual</cite>,
Addison Wesley, 1996.</p>
</dd>
<dt>[OMG 94.3.11]</dt><dd><p>T. J. Mowbray, and K. L. White, OMG IDL Mapping for Common Lisp,
OMG 94.3.11, 1994.</p>
</dd>
<dt>[OMG 98.07.01]</dt><dd><p>The Common Object Request Broker: Architecture and Specification,
Revision 2.2, formal/98-07-01,
&lt;<a class="reference external" href="https://www.omg.org/spec/CORBA/2.2">https://www.omg.org/spec/CORBA/2.2</a>&gt;, July 1998.</p>
</dd>
</dl>
</section>
</section>
<section id="design-rationale">
<h2>Design rationale<a class="headerlink" href="#design-rationale" title="Permalink to this heading">#</a></h2>
<section id="glossary-of-terms">
<h3>Glossary of terms<a class="headerlink" href="#glossary-of-terms" title="Permalink to this heading">#</a></h3>
<p>This document uses terms from both the CORBA 2.2 specification [OMG
98.7.1] and the Dylan Reference Manual [DRM 96]. Any additional
terminology is described below.</p>
</section>
<section id="design-philosophy">
<h3>Design philosophy<a class="headerlink" href="#design-philosophy" title="Permalink to this heading">#</a></h3>
<section id="linguistic-requirements">
<h4>Linguistic requirements<a class="headerlink" href="#linguistic-requirements" title="Permalink to this heading">#</a></h4>
<p>The design should be:</p>
<dl class="simple">
<dt>Conformant</dt><dd><p>Provide a mapping that conforms to the CORBA 2.0 specification.</p>
</dd>
<dt>Complete</dt><dd><p>Provide a complete language mapping between IDL and Dylan.</p>
</dd>
<dt>Correct</dt><dd><p>Provide a mapping that correctly maps legal IDL definitions to
equivalent Dylan definitions.</p>
</dd>
<dt>Consistent</dt><dd><p>Provide a mapping that is consistent in its translation of IDL
constructs to Dylan constructs.</p>
</dd>
<dt>Natural</dt><dd><p>Provide a mapping that produces Dylan definitions that would be
judged to be expressed in “natural Dylan”.</p>
</dd>
<dt>Stable</dt><dd><p>Small changes in an IDL description should not lead to
disproportionately large changes in the mapping to Dylan.</p>
</dd>
<dt>Concise</dt><dd><p>Common constructs should be mapped in as simple and direct a manner
as possible. If necessary to achieve this goal, rare pieces of
syntax can be traded off and absorb the linguistic fallout.</p>
</dd>
</dl>
</section>
<section id="engineering-requirements">
<h4>Engineering requirements<a class="headerlink" href="#engineering-requirements" title="Permalink to this heading">#</a></h4>
<p>The design should be:</p>
<dl class="simple">
<dt>Extension-free</dt><dd><p>Do not require extensions to CORBA.</p>
</dd>
<dt>Implementation-Free</dt><dd><p>Do not provide implementation descriptions, except as explanatory notes.</p>
</dd>
<dt>Reliable</dt><dd><p>The mapping should not adversely impact the reliability of clients
or implementations of services built on an ORB.</p>
</dd>
<dt>Efficient</dt><dd><p>The mapping should allow for as efficient an implementation as is
provided by other language bindings.</p>
</dd>
<dt>Portable</dt><dd><p>The mapping should use standard Dylan constructs.</p>
</dd>
<dt>Encapsulated</dt><dd><p>The mapping should hide and not constrain the implementation details.</p>
</dd>
</dl>
</section>
<section id="miscellaneous-requirements">
<h4>Miscellaneous requirements<a class="headerlink" href="#miscellaneous-requirements" title="Permalink to this heading">#</a></h4>
<p>The design should also be:</p>
<dl class="simple">
<dt>Rationalized</dt><dd><p>Provide a rationale for key design decisions.</p>
</dd>
</dl>
</section>
</section>
<section id="mapping-summary">
<h3>Mapping summary<a class="headerlink" href="#mapping-summary" title="Permalink to this heading">#</a></h3>
<p>The following table summarizes the mapping of IDL constructs to Dylan constructs.</p>
<p>IDL constructs mapped to Dylan constructs.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>This IDL construct …</p></th>
<th class="head"><p>… Maps to this Dylan construct</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Foo_Bar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Foo-Bar</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Foo::Bar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Foo/Bar</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Foo</span> <span class="pre">+</span> <span class="pre">Bar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Foo</span> <span class="pre">+</span> <span class="pre">Bar</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="file docutils literal notranslate"><span class="pre">filename.idl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">library</span> <span class="pre">filename-protocol</span> <span class="pre">...</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">library</span> <span class="pre">filename-stubs</span> <span class="pre">...</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">library</span> <span class="pre">filename-skeletons</span> <span class="pre">...</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">module</span> <span class="pre">Foo</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">Bar</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Foo/Bar</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">interface</span> <span class="pre">Foo</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">open</span> <span class="pre">abstract</span> <span class="pre">class</span> <span class="pre">&lt;foo&gt;</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">(&lt;object&gt;)</span> <span class="pre">...</span></code></p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">interface</span> <span class="pre">Foo</span> <span class="pre">:</span> <span class="pre">Bar</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">open</span> <span class="pre">abstract</span> <span class="pre">class</span> <span class="pre">&lt;foo&gt;</span></code>
<code class="docutils literal notranslate"><span class="pre">(&lt;bar&gt;)</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">long</span> <span class="pre">FOO</span> <span class="pre">...</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">constant</span> <span class="pre">$FOO</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;long&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">typedef</span> <span class="pre">Foo</span> <span class="pre">...</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">constant</span> <span class="pre">&lt;Foo&gt;</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">Foo</span> <span class="pre">{Bar</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">constant</span> <span class="pre">&lt;Foo&gt;</span> <span class="pre">=</span> <span class="pre">one-of(#&quot;bar&quot;,</span> <span class="pre">...)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">Foo</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">class</span> <span class="pre">&lt;Foo&gt;</span> <span class="pre">(CORBA/&lt;struct&gt;)</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">Foo</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">class</span> <span class="pre">&lt;Foo&gt;</span> <span class="pre">(CORBA/&lt;union&gt;)</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;sequence&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;string&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">array</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;array&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exception</span> <span class="pre">Foo</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">class</span> <span class="pre">&lt;Foo&gt;</span> <span class="pre">(CORBA/&lt;user-exception&gt;)</span> <span class="pre">...</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">Foo</span> <span class="pre">(</span> <span class="pre">...</span> <span class="pre">)</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">open</span> <span class="pre">generic</span> <span class="pre">Foo</span> <span class="pre">(</span> <span class="pre">...</span> <span class="pre">)</span> <span class="pre">=&gt;</span> <span class="pre">()</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">any</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;any&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="lexical-mapping">
<h2>Lexical mapping<a class="headerlink" href="#lexical-mapping" title="Permalink to this heading">#</a></h2>
<p>This section specifies the mapping of IDL identifiers, literals, and constant expressions.</p>
<section id="identifiers">
<h3>Identifiers<a class="headerlink" href="#identifiers" title="Permalink to this heading">#</a></h3>
<section id="background">
<h4>Background<a class="headerlink" href="#background" title="Permalink to this heading">#</a></h4>
<p>IDL identifiers are defined as follows [OMG 98.7.1]:</p>
<blockquote>
<div><p>An identifier is an arbitrarily long sequence of alphabetic, digit,
and underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>) characters. The first character must be an
alphabetic character. All characters are significant.</p>
<p>Identifiers that differ only in case collide and yield a
compilation error. An identifier for a definition must be spelled
consistently (with respect to case) throughout a specification.</p>
<p>…</p>
<p>There is only one namespace for OMG IDL identifiers. Using the same
identifier for a constant and an interface, for example, produces a
compilation error.</p>
</div></blockquote>
<p>Dylan identifiers defined are as follows [DRM 96]:</p>
<blockquote>
<div><p>A name is one of the following four possibilities:</p>
<blockquote>
<div><ul class="simple">
<li><p>An alphabetic character followed by zero or more name characters.</p></li>
<li><p>A numeric character followed by two or more name characters
including at least two alphabetic characters in a row.</p></li>
<li><p>A graphic character followed by one or more name characters
including at least one alphabetic character.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">\</span></code> (backslash) followed by a function operator.</p></li>
</ul>
</div></blockquote>
<p>where:</p>
<blockquote>
<div><ul class="simple">
<li><p>Alphabetic case is not significant except within character and string literals. …</p></li>
<li><p>An alphabetic character is any of the 26 letters of the Roman
alphabet in upper and lower case.</p></li>
<li><p>A numeric character is any of the 10 digits.</p></li>
<li><p>A graphic character is one of the following: ! &amp; * &lt; = &gt; | ^ $ % &#64; _</p></li>
<li><p>A name character is an alphabetic character, a numeric character, a graphic character, or one of the following: - + ~ ? /</p></li>
</ul>
</div></blockquote>
</div></blockquote>
</section>
<section id="specification">
<h4>Specification<a class="headerlink" href="#specification" title="Permalink to this heading">#</a></h4>
<p>From Section A.3.1.1 it can be seen that Dylan identifiers are a
superset of IDL identifiers, and therefore they shall be left
unmodified in the mapping except as follows.</p>
<p>IDL provides only underscores to separate individual words, while
Dylan identifiers conventionally use hyphens to separate individual
words. A mapping shall therefore translate underscores to hyphens.</p>
<p>There are some reserved words in Dylan:</p>
<p>A reserved word is a syntactic token that has the form of a name but
is reserved by the Dylan language and so cannot be given a binding and
cannot be used as a named value reference. There are seven reserved
words in Dylan: <code class="docutils literal notranslate"><span class="pre">define</span></code>, <code class="docutils literal notranslate"><span class="pre">end</span></code>, <code class="docutils literal notranslate"><span class="pre">handler</span></code>, <code class="docutils literal notranslate"><span class="pre">let</span></code>, <code class="docutils literal notranslate"><span class="pre">local</span></code>,
<code class="docutils literal notranslate"><span class="pre">macro</span></code>, and <code class="docutils literal notranslate"><span class="pre">otherwise</span></code>.</p>
<p>When an IDL identifier collides with a reserved Dylan word, the string
“<code class="docutils literal notranslate"><span class="pre">-%</span></code>” shall be appended to the end of the identifier. The “<code class="docutils literal notranslate"><span class="pre">%</span></code>”
character is used instead of, say, the string “<code class="docutils literal notranslate"><span class="pre">idl</span></code>”, because it
cannot occur in an IDL identifier, and so we avoid having to deal with
cases where the Dylan identifier together with an existing “<code class="docutils literal notranslate"><span class="pre">-idl</span></code>”
suffix also appears in the IDL description.</p>
<p>This “<code class="docutils literal notranslate"><span class="pre">-%</span></code>” suffix shall also be added to IDL identifiers ending in
“<code class="docutils literal notranslate"><span class="pre">-setter</span></code>” in order to prevent potential collisions with setter
functions mapped from IDL attributes.</p>
<p>There are further grammar-driven modifications of identifiers due to
scope and convention described <a class="reference internal" href="#the-mapping-of-idl-to-dylan">The mapping of IDL to Dylan</a>.</p>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">#</a></h4>
<p>Some example mappings of IDL identifiers to Dylan identifiers:</p>
<p>IDL identifiers mapped to Dylan identifiers.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>This IDL identifier…</p></th>
<th class="head"><p>… maps to this Dylan identifier</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fusion</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fusion</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Fusion</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Fusion</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cold_fusion</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">cold-fusion</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">let</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">let-%</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">RED_SETTER</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">RED-SETTER-%</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">isExothermic</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">isExothermic</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The case of all characters is not lowered in order to avoid
modifying acronyms like: <code class="docutils literal notranslate"><span class="pre">do_TLA</span></code> → <code class="docutils literal notranslate"><span class="pre">do-tla</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Similarly hyphens are not inserted at lower-to-upper case
boundaries in order to avoid mistaken translations like
<code class="docutils literal notranslate"><span class="pre">LaTex_Parser</span></code> → <code class="docutils literal notranslate"><span class="pre">la-te-x-parser</span></code>.</p>
</div>
</section>
</section>
<section id="literals">
<h3>Literals<a class="headerlink" href="#literals" title="Permalink to this heading">#</a></h3>
<p>IDL literals shall be mapped to lexically equivalent Dylan literals or
semantically equivalent Dylan expressions. The following subsections
describe the mapping for integers, floating-point numbers, and
characters.</p>
<section id="integers">
<h4>Integers<a class="headerlink" href="#integers" title="Permalink to this heading">#</a></h4>
<section id="id1">
<h5>Background<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h5>
<p>Integer literals are defined as follows in IDL [OMG 98.7.1]:</p>
<blockquote>
<div><p>An integer literal consisting of a sequence of digits is taken to
be decimal (base ten) unless it begins with 0 (digit zero). A
sequence of digits starting with 0 is taken to be an octal integer
(base eight). The digits 8 and 9 are not octal digits. A sequence
of digits preceded by <code class="docutils literal notranslate"><span class="pre">0x</span></code> or <code class="docutils literal notranslate"><span class="pre">0X</span></code> is taken to be a hexadecimal
integer (base sixteen). The hexadecimal digits include <code class="docutils literal notranslate"><span class="pre">a</span></code> or
<code class="docutils literal notranslate"><span class="pre">A</span></code> through <code class="docutils literal notranslate"><span class="pre">f</span></code> or <code class="docutils literal notranslate"><span class="pre">F</span></code> with decimal values ten through
fifteen, respectively.</p>
</div></blockquote>
<p>The corresponding integer literals are defined as follows in Dylan:</p>
<blockquote>
<div><p>A sequence of decimal digits denote a decimal number.</p>
<p>The characters “<code class="docutils literal notranslate"><span class="pre">#o</span></code>” followed by a sequence of octal digits
denote an octal number.</p>
<p>The characters “<code class="docutils literal notranslate"><span class="pre">#x</span></code>” followed by a sequence of hexadecimal
digits denote a hexadecimal number.</p>
</div></blockquote>
</section>
<section id="id2">
<h5>Specification<a class="headerlink" href="#id2" title="Permalink to this heading">#</a></h5>
<p>A mapping shall therefore prepend the characters “<code class="docutils literal notranslate"><span class="pre">#o</span></code>” to the
beginning of an octal literal. For a hexadecimal literal a mapping
shall therefore remove the characters “<code class="docutils literal notranslate"><span class="pre">0x</span></code>” or “<code class="docutils literal notranslate"><span class="pre">0X</span></code>” from the
beginning and prepend the characters “<code class="docutils literal notranslate"><span class="pre">#x</span></code>” in their place.</p>
</section>
</section>
<section id="floating-point-numbers">
<h4>Floating point numbers<a class="headerlink" href="#floating-point-numbers" title="Permalink to this heading">#</a></h4>
<section id="id3">
<h5>Background<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h5>
<p>Floating point literals are defined as follows in IDL [OMG 98.7.1]:</p>
<blockquote>
<div><p>A floating-point literal consists of an integer part, a decimal
point, a fraction part, an <code class="docutils literal notranslate"><span class="pre">e</span></code> or <code class="docutils literal notranslate"><span class="pre">E</span></code>, and an optionally signed
integer exponent. The integer and fraction parts both consist of a
sequence of decimal (base ten) digits. Either the integer part or
the fraction part (but not both) may be missing; either the decimal
point or the letter <code class="docutils literal notranslate"><span class="pre">e</span></code> (or <code class="docutils literal notranslate"><span class="pre">E</span></code> ) and the exponent (but not
both) may be missing.</p>
</div></blockquote>
<p>The corresponding floating point literals are defined similarly in
Dylan; see <a class="reference external" href="https://opendylan.org/books/drm/Lexical_Grammar#XREF-2105">Numbers</a> in the
<cite>Dylan Reference Manual</cite>.</p>
</section>
<section id="id4">
<h5>Specification<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h5>
<p>No modification shall be made to floating point literals during
translation.</p>
</section>
</section>
<section id="character-literals">
<h4>Character literals<a class="headerlink" href="#character-literals" title="Permalink to this heading">#</a></h4>
<section id="id5">
<h5>Background<a class="headerlink" href="#id5" title="Permalink to this heading">#</a></h5>
<p>IDL character literals are single printing characters, or escape
sequences, enclosed by single quotes. The escape sequences are as
follows:</p>
<p>IDL character literal escape sequences.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>Escape Sequence</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>newline</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\n</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>horizontal tab</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\t</span></code></p></td>
</tr>
<tr class="row-even"><td><p>vertical tab</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\v</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>backspace</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\b</span></code></p></td>
</tr>
<tr class="row-even"><td><p>carriage return</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\r</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>form feed</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\f</span></code></p></td>
</tr>
<tr class="row-even"><td><p>alert</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\a</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>backslash</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\\</span></code></p></td>
</tr>
<tr class="row-even"><td><p>question mark</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\?</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>single quote</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\'</span></code></p></td>
</tr>
<tr class="row-even"><td><p>double quote</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>octal</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\ooo</span></code></p></td>
</tr>
<tr class="row-even"><td><p>hexadecimal</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\xhh</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>Dylan character literals are defined in <a class="reference external" href="https://opendylan.org/books/drm/Lexical_Grammar#HEADING-117-38">Character and String Literals</a> in
the <cite>Dylan Reference Manual</cite>.</p>
</section>
<section id="id6">
<h5>Specification<a class="headerlink" href="#id6" title="Permalink to this heading">#</a></h5>
<p>A mapping shall leave a single printing character unmodified during
translation. A mapping shall leave escape sequences unmodified except
as follows:</p>
<p>IDL character-literal escape sequences mapped to Dylan.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Description</p></th>
<th class="head"><p>IDL Escape Sequence</p></th>
<th class="head"><p>Dylan Translation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vertical tab</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\v</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\&lt;0B&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>question mark</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\?</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">?</span></code></p></td>
</tr>
<tr class="row-even"><td><p>double quote</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>octal</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\ooo</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\&lt;hh&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p>hexadecimal</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\xhh</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\&lt;hh&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="string-literals">
<h4>String Literals<a class="headerlink" href="#string-literals" title="Permalink to this heading">#</a></h4>
<section id="id7">
<h5>Background<a class="headerlink" href="#id7" title="Permalink to this heading">#</a></h5>
<p>IDL defines a string literal as follows:</p>
<blockquote>
<div><p>A string literal is a sequence of characters (as defined in
“Character Literals” …) surrounded by double quotes, as in
<code class="docutils literal notranslate"><span class="pre">&quot;</span></code> … <code class="docutils literal notranslate"><span class="pre">&quot;</span></code>.  Adjacent string literals are concatenated. Characters
in concatenated strings are kept distinct.</p>
</div></blockquote>
<p>Dylan defines a string literal as follows:</p>
</section>
<section id="id8">
<h5>Specification<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h5>
<p>A mapping shall leave string literals unmodified during translation
except as follows. Escape sequences shall be modified in accordance
with the specification for character literals, with one exception:
<code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> is left unmodified.</p>
</section>
</section>
</section>
<section id="fixed-point-decimals">
<h3>Fixed point decimals<a class="headerlink" href="#fixed-point-decimals" title="Permalink to this heading">#</a></h3>
<section id="id9">
<h4>Background<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h4>
<p>IDL defines a fixed point decimal literal as follows:</p>
<blockquote>
<div><p>A fixed point decimal literal consists of an integer part, a
decimal part, a fraction part, and a <code class="docutils literal notranslate"><span class="pre">d</span></code> or a <code class="docutils literal notranslate"><span class="pre">D</span></code>. The integer
and fraction parts both consist of a sequence of decimal (base 10)
digits. Either the integer part of the fractional part (but not
both) may be missing; the decimal point (but not the letter <code class="docutils literal notranslate"><span class="pre">d</span></code>
(or <code class="docutils literal notranslate"><span class="pre">D</span></code>)) may be missing.</p>
</div></blockquote>
<p>Dylan has no defined fixed point decimal literal format.</p>
</section>
<section id="id10">
<h4>Specification<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h4>
<p>A fixed point decimal literal shall be mapped to any available Dylan
representation of the value.</p>
</section>
</section>
<section id="constant-expressions">
<h3>Constant expressions<a class="headerlink" href="#constant-expressions" title="Permalink to this heading">#</a></h3>
<p>A mapping shall either interpret the IDL constant expression yielding
an equivalent Dylan literal or build a Dylan constant expression that
will yield the same value.</p>
<section id="operators">
<h4>Operators<a class="headerlink" href="#operators" title="Permalink to this heading">#</a></h4>
<p>The IDL operators shall be interpreted as, or translated to, Dylan as
defined by the following table. Note that the Dylan expressions will
necessarily have whitespace around the operators even if the IDL
expressions do not.</p>
<p>IDL operators mapped to Dylan.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>IDL</p></th>
<th class="head"><p>Dylan</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Bitwise Or</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">|</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">logior(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Bitwise Xor</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">^</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">logxor(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Bitwise And</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&amp;</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">logand(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Bitwise Not</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">~</span> <span class="pre">x</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">lognot(x)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Shift Left</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;&lt;</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ash(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Shift Right</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ash(x,</span> <span class="pre">-y)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Add</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Subtract</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Multiply</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Divide (integer)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">truncate/(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Divide (float)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Remainder</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">modulo(x,</span> <span class="pre">y)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>Plus</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">x</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">x</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>Minus</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">y</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">y</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="the-mapping-of-idl-to-dylan">
<h2>The mapping of IDL to Dylan<a class="headerlink" href="#the-mapping-of-idl-to-dylan" title="Permalink to this heading">#</a></h2>
<p>This section specifies the syntactic and semantic mapping of OMG IDL
to Dylan. Unless otherwise noted, the mapping is applicable to both
client-side and server-side interfaces. Issues specific to the
server-side only are covered in clearly marked subsections.</p>
<section id="names">
<h3>Names<a class="headerlink" href="#names" title="Permalink to this heading">#</a></h3>
<section id="id11">
<h4>Identifiers<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h4>
<p>The lexical mapping of identifiers shall be as specified in Section
A.3.1.2, “Specification”</p>
</section>
<section id="scoped-names">
<h4>Scoped names<a class="headerlink" href="#scoped-names" title="Permalink to this heading">#</a></h4>
<section id="id12">
<h5>Specification<a class="headerlink" href="#id12" title="Permalink to this heading">#</a></h5>
<p>Dylan has very different scoping rules from IDL. In particular, Dylan
is not able to introduce new subordinate namespaces at all the
linguistic points that IDL allows: files, modules, interfaces,
structures, unions, operations, and exceptions. Except for files, the
mapping shall handle this by appending together all the enclosing
scope identifiers and the scoped identifier, separating them by
forward slashes. See Section A.4.2, “IDL Files” for the mapping of IDL
files to Dylan.</p>
</section>
<section id="rationale">
<h5>Rationale<a class="headerlink" href="#rationale" title="Permalink to this heading">#</a></h5>
<p>This is basically what several other languages have done [OMG
98.7.1]. Dylan has the concept of modules, but these are more
linguistically heavyweight than the nested scopes they would be trying
to model. Modules would also not allow out-of-scope references in the
way that IDL does through its scope delimiter “::”.</p>
<p>The slash character is used instead of the hyphen character so in
examples like the following the two IDL identifiers below do not clash
after translation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Moorcock</span><span class="p">::</span><span class="n">Michael</span>
<span class="n">Moorcock_Michael</span>
</pre></div>
</div>
</section>
<section id="id13">
<h5>Examples<a class="headerlink" href="#id13" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
eco<span class="o">::</span>umberto
SOCIETIES<span class="o">::</span>Secret<span class="o">::</span>knights_templar
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="n">eco/umberto</span>
<span class="n">SOCIETIES/Secret/knights-templar</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="idl-files">
<h3>IDL Files<a class="headerlink" href="#idl-files" title="Permalink to this heading">#</a></h3>
<section id="id14">
<h4>Specification<a class="headerlink" href="#id14" title="Permalink to this heading">#</a></h4>
<p>An IDL file shall be mapped to three Dylan libraries each exporting a
single module with the same name as its respective library.</p>
<p>The three libraries shall be given the same name as the original IDL
file minus its <code class="docutils literal notranslate"><span class="pre">.idl</span></code> extension, but adding the suffixes
<code class="docutils literal notranslate"><span class="pre">-protocol</span></code>, <code class="docutils literal notranslate"><span class="pre">-stubs</span></code>, and <code class="docutils literal notranslate"><span class="pre">-skeletons</span></code> respectively.</p>
<p>The protocol library shall minimally use the Dylan library, or a
library that uses it an re-exports its bindings. The stubs and
skeletons libraries shall similarly minimally use the Dylan library,
the Dylan-ORB library (see Section A.4.3), and the protocol library;
and shall re-export the latter’s bindings.</p>
<p>Unless otherwise specified, Dylan constructs introduced as part of the
IDL mapping shall be created in the protocol library.</p>
</section>
<section id="id15">
<h4>Rationale<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h4>
<p>The advantages of a mandatory mapping of a complete IDL description to
a particular structure of Dylan libraries is:</p>
<ul class="simple">
<li><p>Libraries are the natural large-scale unit of reuse in Dylan, and
will match expectations.</p></li>
<li><p>Dylan programmers, applications, and tools will be able to rely on
the Dylan “signature” of a service defined by an IDL description.</p></li>
<li><p>Enforcing the creation of a libraries allows any required runtime
support to be naturally separated into and used from subordinate
libraries.</p></li>
</ul>
<p>If multiple IDL files are required to be combined into a single trio
of libraries, then a single top level file can be used to include them
together with any extra IDL module declarations required to prevent
name clashes.</p>
<p>For example, an application library wishing to invoke the operations
described in the IDL file <code class="file docutils literal notranslate"><span class="pre">http.idl</span></code> should use the
<code class="docutils literal notranslate"><span class="pre">http-stubs</span></code> library. Similarly, an application library wishing to
implement the operations described in the same IDL file should use the
<code class="docutils literal notranslate"><span class="pre">http-skeletons</span></code> library.</p>
<p>The protocol library is available separately for applications wishing
to make use of the Dylan framework generated from the IDL without
necessarily using an ORB for communication. For example, an
application team may wish to introduce the discipline of an IDL
description early on in the project lifecycle so that development work
on the clients and servers can proceed in parallel using dummy local
implementations of the other components.</p>
</section>
<section id="implementation-notes">
<h4>Implementation notes<a class="headerlink" href="#implementation-notes" title="Permalink to this heading">#</a></h4>
<p>An implementation is free to map an IDL file to as many Dylan source
files as is convenient.</p>
<p>An implementation is encouraged to transfer comments from IDL source
files to the generated Dylan files.</p>
</section>
</section>
<section id="the-dylan-orb-library">
<h3>The DYLAN-ORB library<a class="headerlink" href="#the-dylan-orb-library" title="Permalink to this heading">#</a></h3>
<p>The Dylan mapping relies on some runtime support, for example the
built in types like <code class="docutils literal notranslate"><span class="pre">corba/&lt;short&gt;</span></code>, and this shall be provided in a
Dylan library called Dylan-ORB that shall be used by a Dylan library
generated from an IDL file. Similarly, the Dylan-ORB library shall
define and export a Dylan module called Dylan-ORB that shall be used
by a Dylan module generated from an IDL file.</p>
<p>The Dylan-ORB library can be used independently of libraries generated
from IDL files to build generic applications without specific
knowledge of particular services.</p>
</section>
<section id="mapping-modules">
<h3>Mapping modules<a class="headerlink" href="#mapping-modules" title="Permalink to this heading">#</a></h3>
<section id="id16">
<h4>Background<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h4>
<p>IDL modules define a name scope for other declarations including subordinate modules.</p>
</section>
<section id="id17">
<h4>Specification<a class="headerlink" href="#id17" title="Permalink to this heading">#</a></h4>
<p>An IDL module shall be mapped to a Dylan identifier prefix for
identifiers declared in the scope of the module declaration as defined
by Section A.4.1.2, “Scoped names”.</p>
</section>
<section id="id18">
<h4>Rationale<a class="headerlink" href="#id18" title="Permalink to this heading">#</a></h4>
<p>Although mapping an IDL module to a Dylan module would seem to be more
natural, Dylan modules do not support out-of-scope references to
identifiers, for example, in IDL, <code class="docutils literal notranslate"><span class="pre">foo::bar</span></code>.</p>
</section>
<section id="id19">
<h4>Examples<a class="headerlink" href="#id19" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
module<span class="w"> </span>physics<span class="w"> </span>{
<span class="w">  </span>module<span class="w"> </span>quantum_mechanics<span class="w"> </span>{
<span class="w">    </span>interface<span class="w"> </span>schroedinger<span class="w"> </span>{};
<span class="w">  </span>};
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">//  Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="n">physics/quantum-mechanics/&lt;schroedinger&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-interfaces">
<h3>Mapping for interfaces<a class="headerlink" href="#mapping-for-interfaces" title="Permalink to this heading">#</a></h3>
<section id="id20">
<h4>Background<a class="headerlink" href="#id20" title="Permalink to this heading">#</a></h4>
<p>The CORBA standard [OMG 98.7.1] states:</p>
<blockquote>
<div><p>An interface is a description of a set of possible operations that
a client may request of an object. An object satisfies an interface
if it can be specified as the target object in each potential
request described by the interface.</p>
<p>In practice, an interface declaration introduces a name scope and
defines a set of operations on, and attributes of, the interface.</p>
</div></blockquote>
</section>
<section id="id21">
<h4>Specification<a class="headerlink" href="#id21" title="Permalink to this heading">#</a></h4>
<p>An IDL interface shall be mapped to an open, abstract, Dylan class
with no superclasses other than <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> and classes generated
from inherited IDL interfaces.</p>
<p>The implementation dependent classes used to represent object
references (see Section A.5.2.1, “Object references” and servants (see
section Section A.5.5.1, “Servants”) shall be subclasses of the open
abstract classes, and shall be defined in the stubs and skeletons
libraries respectively.</p>
<p>An IDL interface shall also be mapped to a Dylan identifier prefix for
identifiers declared in the scope of the class declaration as defined
by Section A.4.1.2. Angle brackets shall be added to the start and end
of the Dylan class name in accordance with Dylan programming
conventions.</p>
<p>A forward declaration of an IDL interface shall not be mapped to
anything.</p>
</section>
<section id="id22">
<h4>Rationale<a class="headerlink" href="#id22" title="Permalink to this heading">#</a></h4>
<p>Dylan classes are the natural focus of protocol definition and also
allow IDL interface inheritance to be modeled by Dylan class
inheritance (see below).</p>
<p>The class is abstract because it is an interface to an
implementation. On the client side the class is uninstantiable since
it is meaningless for Dylan client code to call the <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#make"><code class="xref drm docutils literal notranslate"><span class="pre">make</span></code></a>
generic function on an arbitrary remote class. Instead the client must
acquire object references by invoking operations on factory objects as
defined in the IDL description of the particular service concerned.</p>
<p>The class is open to allow users of the server module to implement the
interface by subclassing.</p>
<p>The class has no superclasses other than <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> or those that
might be mapped from inherited IDL interfaces in order that the
protocol library, generated from the IDL interface, may be used
independently of any runtimes, stubs, or skeletons, as an abstract
Dylan protocol.</p>
<p>IDL allows name-only “forward declarations” of interfaces in order to
allow interfaces to refer to one another. Two Dylan classes can refer
to one another, but there is no special forward reference declaration
form. Furthermore, the definition of the language only encourages
implementations to support forward references, repeated definitions
are not allowed, and bindings are not created in any prescribed order.</p>
<p>It therefore appears that there is nothing particular which the
definition of the mapping can do concerning ordering or extra
definitions, to ensure that mapped Dylan classes can be compiled by
all Dylan implementations.</p>
</section>
<section id="id23">
<h4>Examples<a class="headerlink" href="#id23" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>T34<span class="w"> </span>{};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;T34&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-interface-inheritance">
<h3>Mapping for interface inheritance<a class="headerlink" href="#mapping-for-interface-inheritance" title="Permalink to this heading">#</a></h3>
<section id="id24">
<h4>Background<a class="headerlink" href="#id24" title="Permalink to this heading">#</a></h4>
<p>The CORBA standard [OMG 98.7.1] states:</p>
<p>Interface inheritance provides the composition mechanism for
permitting an object to support multiple interfaces. The principal
interface is simply the most-specific interface that the object
supports, and consists of all operations in the transitive closure of
the interface inheritance graph.</p>
<p>CORBA interfaces can inherit from multiple other interfaces, and Dylan
also supports multiple inheritance. However, Dylan’s multiple
inheritance is more constrained. The class precedence order must be
consistent. That is, any pair of classes must be in the same order
with respect to each other wherever they occur together.</p>
</section>
<section id="id25">
<h4>Specification<a class="headerlink" href="#id25" title="Permalink to this heading">#</a></h4>
<p>Interface inheritance shall be mapped to class inheritance in
Dylan. The superclass list for the resulting Dylan class shall be
canonicalized using lexicographic order. That is, the order shall be
alphabetic on the character set used for Dylan identifiers.</p>
</section>
<section id="id26">
<h4>Rationale<a class="headerlink" href="#id26" title="Permalink to this heading">#</a></h4>
<p>Class inheritance is the natural means of sharing protocols in Dylan.</p>
<p>The superclass list needs to be canonicalized to avoid legal IDL
interface inheritance lists mapping to illegal Dylan class precedence
lists. Reordering cannot affect method selection for IDL operations
because IDL explicitly prohibits this kind of overloading. An
alphabetic order is as good as any.</p>
</section>
<section id="id27">
<h4>Examples<a class="headerlink" href="#id27" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>T34<span class="w"> </span><span class="o">:</span><span class="w"> </span>tank<span class="w"> </span>soviet_made<span class="w"> </span>{};
interface<span class="w"> </span>T48<span class="w"> </span><span class="o">:</span><span class="w"> </span>soviet_made<span class="w"> </span>tank<span class="w"> </span>{};
interface<span class="w"> </span>T1000<span class="w"> </span><span class="o">:</span><span class="w"> </span>T48<span class="w"> </span>T34<span class="w"> </span>{};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;T34&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;soviet-made&gt;</span><span class="p">,</span><span class="w"> </span><span class="nc">&lt;tank&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;T48&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;soviet-made&gt;</span><span class="p">,</span><span class="w"> </span><span class="nc">&lt;tank&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;T1000&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;T34&gt;</span><span class="p">,</span><span class="w"> </span><span class="nc">&lt;T48&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-constants">
<h3>Mapping for constants<a class="headerlink" href="#mapping-for-constants" title="Permalink to this heading">#</a></h3>
<section id="id28">
<h4>Specification<a class="headerlink" href="#id28" title="Permalink to this heading">#</a></h4>
<p>IDL constant declarations shall be mapped to Dylan constant
definitions. IDL constant expressions are mapped as defined in Section
A.2.3, “Mapping summary”. In addition, a dollar character shall be
added to front of the main identifier, but after the scope prefix, in
accordance with Dylan programming conventions.</p>
</section>
<section id="id29">
<h4>Examples<a class="headerlink" href="#id29" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
module<span class="w"> </span>time<span class="w"> </span>{
<span class="w">  </span>const<span class="w"> </span>unsigned<span class="w"> </span><span class="nb">long</span><span class="w"> </span>SECS_IN_100_YRS
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">365</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span>;
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="n">time/$SECS-IN-100-YRS</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;unsigned-long&gt;</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">365</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">24</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60</span><span class="p">;</span>

<span class="c1">// Or alternatively</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="n">time/$SECS-IN-100-YRS</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;unsigned-long&gt;</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mi">3153600000</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-basic-types">
<h3>Mapping for basic types<a class="headerlink" href="#mapping-for-basic-types" title="Permalink to this heading">#</a></h3>
<section id="overall-background">
<h4>Overall Background<a class="headerlink" href="#overall-background" title="Permalink to this heading">#</a></h4>
<p>IDL and Dylan both provide a number of basic built in types and the
means of constructing and naming new types.</p>
</section>
<section id="id30">
<h4>Specification<a class="headerlink" href="#id30" title="Permalink to this heading">#</a></h4>
<p>The mapping shall introduce new Dylan types for each CORBA type. The
mapping of the new Dylan types to the built-in Dylan types shall be
constrained as specified in the following sections, but within these
constraints the mapping is implementation dependent.</p>
<p>A generic constraint shall be that legal Dylan literals within the
ranges allowed by the type are allowed as values for these new Dylan
types. That is, it shall not be necessary to call a constructor
function on these values.</p>
</section>
<section id="id31">
<h4>Rationale<a class="headerlink" href="#id31" title="Permalink to this heading">#</a></h4>
<p>This allows implementations of the mapping some latitude, but also
allows CORBA applications written in Dylan to succinctly and portably
declare their data types and gain such efficiency as is provided by
the combination of the mapping implementation and the Dylan
compiler. The CORBA-specific types also protect application source
code against underlying changes, and ensure that the code
automatically benefits from any improvements.</p>
<p>The literals constraint means that programmers can expect to be able
to use, say, the literal “2” where a CORBA <code class="docutils literal notranslate"><span class="pre">short</span></code> is expected.</p>
</section>
<section id="id32">
<h4>Integers<a class="headerlink" href="#id32" title="Permalink to this heading">#</a></h4>
<section id="id33">
<h5>Background<a class="headerlink" href="#id33" title="Permalink to this heading">#</a></h5>
<p>IDL defines six types of integer with the following ranges:</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IDL integer type</p></th>
<th class="head"><p>Range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">short</span></code></p></td>
<td><p>-2<sup>15</sup> .. 2<sup>15</sup> - 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">long</span></code></p></td>
<td><p>-2<sup>31</sup> .. 2<sup>31</sup> - 1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code></p></td>
<td><p>-2<sup>63</sup> .. 2<sup>63</sup> - 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">short</span></code></p></td>
<td><p>0 .. 2<sup>16</sup> - 1</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code></p></td>
<td><p>0 .. 2<sup>32</sup> - 1</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span></code></p></td>
<td><p>0 .. 2<sup>64</sup> - 1</p></td>
</tr>
</tbody>
</table>
</div>
<p>Dylan has the class <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a> which is required to be at least
28 bits of precision. Overflow behavior is implementation defined.</p>
</section>
<section id="id34">
<h5>Specification<a class="headerlink" href="#id34" title="Permalink to this heading">#</a></h5>
<p>All IDL integer types shall be mapped to the following Dylan classes.</p>
<p>IDL and Dylan integer types.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IDL integer type</p></th>
<th class="head"><p>Dylan CORBA integer type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">short</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;short&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">long</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;long&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;long-long&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">short</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;unsigned-short&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;unsigned-long&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">long</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;unsigned-long-long&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>These classes, in turn, shall be defined as aliases for, or subtypes
of, some Dylan implementation’s integer classes, and shall be capable
of representing the specified range of values.</p>
</section>
<section id="id35">
<h5>Rationale<a class="headerlink" href="#id35" title="Permalink to this heading">#</a></h5>
<p>The rationale is as given for the general case above. In this
particular instance, although an individual Dylan compiler could
convert a <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#limited"><code class="xref drm docutils literal notranslate"><span class="pre">limited</span></code></a> expression to the best concrete class that the
runtime supports, this is not guaranteed. The runtime may have a good
class for implementing a CORBA class, but the compiler may not be
capable of translating a <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#limited"><code class="xref drm docutils literal notranslate"><span class="pre">limited</span></code></a> expression into it.</p>
<p>Even if the translation of the <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#limited"><code class="xref drm docutils literal notranslate"><span class="pre">limited</span></code></a> expression to the best
runtime class was guaranteed, the expressions are quite long an
cumbersome to use repeatedly in code, and an alias is convenient.</p>
</section>
<section id="id36">
<h5>Examples<a class="headerlink" href="#id36" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span><span class="nb">long</span><span class="w"> </span>DIM_OF_UNIV<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$DIM_OF_UNIV</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">11</span><span class="p">;</span>

<span class="c1">// Some alternative binding implementations</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">;</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">&lt;machine-word&gt;</span><span class="p">;</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="nb">limited</span><span class="p">(</span><span class="nc">&lt;integer&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">min:</span><span class="w"> </span><span class="o">-</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">31</span><span class="p">),</span><span class="w"> </span><span class="k">max:</span><span class="w"> </span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="o">^</span><span class="w"> </span><span class="mi">31</span><span class="p">)</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="id37">
<h4>Floating-point numbers<a class="headerlink" href="#id37" title="Permalink to this heading">#</a></h4>
<section id="id38">
<h5>Background<a class="headerlink" href="#id38" title="Permalink to this heading">#</a></h5>
<p>IDL defines three types of floating-point numbers:</p>
<p>IDL floating point number types.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IDL float type</p></th>
<th class="head"><p>Range</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>ANSI/IEEE 754-1985 single precision</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p>ANSI/IEEE 754-1985 double precision</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code></p></td>
<td><p>ANSI/IEEE 754-1985 double-extended precision</p></td>
</tr>
</tbody>
</table>
</div>
<p>The Dylan types <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#single-float"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;single-float&gt;</span></code></a>, <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#double-float"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;double-float&gt;</span></code></a>, and
<a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#extended-float"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;extended-float&gt;</span></code></a> are intended to correspond to the IEEE types
but may not.</p>
</section>
<section id="id39">
<h5>Specification<a class="headerlink" href="#id39" title="Permalink to this heading">#</a></h5>
<p>The IDL floating-point types shall be mapped to Dylan as follows:</p>
<p>IDL floating point types mapped to Dylan.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>IDL float type</p></th>
<th class="head"><p>Dylan float type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;float&gt;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;double&gt;</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">CORBA/&lt;long-double&gt;</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>These classes, in turn, shall be aliases for or subclasses of the
Dylan <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#float"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;float&gt;</span></code></a> class and shall be capable of representing the specified
range of values.</p>
</section>
<section id="id40">
<h5>Rationale<a class="headerlink" href="#id40" title="Permalink to this heading">#</a></h5>
<p>As above.</p>
</section>
<section id="id41">
<h5>Examples<a class="headerlink" href="#id41" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span><span class="nb">double</span><span class="w"> </span>E<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.71828182845904523536</span>;
const<span class="w"> </span><span class="nb">float</span><span class="w"> </span>LYRS_TO_ALPHA_CENTAURI<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.35</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$E</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;double&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.71828182845904523536</span><span class="p">;</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$LYRS-TO-ALPHA-CENTAURI</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;float&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">4.35</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="id42">
<h4>Fixed-point decimals<a class="headerlink" href="#id42" title="Permalink to this heading">#</a></h4>
<section id="id43">
<h5>Background<a class="headerlink" href="#id43" title="Permalink to this heading">#</a></h5>
<p>IDL fixed-point decimals are defined as follows:</p>
<blockquote>
<div><p>The <code class="docutils literal notranslate"><span class="pre">fixed</span></code> data type represents a fixed-point decimal number of
up to 31 significant digits. The scale factor is normally a
non-negative integer less than or equal to the total number of
digits (note that constants with effectively negative scale, such
as 10000, are always permitted.). However, some languages and
environments may be able to accommodate types that have a negative
scale or scale greater then than the number of digits.</p>
</div></blockquote>
<p>Dylan has no defined fixed-point decimal type, but does have a rational type.</p>
</section>
<section id="id44">
<h5>Specification<a class="headerlink" href="#id44" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">fixed</span></code> type shall be mapped to the Dylan class
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;fixed&gt;</span></code>, which shall be a subtype of the Dylan type
<code class="docutils literal notranslate"><span class="pre">&lt;rational&gt;</span></code>.</p>
<p>Subtypes of the IDL <code class="docutils literal notranslate"><span class="pre">fixed</span></code> type of the form <code class="docutils literal notranslate"><span class="pre">fixed&lt;d,s&gt;</span></code>, where d
is the number of digits and s is the scale, shall be mapped to Dylan
types of the form</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;fixed&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">digits:</span><span class="w"> </span><span class="n">d</span><span class="p">,</span><span class="w"> </span><span class="k">scale:</span><span class="w"> </span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>The Dylan language operators and functions on rationals shall have
methods defined on instances of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;fixed&gt;</span></code>.</p>
<p>In addition, instances of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;fixed&gt;</span></code> shall support the
following functions:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">CORBA/Fixed/digits</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">digits</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;unsigned-short&gt;</span><span class="p">)</span>

<span class="n">CORBA/Fixed/scale</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">scale</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">)</span>

<span class="nb">as</span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CORBA/&lt;long-double&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long-double&gt;</span><span class="p">)</span>

<span class="nb">as</span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nb">subclass</span><span class="p">(</span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">),</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">fixed</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>

<span class="nb">as</span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nb">subclass</span><span class="p">(</span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">),</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long-double&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">fixed</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>

<span class="nb">as</span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nb">subclass</span><span class="p">(</span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">),</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">fixed</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id45">
<h5>Rationale<a class="headerlink" href="#id45" title="Permalink to this heading">#</a></h5>
<p>This seems to be the natural mapping to Dylan and approximately
mirrors the C++ mapping.</p>
</section>
<section id="id46">
<h5>Examples<a class="headerlink" href="#id46" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span>fixed<span class="o">&lt;</span><span class="mi">6</span>,<span class="mi">2</span><span class="o">&gt;</span><span class="w"> </span>salary_increment<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0100.50d</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$foo</span>
<span class="w">    </span><span class="p">::</span><span class="w"> </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">digits:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="k">scale:</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;Fixed&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">digits:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="k">scale:</span><span class="w"> </span><span class="mi">2</span><span class="p">),</span>
<span class="w">         </span><span class="k">digits:</span><span class="w"> </span><span class="s">&quot;100.5&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="characters">
<h4>Characters<a class="headerlink" href="#characters" title="Permalink to this heading">#</a></h4>
<section id="id47">
<h5>Background<a class="headerlink" href="#id47" title="Permalink to this heading">#</a></h5>
<p>IDL characters are elements of the 8 bit ISO Latin-1 (8859.1)
character set. Dylan’s characters are unspecified. Dylan has a
<a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#character"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code></a> class and has three string classes:
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>, <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a>, and
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a>. Objects of these string types have elements
that are subtypes of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#character"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code></a>.</p>
</section>
<section id="id48">
<h5>Specification<a class="headerlink" href="#id48" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">char</span></code> type shall be mapped to the Dylan class
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;char&gt;</span></code>, which will be an alias for or a subclass of the
Dylan class <code class="docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code>.</p>
</section>
<section id="id49">
<h5>Rationale<a class="headerlink" href="#id49" title="Permalink to this heading">#</a></h5>
<p>As above.</p>
</section>
<section id="id50">
<h5>Examples<a class="headerlink" href="#id50" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span>char<span class="w"> </span>ALEPH<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a&#39;</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$ALEPH</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;char&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="wide-characters">
<h4>Wide characters<a class="headerlink" href="#wide-characters" title="Permalink to this heading">#</a></h4>
<section id="id51">
<h5>Background<a class="headerlink" href="#id51" title="Permalink to this heading">#</a></h5>
<p>IDL wide characters are implementation defined.</p>
<p>Dylan defines a <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a> type.</p>
</section>
<section id="id52">
<h5>Specification<a class="headerlink" href="#id52" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">wchar</span></code> type shall be mapped to <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;wchar&gt;</span></code>, which
shall be a subclass of <code class="docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code>. Instances of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;wchar&gt;</span></code>
shall be allowed as elements of instances of <code class="docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code>.</p>
</section>
<section id="id53">
<h5>Rationale<a class="headerlink" href="#id53" title="Permalink to this heading">#</a></h5>
<p>The natural mapping to Dylan.</p>
</section>
<section id="id54">
<h5>Examples<a class="headerlink" href="#id54" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span>wchar<span class="w"> </span>ALEPH<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;a&#39;</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$ALEPH</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;wchar&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="sc">&#39;a&#39;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="boolean-values">
<h4>Boolean values<a class="headerlink" href="#boolean-values" title="Permalink to this heading">#</a></h4>
<section id="id55">
<h5>Background<a class="headerlink" href="#id55" title="Permalink to this heading">#</a></h5>
<p>IDL <code class="docutils literal notranslate"><span class="pre">boolean</span></code> type can take the values <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> or <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>.</p>
<p>Dylan’s <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a> class similarly can take the values <code class="docutils literal notranslate"><span class="pre">#t</span></code>,
and <code class="docutils literal notranslate"><span class="pre">#f</span></code>.</p>
</section>
<section id="id56">
<h5>Specification<a class="headerlink" href="#id56" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">boolean</span></code> type shall be mapped onto the Dylan
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;boolean&gt;</span></code> class which shall be an alias for the Dylan
<a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a> class.</p>
</section>
<section id="id57">
<h5>Rationale<a class="headerlink" href="#id57" title="Permalink to this heading">#</a></h5>
<p>The extra CORBA prefix class is introduced for completeness and
consistency, but there is no need to allow it to be a subclass of the
built-in class.</p>
</section>
<section id="id58">
<h5>Examples<a class="headerlink" href="#id58" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span>boolean<span class="w"> </span>CANTORS_HYPOTHESIS<span class="w"> </span><span class="o">=</span><span class="w"> </span>TRUE;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$CANTORS-HYPOTHESIS</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;boolean&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="l">#t</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="octets">
<h4>Octets<a class="headerlink" href="#octets" title="Permalink to this heading">#</a></h4>
<section id="id59">
<h5>Background<a class="headerlink" href="#id59" title="Permalink to this heading">#</a></h5>
<p>An IDL octet is an 8-bit quantity that undergoes no conversion of
representation during transmission.</p>
</section>
<section id="id60">
<h5>Specification<a class="headerlink" href="#id60" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">octet</span></code> type shall be mapped to the Dylan class
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;octet&gt;</span></code> which shall be an alias for or a subclass of some
Dylan implementation’s integer class allowing values in the range 0
to 255.</p>
</section>
<section id="id61">
<h5>Rationale<a class="headerlink" href="#id61" title="Permalink to this heading">#</a></h5>
<p>As above.</p>
</section>
<section id="id62">
<h5>Examples<a class="headerlink" href="#id62" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
const<span class="w"> </span>octet<span class="w"> </span>BOND_ID<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">007</span>;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="no">$BOND-ID</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;octet&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">#o007</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="the-any-type">
<h4>The “any” type<a class="headerlink" href="#the-any-type" title="Permalink to this heading">#</a></h4>
<section id="id63">
<h5>Background<a class="headerlink" href="#id63" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">any</span></code> type permits the specification of values that can
express any OMG IDL type.</p>
<p>Dylan is a dynamic language with runtime type information.</p>
</section>
<section id="id64">
<h5>Specification<a class="headerlink" href="#id64" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">any</span></code> type shall be mapped to a sealed Dylan class
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;any&gt;</span></code> with sealed getter and setter generic functions and
initialization keywords for the underlying value and the associated
typecode:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">CORBA/any/type</span>
<span class="w">    </span><span class="p">(</span><span class="n">any</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;any&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">typecode</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;typecode&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">CORBA/any/type-setter</span>
<span class="w">    </span><span class="p">(</span><span class="n">typecode</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;typecode&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;any&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">typecode</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;typecode&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">CORBA/any/value</span>
<span class="w">    </span><span class="p">(</span><span class="n">any</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;any&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;object&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">CORBA/any/value-setter</span>
<span class="w">    </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;object&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;any&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;object&gt;</span><span class="p">);</span>
</pre></div>
</div>
<p>In addition, anywhere that an object of type <code class="docutils literal notranslate"><span class="pre">Any</span></code> is required the
Dylan programmer can supply objects that are instances of any mapped
IDL type.</p>
<p>At least one of the <code class="docutils literal notranslate"><span class="pre">value:</span></code> initialization and <code class="docutils literal notranslate"><span class="pre">typecode:</span></code>
keywords shall be required. If the latter is not supplied then it is
coerced from the value in an implementation defined manner.</p>
<p>Explicit coercion to and from objects of type <code class="docutils literal notranslate"><span class="pre">Any</span></code> shall be
provided by sealed methods on the Dylan generic function <a class="reference external" href="https://opendylan.org/books/drm/Coercing_and_Copying_Objects#as"><code class="xref drm docutils literal notranslate"><span class="pre">as</span></code></a>.</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">CORBA/any/value</span></code> shall signal an error if the value
cannot be coerced to a native Dylan type corresponding to a mapped IDL
type.</p>
</section>
<section id="id65">
<h5>Rationale<a class="headerlink" href="#id65" title="Permalink to this heading">#</a></h5>
<p>Although it is awkward for the Dylan programmer to have to deal with
an explicit <code class="docutils literal notranslate"><span class="pre">Any</span></code> type, it allows the typecode to be preserved
across requests and replies in cases where it matters.</p>
<p>In some cases, for example where the <code class="docutils literal notranslate"><span class="pre">Any</span></code> contains a structure
whose Dylan type is unknown (to the current program) it is not
possible for <code class="docutils literal notranslate"><span class="pre">CORBA/any/value</span></code> to return a meaningful value. In
these cases the <code class="docutils literal notranslate"><span class="pre">DynAny</span></code> interface should be used to navigate the
data inside the <code class="docutils literal notranslate"><span class="pre">Any</span></code>.</p>
</section>
<section id="id66">
<h5>Examples<a class="headerlink" href="#id66" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
<span class="nb">long</span><span class="w"> </span>goedel_number(in<span class="w"> </span>any<span class="w"> </span>thing);
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">goedel-number</span><span class="w"> </span><span class="p">(</span><span class="n">thing</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;any&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The mapping of operations is described in more detail later.</p>
</div>
</section>
</section>
</section>
<section id="mapping-for-constructed-types">
<h3>Mapping for constructed types<a class="headerlink" href="#mapping-for-constructed-types" title="Permalink to this heading">#</a></h3>
<section id="mapping-for-typedefs">
<h4>Mapping for typedefs<a class="headerlink" href="#mapping-for-typedefs" title="Permalink to this heading">#</a></h4>
<section id="id67">
<h5>Background<a class="headerlink" href="#id67" title="Permalink to this heading">#</a></h5>
<p>An IDL <code class="docutils literal notranslate"><span class="pre">typedef</span></code> declaration introduces aliases for a given type.</p>
<p>Dylan has a single namespace for identifiers and so no separate
defining form is needed to introduce a new alias for a class.</p>
</section>
<section id="id68">
<h5>Specification<a class="headerlink" href="#id68" title="Permalink to this heading">#</a></h5>
<p>An IDL <code class="docutils literal notranslate"><span class="pre">typedef</span></code> declaration shall be mapped to as many Dylan
<code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">constant</span></code> definitions as there are declarators being
introduced by the IDL declaration.</p>
</section>
<section id="id69">
<h5>Examples<a class="headerlink" href="#id69" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
typedef<span class="w"> </span>short<span class="w"> </span>mozart_symphony_no,<span class="w"> </span>layston_park_house_no;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;mozart-symphony-no&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">;</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;layston-park-house-no&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-enumeration-types">
<h4>Mapping for enumeration types<a class="headerlink" href="#mapping-for-enumeration-types" title="Permalink to this heading">#</a></h4>
<section id="id70">
<h5>Background<a class="headerlink" href="#id70" title="Permalink to this heading">#</a></h5>
<p>An IDL enumerated type consists of ordered lists of identifiers.</p>
</section>
<section id="id71">
<h5>Specification<a class="headerlink" href="#id71" title="Permalink to this heading">#</a></h5>
<p>An IDL enumerated type shall be mapped to a type union of singleton
symbol types. In addition, four sealed generic functions shall be
defined on the enumerated type (as if in its scope) for traversing and
comparing the enumerated values: <code class="docutils literal notranslate"><span class="pre">successor</span></code>, <code class="docutils literal notranslate"><span class="pre">predecessor</span></code>,
<code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>.</p>
<p>It shall be an error to call these functions on symbols outside the
enumeration.</p>
</section>
<section id="id72">
<h5>Rationale<a class="headerlink" href="#id72" title="Permalink to this heading">#</a></h5>
<p>This is the straightforward implementation of enumerated types
described in [DP 97]. We retain this basic format with a view to
benefiting from the compiler optimizations encouraged in [DP
97]. However, we also specify successor, predecessor, and comparison
functions for convenience.</p>
</section>
<section id="id73">
<h5>Examples<a class="headerlink" href="#id73" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
enum<span class="w"> </span>planet<span class="w"> </span>{Mercury,<span class="w"> </span>Venus,<span class="w"> </span>Earth,<span class="w"> </span>Mars,
<span class="w">             </span>Jupiter,<span class="w"> </span>Saturn,<span class="w"> </span>Uranus,<span class="w"> </span>Neptune,<span class="w"> </span>Pluto};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span>
<span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="nb">apply</span><span class="p">(</span><span class="nb">type-union</span><span class="p">,</span>
<span class="w">       </span><span class="nb">map</span><span class="p">(</span><span class="nb">singleton</span><span class="p">,</span><span class="w"> </span><span class="p">#(</span><span class="ss">#&quot;Mercury&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Venus&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="ss">#&quot;Earth&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Mars&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Jupiter&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Saturn&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="ss">#&quot;Uranus&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Neptune&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">#&quot;Pluto&quot;</span><span class="p">)));</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">planet/successor</span>
<span class="w">    </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">succ</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">planet/predecessor</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">pred</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">planet/&lt;</span><span class="p">(</span><span class="n">lesser</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">greater</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">lesser?</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;boolean&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">planet/&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">greater</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">lesser</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;planet&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">greater?</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;boolean&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-structure-types">
<h4>Mapping for structure types<a class="headerlink" href="#mapping-for-structure-types" title="Permalink to this heading">#</a></h4>
<section id="id74">
<h5>Background<a class="headerlink" href="#id74" title="Permalink to this heading">#</a></h5>
<p>IDL defines a <code class="docutils literal notranslate"><span class="pre">structure</span></code> type that aggregates together multiple
pieces of data of potentially heterogeneous types.</p>
<p>Dylan programmers define new classes for this purpose.</p>
</section>
<section id="id75">
<h5>Specification<a class="headerlink" href="#id75" title="Permalink to this heading">#</a></h5>
<p>An IDL structure shall be mapped to a sealed, concrete, Dylan subclass
of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;struct&gt;</span></code> together with pairs of sealed getter and setter
generic functions and a required initialization keyword for each
struct member. The initialization keywords shall be Dylan symbols
mapped using the normal identifier mapping rules, but without any
scope prefixes. It shall be an error to call the getter and setter
functions on instances of types other than those mapped from the IDL
structure. Furthermore the Dylan protocol functions <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#make"><code class="xref drm docutils literal notranslate"><span class="pre">make</span></code></a> and
<a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#initialize"><code class="xref drm docutils literal notranslate"><span class="pre">initialize</span></code></a> shall be sealed over the domain of the mapped class.</p>
</section>
<section id="id76">
<h5>Rationale<a class="headerlink" href="#id76" title="Permalink to this heading">#</a></h5>
<p>The Dylan class, the getters, the setters, and initializers, are
defined to be sealed in the anticipation that operations on structures
are expected to be as efficient as possible without any need for
extension.</p>
<p>There is no need to specify whether the getter and setter generic
functions are defined as Dylan slots. The data may in fact be
maintained in a foreign internal format convenient for network
transmission.</p>
<p>The initialization keywords are required so as not to introduce
complicated defaulting rules.</p>
<p>The superclass <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;struct&gt;</span></code> is made explicit to allow
<code class="docutils literal notranslate"><span class="pre">instance?</span></code> tests.</p>
</section>
<section id="id77">
<h5>Examples<a class="headerlink" href="#id77" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
struct<span class="w"> </span>meeting<span class="w"> </span>{
<span class="w">  </span><span class="nb">string</span><span class="w"> </span>topic,<span class="w"> </span>venue,<span class="w"> </span>convenor;
<span class="w">  </span><span class="nb">long</span><span class="w"> </span>date,<span class="w"> </span>duration;
<span class="w">  </span>sequence<span class="o">&lt;</span><span class="nb">string</span><span class="o">&gt;</span><span class="w"> </span>attendees,<span class="w"> </span>agenda,<span class="w"> </span>hidden_agenda,<span class="w"> </span>minutes;
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan (using slots)</span>
<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;meeting&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">CORBA/&lt;struct&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/topic</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">topic:</span><span class="p">;</span>

<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/venue</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">venue:</span><span class="p">;</span>

<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/convenor</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">convenor:</span><span class="p">;</span>

<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/date</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">date:</span><span class="p">;</span>

<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/duration</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">duration:</span><span class="p">;</span>

<span class="w">  </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/attendees</span><span class="w"> </span><span class="p">::</span>
<span class="w">     </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">attendees:</span><span class="p">;</span>

<span class="w">   </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/agenda</span><span class="w"> </span><span class="p">::</span>
<span class="w">      </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">      </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">agenda:</span><span class="p">;</span>

<span class="w">   </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/hidden-agenda</span><span class="w"> </span><span class="p">::</span>
<span class="w">     </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">)</span><span class="o">&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">hidden-agenda:</span><span class="p">;</span>

<span class="w">   </span><span class="nb">slot</span><span class="w"> </span><span class="n">meeting/minutes</span><span class="w"> </span><span class="p">::</span>
<span class="w">     </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">),</span>
<span class="w">     </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">minutes:</span><span class="p">;</span>
<span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">make</span><span class="w"> </span><span class="p">(</span><span class="nb">singleton</span><span class="p">(</span><span class="nc">&lt;meeting&gt;</span><span class="p">));</span>

<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">initialize</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;meeting&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-discriminated-union-type">
<h4>Mapping for discriminated union type<a class="headerlink" href="#mapping-for-discriminated-union-type" title="Permalink to this heading">#</a></h4>
<section id="id78">
<h5>Background<a class="headerlink" href="#id78" title="Permalink to this heading">#</a></h5>
<p>IDL defines a <code class="docutils literal notranslate"><span class="pre">union</span></code> type that allows data of heterogeneous types
used interchangeably in places like parameters, results, arrays, and
sequences. An explicit tag called a discriminator is used to determine
the type of the data in a given object that is of the union type.</p>
<p>Dylan is a dynamic language with runtime type information and has no
explicit tagging mechanism.</p>
</section>
<section id="id79">
<h5>Specification<a class="headerlink" href="#id79" title="Permalink to this heading">#</a></h5>
<p>An IDL union type shall be mapped to a sealed, concrete, Dylan
subclass of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;union&gt;</span></code> with pairs of sealed getter and setter
functions and an initialization keyword for each union branch. Every
mapped union shall also have the following sealed getter and setter
functions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">corba</span><span class="o">/</span><span class="n">union</span><span class="o">/</span><span class="n">discriminator</span>
<span class="n">corba</span><span class="o">/</span><span class="n">union</span><span class="o">/</span><span class="n">discriminator</span><span class="o">-</span><span class="n">setter</span>
<span class="n">corba</span><span class="o">/</span><span class="n">union</span><span class="o">/</span><span class="n">value</span>
<span class="n">corba</span><span class="o">/</span><span class="n">union</span><span class="o">/</span><span class="n">value</span><span class="o">-</span><span class="n">setter</span>
</pre></div>
</div>
<p>and the following initialization keywords:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">discriminator</span><span class="p">:</span>
<span class="n">value</span><span class="p">:</span>
</pre></div>
</div>
<p>It is an error to call these functions on instances of types other
than those mapped from the IDL union definition. Furthermore the Dylan
protocol functions:drm:<cite>make</cite> and <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#initialize"><code class="xref drm docutils literal notranslate"><span class="pre">initialize</span></code></a> shall be sealed
over the domain of the mapped class.</p>
<p>The initialization keywords shall be mapped as for structs. However,
they are not required in the same manner. Instead, either the caller
shall supply the <code class="docutils literal notranslate"><span class="pre">discriminator:</span></code> and the <code class="docutils literal notranslate"><span class="pre">value:</span></code> or an
initialization keyword mapped from one of the branches.</p>
<p>In addition, wherever a union is required (for example, in the
parameter of an operation) the Dylan programmer shall be able to give
any Dylan object that is an instance of one of the types of the
branches of the union.</p>
<p>Explicit coercion to and from a union shall also be available as
sealed methods on the Dylan <a class="reference external" href="https://opendylan.org/books/drm/Coercing_and_Copying_Objects#as"><code class="xref drm docutils literal notranslate"><span class="pre">as</span></code></a> generic function. It is
undefined which discriminator is used in ambiguous cases.</p>
</section>
<section id="id80">
<h5>Rationale<a class="headerlink" href="#id80" title="Permalink to this heading">#</a></h5>
<p>Although it is unnatural for a Dylan programmer to have to manipulate
explicit union discriminators, there are ambiguous cases that require
this explicit treatment. By reifying the union the Dylan programmer is
given as much direct control as a static language provides, and yet
can also use the implicit coercion and value getter to ignore the
details if so desired.</p>
<p>It is not necessary to state whether the getter and setter functions
are implemented by slots.</p>
<p>The superclass <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;union&gt;</span></code> is made explicit to allow
<code class="docutils literal notranslate"><span class="pre">instance?</span></code> tests.</p>
</section>
<section id="id81">
<h5>Examples<a class="headerlink" href="#id81" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
union<span class="w"> </span>RLE_entity<span class="w"> </span><span class="k">switch</span><span class="w"> </span>(short)<span class="w"> </span>{
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="w"> </span><span class="nb">long</span><span class="w"> </span>length;
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="mi">2</span><span class="o">:</span><span class="w"> </span>char<span class="w"> </span>character;
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan (sample)</span>
<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">CORBA/&lt;union&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">make</span><span class="w"> </span><span class="p">(</span><span class="nb">singleton</span><span class="p">(</span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">));</span>
<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">initialize</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="nb">as</span>
<span class="w">    </span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">object</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">length:</span><span class="w"> </span><span class="n">length</span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="nb">as</span>
<span class="w">    </span><span class="p">(</span><span class="nb">class</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="n">RLE-entity/length</span><span class="p">(</span><span class="n">object</span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">RLE-entity/length</span><span class="w"> </span><span class="p">(</span><span class="nb">union</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="k">select</span><span class="w"> </span><span class="p">(</span><span class="n">corba/union/discriminator</span><span class="p">(</span><span class="nb">union</span><span class="p">))</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">corba/union/value</span><span class="p">(</span><span class="nb">union</span><span class="p">);</span>
<span class="w">    </span><span class="k">otherwise</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nb">error</span><span class="p">(...);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">select</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">RLE-entity/length-setter</span>
<span class="w">    </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span><span class="w"> </span><span class="nb">union</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;RLE-entity&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="n">corba/union/value</span><span class="p">(</span><span class="nb">union</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">length</span><span class="p">;</span>
<span class="w">  </span><span class="n">corba/union/discriminator</span><span class="p">(</span><span class="nb">union</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="c1">// ...</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-sequence-type">
<h4>Mapping for sequence type<a class="headerlink" href="#mapping-for-sequence-type" title="Permalink to this heading">#</a></h4>
<section id="id82">
<h5>Background<a class="headerlink" href="#id82" title="Permalink to this heading">#</a></h5>
<p>IDL defines a <code class="docutils literal notranslate"><span class="pre">sequence</span></code> type. A sequence is a one-dimensional array
with an element type, an optional maximum size (fixed at compile
time), and a current length (determined at run time).</p>
<p>Dylan defines several sequence-like classes including <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>
itself.</p>
</section>
<section id="id83">
<h5>Specification<a class="headerlink" href="#id83" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">sequence</span></code> type shall be mapped onto the a new Dylan
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;sequence&gt;</span></code> class that shall be an alias for or a subclass of
the Dylan <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#stretchy-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;stretchy-vector&gt;</span></code></a> class. An element type shall be
mapped to a <code class="docutils literal notranslate"><span class="pre">limited</span></code> type of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;sequence&gt;</span></code>. The maximum
size is not modeled in Dylan and must be checked on marshalling.</p>
</section>
<section id="id84">
<h5>Rationale<a class="headerlink" href="#id84" title="Permalink to this heading">#</a></h5>
<p>Dylan’s <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#stretchy-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;stretchy-vector&gt;</span></code></a> class appears closest in intent to
IDL’s <code class="docutils literal notranslate"><span class="pre">sequence</span></code> type.</p>
</section>
<section id="id85">
<h5>Examples<a class="headerlink" href="#id85" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
typedef<span class="w"> </span>sequence<span class="o">&lt;</span><span class="nb">long</span>,<span class="w"> </span>CHAIN<span class="o">-</span><span class="nb">MAX</span><span class="o">&gt;</span><span class="w"> </span>chromosomes;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;chromosomes&gt;</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-string-type">
<h4>Mapping for string type<a class="headerlink" href="#mapping-for-string-type" title="Permalink to this heading">#</a></h4>
<section id="id86">
<h5>Background<a class="headerlink" href="#id86" title="Permalink to this heading">#</a></h5>
<p>IDL defines a <code class="docutils literal notranslate"><span class="pre">string</span></code> type. A string is a one-dimensional array of
all possible 8-bit quantities except NUL, with an optional maximum
size.</p>
<p>A string is similar to a sequence of <code class="docutils literal notranslate"><span class="pre">char</span></code>.</p>
<p>Dylan defines <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>, <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a>, and
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a> classes.</p>
</section>
<section id="id87">
<h5>Specification<a class="headerlink" href="#id87" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">string</span></code> type shall be mapped onto a Dylan
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;string&gt;</span></code> class that shall be an alias for or a subclass of
the Dylan <code class="docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code> class.</p>
</section>
<section id="id88">
<h5>Rationale<a class="headerlink" href="#id88" title="Permalink to this heading">#</a></h5>
<p>The <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a> class is not mandated in the mapping to
retain the flexibility and efficiency of the underlying Dylan
implementation. The effect of storing a NUL in a <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;string&gt;</span></code>
that is passed as an argument to a request is undefined.</p>
</section>
<section id="id89">
<h5>Examples<a class="headerlink" href="#id89" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
typedef<span class="w"> </span><span class="nb">string</span><span class="w"> </span>constellation;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;constellation&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CORBA/&lt;string&gt;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-wide-string-type">
<h4>Mapping for wide string type<a class="headerlink" href="#mapping-for-wide-string-type" title="Permalink to this heading">#</a></h4>
<section id="id90">
<h5>Background<a class="headerlink" href="#id90" title="Permalink to this heading">#</a></h5>
<p>The IDL <code class="docutils literal notranslate"><span class="pre">wstring</span></code> data type represents a sequence of <code class="docutils literal notranslate"><span class="pre">wchar</span></code> elements.</p>
<p>Dylan defines a <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a> type.</p>
</section>
<section id="id91">
<h5>Specification<a class="headerlink" href="#id91" title="Permalink to this heading">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">wstring</span></code> type shall be mapped to the Dylan type
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;wstring&gt;</span></code> which shall be an alias for
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a>.</p>
</section>
<section id="id92">
<h5>Rationale<a class="headerlink" href="#id92" title="Permalink to this heading">#</a></h5>
<p>The natural mapping to Dylan.</p>
</section>
<section id="id93">
<h5>Examples<a class="headerlink" href="#id93" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
typedef<span class="w"> </span>wstring<span class="w"> </span>local_name;
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;local-name&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CORBA/&lt;wstring&gt;</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-array-type">
<h4>Mapping for array type<a class="headerlink" href="#mapping-for-array-type" title="Permalink to this heading">#</a></h4>
<section id="id94">
<h5>Background<a class="headerlink" href="#id94" title="Permalink to this heading">#</a></h5>
<p>IDL defines an <code class="docutils literal notranslate"><span class="pre">array</span></code> type for multidimensional fixed-size arrays,
with explicit sizes for each dimension.</p>
<p>Dylan has a similar <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#array"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;array&gt;</span></code></a> class.</p>
</section>
<section id="id95">
<h5>Specification<a class="headerlink" href="#id95" title="Permalink to this heading">#</a></h5>
<p>The IDL array type shall be mapped onto the Dylan <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;array&gt;</span></code>
class. The new class shall be an alias for or a subclass of the Dylan
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#array"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;array&gt;</span></code></a> class. An element type shall be mapped to a limited
type of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;array&gt;</span></code>.</p>
</section>
<section id="id96">
<h5>Rationale<a class="headerlink" href="#id96" title="Permalink to this heading">#</a></h5>
<p>This is the straightforward, natural mapping, albeit hidden behind a
CORBA-specific class for portability across implementations and
versions.</p>
</section>
<section id="id97">
<h5>Examples<a class="headerlink" href="#id97" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
typedef<span class="w"> </span><span class="nb">long</span><span class="w"> </span>tensor[<span class="mi">3</span>][<span class="mi">3</span>][<span class="mi">3</span>];
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">constant</span><span class="w"> </span><span class="nc">&lt;tensor&gt;</span><span class="w"> </span><span class="o">=</span>
<span class="w">  </span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;array&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span>
<span class="w">          </span><span class="k">dimensions:</span><span class="w"> </span><span class="p">#(</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="mapping-for-exceptions">
<h3>Mapping for exceptions<a class="headerlink" href="#mapping-for-exceptions" title="Permalink to this heading">#</a></h3>
<section id="id98">
<h4>Background<a class="headerlink" href="#id98" title="Permalink to this heading">#</a></h4>
<p>IDL defines exceptions as:</p>
<blockquote>
<div><p>… struct-like data structures which may be returned to indicate
that an exceptional situation has occurred during the performance
of a request.</p>
</div></blockquote>
<p>Dylan defines a rich, object-oriented, condition signalling and
handling facility.</p>
</section>
<section id="id99">
<h4>Specification<a class="headerlink" href="#id99" title="Permalink to this heading">#</a></h4>
<p>IDL exceptions shall be mapped onto sealed Dylan conditions that are
subclasses of <code class="docutils literal notranslate"><span class="pre">CORBA/&lt;user-exception&gt;</span></code>, which shall be a subtype of
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;exception&gt;</span></code>, which itself shall be a subtype of the Dylan
<a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#condition"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;condition&gt;</span></code></a> class. As with IDL structures, any members shall be
mapped to pairs of sealed setter and getter generic functions and
corresponding initialization keywords. It shall be an error to call
these functions on instances of types other than those mapped from the
IDL exception definition. Furthermore the Dylan protocol functions
<a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#make"><code class="xref drm docutils literal notranslate"><span class="pre">make</span></code></a> and <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#initialize"><code class="xref drm docutils literal notranslate"><span class="pre">initialize</span></code></a> shall be sealed over the domain of
the mapped class.</p>
<p>Conditions shall be signalled in the standard Dylan manner by the
CORBA runtime and not returned or passed as arguments.</p>
<p>Standard system exceptions shall be direct or indirect subclasses of
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;system-exception&gt;</span></code> which shall be a subtype of
<code class="docutils literal notranslate"><span class="pre">CORBA/&lt;exception&gt;</span></code>.</p>
</section>
<section id="id100">
<h4>Rationale<a class="headerlink" href="#id100" title="Permalink to this heading">#</a></h4>
<p>This is the natural mapping of IDL exceptions into the Dylan language.</p>
</section>
<section id="id101">
<h4>Examples<a class="headerlink" href="#id101" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
exception<span class="w"> </span>melt_down<span class="w"> </span>{
<span class="w">  </span>short<span class="w"> </span>seconds_remaining;
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="c1">// Dylan (using slots)</span>
<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;melt-down&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">CORBA/&lt;user-exception&gt;</span><span class="p">)</span>
<span class="w">   </span><span class="nb">slot</span><span class="w"> </span><span class="n">melt-down/seconds-remaining</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="k">required-init-keyword:</span><span class="w"> </span><span class="k">seconds-remaining:</span><span class="p">;</span>
<span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">make</span><span class="w"> </span><span class="p">(</span><span class="nb">singleton</span><span class="p">(</span><span class="nc">&lt;melt-down&gt;</span><span class="p">));</span>
<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">initialize</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;melt-down&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="mapping-for-operations">
<h3>Mapping for operations<a class="headerlink" href="#mapping-for-operations" title="Permalink to this heading">#</a></h3>
<section id="id102">
<h4>Background<a class="headerlink" href="#id102" title="Permalink to this heading">#</a></h4>
<p>IDL uses operations as the basic means by which CORBA-compliant
programs communicate with each other. Operation declarations are akin
to C function declarations, but they also have to deal with parameter
directions, exceptions, and client contexts. All operations are
defined within the scope of an interface.</p>
<p>Dylan programs call generic functions to communicate with other Dylan
programs. The generic functions are implemented by methods.</p>
</section>
<section id="id103">
<h4>Specification<a class="headerlink" href="#id103" title="Permalink to this heading">#</a></h4>
<p>An IDL operation shall be mapped to an open Dylan generic
function. The generic function name is subject to the usual identifier
translation specified earlier. It shall be an error to call the
function on instances of types not mapped from the IDL operation
definition.</p>
<p>An IDL operation declared as <code class="docutils literal notranslate"><span class="pre">oneway</span></code> shall be mapped on to a
generic function that returns zero results.</p>
<p>The IDL interface object shall become the first parameter to the Dylan
generic function. A IDL operation parameter declared as <code class="docutils literal notranslate"><span class="pre">in</span></code> shall
become a parameter of the Dylan generic function. A parameter declared
as <code class="docutils literal notranslate"><span class="pre">out</span></code> shall become a result of the Dylan generic function. A
parameter declared as <code class="docutils literal notranslate"><span class="pre">inout</span></code> shall become both a parameter and a
result of the Dylan generic function. The Dylan parameters and results
shall maintain the order of the original parameters, with the
interface object and operation return value coming before any further
parameters and results defined by the IDL parameters.</p>
<p>An IDL <code class="docutils literal notranslate"><span class="pre">raises</span></code> declaration describes the additional, non-standard,
exceptions that may be raised by invocation of the operation. This is
not mapped to any visible feature of the generic function that is
mapped from the operation declaration. If any exceptions are raised,
however, they shall be signalled and not returned from an operation
request.</p>
<p>An IDL <code class="docutils literal notranslate"><span class="pre">context</span></code> declaration describes which additional pieces of
client state the service is passed. When a <code class="docutils literal notranslate"><span class="pre">context</span></code> clause is
present this shall be mapped to a <code class="docutils literal notranslate"><span class="pre">context:</span></code> keyword argument. When
invoking an operation, if a context is passed in then this shall be
used instead of the ORB’s default context for looking up the property
names listed in the operation’s <code class="docutils literal notranslate"><span class="pre">context</span></code> clause. When being
invoked, an operation’s context keyword argument shall be filled by
applying the proper names to the given client context.</p>
</section>
<section id="id104">
<h4>Rationale<a class="headerlink" href="#id104" title="Permalink to this heading">#</a></h4>
<p>This is the natural mapping. The generic function is open to allow the
server module to implement the function by adding methods.</p>
<p>Contexts are mapped are keyword arguments so that client code does not
have to worry about them by default.</p>
</section>
<section id="id105">
<h4>Examples<a class="headerlink" href="#id105" title="Permalink to this heading">#</a></h4>
<section id="in-parameters">
<h5>In Parameters<a class="headerlink" href="#in-parameters" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>stealth<span class="w"> </span>{
<span class="w">  </span>exception<span class="w"> </span>power_failure<span class="w"> </span>{};
<span class="w">  </span>void<span class="w"> </span>engage_cloak<span class="w"> </span>(in<span class="w"> </span><span class="nb">long</span><span class="w"> </span>power)
<span class="w">    </span>raises<span class="w"> </span>(power_failure);
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;stealth&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">stealth/engage-cloak</span>
<span class="w">    </span><span class="p">(</span><span class="n">stealth</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;stealth&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">power</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">();</span>

<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="n">stealth/&lt;power-failure&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">CORBA/&lt;user-exception&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">make</span><span class="w"> </span><span class="p">(</span><span class="nb">singleton</span><span class="p">(</span><span class="n">stealth/&lt;power-failure&gt;</span><span class="p">));</span>
<span class="k">define</span><span class="w"> </span><span class="nb">sealed</span><span class="w"> </span><span class="nb">domain</span><span class="w"> </span><span class="nb">initialize</span><span class="w"> </span><span class="p">(</span><span class="n">stealth/&lt;power-failure&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="out-parameters">
<h5>Out Parameters<a class="headerlink" href="#out-parameters" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>fuel_cell<span class="w"> </span><span class="o">:</span><span class="w"> </span>power_source<span class="w"> </span>{
<span class="w">  </span>short<span class="w"> </span>burn_hydrogen
<span class="w">    </span>(in<span class="w"> </span><span class="nb">long</span><span class="w"> </span>burn_rate,<span class="w"> </span>out<span class="w"> </span>sequence<span class="o">&lt;</span>short,<span class="mi">7</span><span class="o">&gt;</span><span class="w"> </span>emissions);
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;fuel-cell&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;power-source&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">fuel-cell/burn-hydrogen</span>
<span class="w">    </span><span class="p">(</span><span class="n">fuel-cell</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;fuel-cell&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">burn-rate</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">emissions</span><span class="w"> </span><span class="p">::</span><span class="nb">limited</span><span class="p">(</span><span class="n">CORBA/&lt;sequence&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">of:</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="inout-parameters">
<h5>InOut Parameters<a class="headerlink" href="#inout-parameters" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>frame<span class="w"> </span>{
<span class="w">  </span>void<span class="w"> </span>request<span class="o">-</span>sizes<span class="w"> </span>(inout<span class="w"> </span><span class="nb">long</span><span class="w"> </span>width,<span class="w"> </span>inout<span class="w"> </span><span class="nb">long</span><span class="w"> </span>height);
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;frame&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">frame/request-sizes</span>
<span class="w">    </span><span class="p">(</span><span class="n">frame</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;frame&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">width</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">height</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;height&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;long&gt;</span><span class="p">,</span>
<span class="w">     </span><span class="n">height</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;height&gt;</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="mapping-for-attributes">
<h3>Mapping for attributes<a class="headerlink" href="#mapping-for-attributes" title="Permalink to this heading">#</a></h3>
<section id="id106">
<h4>Background<a class="headerlink" href="#id106" title="Permalink to this heading">#</a></h4>
<p>IDL attributes implicitly define a pair of accessor functions, one for
retrieving the value of the attribute, and another for setting its
value. The names of the accessor functions are language-mapping
specific, but must not collide with legal operation names specifiable
in IDL. Attributes may be defined as <code class="docutils literal notranslate"><span class="pre">readonly</span></code>.</p>
<p>Dylan’s slots provide a similar mechanism, including <code class="docutils literal notranslate"><span class="pre">constant</span></code>
slots.</p>
</section>
<section id="id107">
<h4>Specification<a class="headerlink" href="#id107" title="Permalink to this heading">#</a></h4>
<p>IDL attributes shall be mapped to a pair of open generic functions,
one getter and one setter. The names of the functions shall be derived
by the usual identifier translation rules, with the addition that the
setter function has the suffix <code class="docutils literal notranslate"><span class="pre">-setter</span></code>. Attributes declared as
<code class="docutils literal notranslate"><span class="pre">readonly</span></code> will only have a getter function. It shall be an error to
call these functions on instances of types other than those mapped
from the IDL attribute definition.</p>
<p>If a mapped attribute name would clash with a mapped operation name
then the mapped attribute name shall have <code class="docutils literal notranslate"><span class="pre">%</span></code> prepended.</p>
</section>
<section id="id108">
<h4>Rationale<a class="headerlink" href="#id108" title="Permalink to this heading">#</a></h4>
<p>It is not necessary to specify whether the generic functions are
defined by virtual slots.</p>
<p>The identifier translation rules prevent potential name collisions
with the setter functions by appending <code class="docutils literal notranslate"><span class="pre">-%</span></code> to the end of an
existing identifier that ends with <code class="docutils literal notranslate"><span class="pre">-setter</span></code>.</p>
<p>In the main, attribute names are unlikely to clash with operation
names so it seems harsh to punish the normal case with some additional
name mangling. Instead, the penalty is put on defining a clashing
operation name for an existing attribute. Existing source code would
probably then have to be rewritten in order to continue to get at the
old attribute.</p>
</section>
<section id="id109">
<h4>Examples<a class="headerlink" href="#id109" title="Permalink to this heading">#</a></h4>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>prisoners_dilemma<span class="w"> </span>{
<span class="w">  </span>attribute<span class="w"> </span>short<span class="w"> </span>mutual_cooperation_reward;
<span class="w">  </span>attribute<span class="w"> </span>short<span class="w"> </span>mutual_defection_punishment;
<span class="w">  </span>attribute<span class="w"> </span>short<span class="w"> </span>defectors_temptation;
<span class="w">  </span>attribute<span class="w"> </span>short<span class="w"> </span>suckers_payoff;
};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;prisoners-dilemma&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span><span class="w"> </span><span class="n">prisoners-dilemma/mutual-cooperation-reward</span>
<span class="w">    </span><span class="p">(</span><span class="n">object</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;prisoners-dilemma&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">);</span>

<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">generic</span>
<span class="w">  </span><span class="n">prisoners-dilemma/mutual-cooperation-reward-setter</span>
<span class="w">    </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">object</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;prisoners-dilemma&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">CORBA/&lt;short&gt;</span><span class="p">);</span>

<span class="c1">// ...</span>
</pre></div>
</div>
</section>
</section>
<section id="memory-management-considerations">
<h3>Memory management considerations<a class="headerlink" href="#memory-management-considerations" title="Permalink to this heading">#</a></h3>
<p>Dylan is a garbage-collected language, however a Dylan program may be
interacting, via an ORB, with remote data in another address space,
and/or with local data not built using the same Dylan implementation
or even the same language. In each case, explicit freeing of some data
may be necessary.</p>
<p>By default, the ORB shall provide copying semantics for arguments and
results and the Dylan garbage collector shall take care of reclaiming
the storage occupied by provably unreferenced data. This includes data
of basic types, constructed types, and object references.</p>
<p>However, a Dylan ORB may optionally provide non-copying semantics
data. That is, Dylan programs may have to deal with pointers to shared
data, because the ORB is acting as an efficient in-process
interoperability layer. In this case, it is expected that the memory
management protocol will be explicitly described in IDL as part of the
contract between the interoperating programs.</p>
</section>
<section id="multi-threading-considerations">
<h3>Multi-threading considerations<a class="headerlink" href="#multi-threading-considerations" title="Permalink to this heading">#</a></h3>
<p>It should be assumed that invocation of a CORBA operation from Dylan
is not thread-safe. That is, if two threads in a Dylan program invoke
the same operation it is not guaranteed that they will be properly
serialized.</p>
<p>An implementation of the IDL-to-Dylan mapping should document whether
it is thread-safe, and if it is should document whether the whole
program or just the thread is blocked.</p>
</section>
</section>
<section id="the-mapping-of-pseudo-objects-to-dylan">
<h2>The mapping of pseudo-objects to Dylan<a class="headerlink" href="#the-mapping-of-pseudo-objects-to-dylan" title="Permalink to this heading">#</a></h2>
<section id="id110">
<h3>Introduction<a class="headerlink" href="#id110" title="Permalink to this heading">#</a></h3>
<section id="id111">
<h4>Background<a class="headerlink" href="#id111" title="Permalink to this heading">#</a></h4>
<p>In addition to defining how application objects and data are accessed,
a language mapping must describe how to access some services
implemented directly by the ORB. These services are concerned with
operations like converting an object reference to a string, making a
request through the Dynamic Invocation Interface (DII), building a
<code class="docutils literal notranslate"><span class="pre">Context</span></code>, and so on.</p>
<p>All that is required is that there be some defined mechanism for doing
these things in each language-binding specification. However, most
language-binding specifications take the pseudo-objects approach in
which these ORB services are accessed by applying the binding’s normal
mapping rules to OMG’s IDL descriptions of the interfaces to the
services.</p>
<p>The advantage of this is that programmers can read the OMG’s
descriptions of the interfaces and know how to access them from their
preferred language without learning any additional language-specific
access methods.</p>
<p>The disadvantage is that some of the interfaces turn out to be
particularly clumsy for a given programming language.</p>
</section>
<section id="id112">
<h4>Specification<a class="headerlink" href="#id112" title="Permalink to this heading">#</a></h4>
<p>The IDL pseudo-object interfaces shall be mapped according to the
Dylan language binding as specified in the earlier parts of this
document, except where it explicitly deviates. In some cases, also
where explicitly specified, there will be an additional access path
that is more convenient for Dylan programmers. A conforming Dylan
language mapping shall support both interfaces.</p>
</section>
<section id="id113">
<h4>Rationale<a class="headerlink" href="#id113" title="Permalink to this heading">#</a></h4>
<p>The pseudo object approach is taken so that experienced CORBA
developers can leverage more of their knowledge and so that any new
pseudo-object services defined by the OMG will automatically be
covered.</p>
<p>However, some of the potential pseudo-object IDL descriptions lead to
awkward interfaces from the Dylan programmer’s point of view and
incompatible abstractions might arise on top of them; built by
different binding. Therefore, in order to provide more natural Dylan
abstractions, there are some additional Dylan-friendly interfaces in
the following sections.</p>
</section>
</section>
<section id="orb-interface">
<h3>ORB Interface<a class="headerlink" href="#orb-interface" title="Permalink to this heading">#</a></h3>
<section id="object-references">
<h4>Object references<a class="headerlink" href="#object-references" title="Permalink to this heading">#</a></h4>
<section id="id114">
<h5>Background<a class="headerlink" href="#id114" title="Permalink to this heading">#</a></h5>
<p>All CORBA interfaces inherit from the <code class="docutils literal notranslate"><span class="pre">CORBA::Object</span></code> interface.</p>
</section>
<section id="id115">
<h5>Specification<a class="headerlink" href="#id115" title="Permalink to this heading">#</a></h5>
<p>An IDL interface shall be mapped to a reference class that is a direct
or indirect subclass of both the interface class itself and
<code class="docutils literal notranslate"><span class="pre">corba/&lt;object&gt;</span></code>.</p>
</section>
<section id="id116">
<h5>Rationale<a class="headerlink" href="#id116" title="Permalink to this heading">#</a></h5>
<p>This allows object references and servants to inherit from the same
protocol class and yet retain their own separate behaviors.</p>
</section>
<section id="example">
<h5>Example<a class="headerlink" href="#example" title="Permalink to this heading">#</a></h5>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
interface<span class="w"> </span>ion<span class="w"> </span>{};
</pre></div>
</div>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan (protocol)</span>
<span class="k">define</span><span class="w"> </span><span class="nb">open</span><span class="w"> </span><span class="nb">abstract</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;ion&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="c1">// Dylan (possible reference implementation)</span>
<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;ion-reference&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;ion&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">corba/&lt;object&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="object-reference-equality">
<h4>Object reference equality<a class="headerlink" href="#object-reference-equality" title="Permalink to this heading">#</a></h4>
<section id="id117">
<h5>Background<a class="headerlink" href="#id117" title="Permalink to this heading">#</a></h5>
<p>CORBA allows for (imprecise) equality testing via
<code class="docutils literal notranslate"><span class="pre">corba::object::is_equivalent</span></code>.</p>
</section>
<section id="id118">
<h5>Specification<a class="headerlink" href="#id118" title="Permalink to this heading">#</a></h5>
<p>In addition to mapping the PIDL function above to
<code class="docutils literal notranslate"><span class="pre">corba/object/is-equivalent</span></code>, a Dylan ORB shall provide a method on
<code class="docutils literal notranslate"><span class="pre">=</span></code> that performs the same function.</p>
</section>
<section id="id119">
<h5>Rationale<a class="headerlink" href="#id119" title="Permalink to this heading">#</a></h5>
<p>It is natural for Dylan programmers to want to use <code class="docutils literal notranslate"><span class="pre">=</span></code> on object
references.</p>
</section>
<section id="id120">
<h5>Example<a class="headerlink" href="#id120" title="Permalink to this heading">#</a></h5>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="c1">// ...</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">corba/object/is-equivalent</span><span class="p">(</span><span class="n">grid1</span><span class="p">,</span><span class="w"> </span><span class="n">grid2</span><span class="p">))</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span>

<span class="c1">// versus</span>
<span class="c1">// ...</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">grid1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">grid2</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// ...</span>
<span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="nil-object-references">
<h4>Nil object references<a class="headerlink" href="#nil-object-references" title="Permalink to this heading">#</a></h4>
<section id="id121">
<h5>Background<a class="headerlink" href="#id121" title="Permalink to this heading">#</a></h5>
<p>CORBA allows for nil object references. These are returned from some
operations to indicate situations where, for example, no real object
reference could be found.</p>
<p>Dylan programmers normally indicate such a situation by returning the
rogue value <code class="docutils literal notranslate"><span class="pre">#f</span></code> and by declaring the type of the return value to be
<code class="docutils literal notranslate"><span class="pre">false-or(&lt;some-type&gt;)</span></code>.</p>
</section>
<section id="id122">
<h5>Specification<a class="headerlink" href="#id122" title="Permalink to this heading">#</a></h5>
<p>NIL object references shall be mapped to interface-specific values
that can be tested with <code class="docutils literal notranslate"><span class="pre">CORBA::is_nil</span></code>. A nil object reference for
a particular interface shall be obtainable by calling the function
<code class="docutils literal notranslate"><span class="pre">make-nil</span></code> on the associated protocol class.</p>
</section>
<section id="id123">
<h5>Rationale<a class="headerlink" href="#id123" title="Permalink to this heading">#</a></h5>
<p>Using <code class="docutils literal notranslate"><span class="pre">#f</span></code> to represent nil object references would be natural and
convenient in some respects, notably during testing. However, all
object reference type declarations would have to be wrapped with
<code class="docutils literal notranslate"><span class="pre">false-or</span></code> which would be very awkward. Even if we did this then we
would create ambiguous, unorderable methods which all accepted <code class="docutils literal notranslate"><span class="pre">#f</span></code>
for some generic functions. A less pervasive approach where
<code class="docutils literal notranslate"><span class="pre">false-or</span></code> was only used for return values would be better, but then
it would be harder to glue operations together. The glue code would
have to check for <code class="docutils literal notranslate"><span class="pre">#f</span></code> output from one operation before calling the
next. This seems an inappropriate place to check this, and should be
left to the receiving operation.</p>
<p>There are also advantages in terms of type safety. A spurious <code class="docutils literal notranslate"><span class="pre">#f</span></code>
is more easily passed to, or returned from, an operation than a more
explicit nil reference.</p>
</section>
<section id="id124">
<h5>Example<a class="headerlink" href="#id124" title="Permalink to this heading">#</a></h5>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">let</span><span class="w"> </span><span class="n">philosopher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">make-nil</span><span class="p">(</span><span class="nc">&lt;philosopher&gt;</span><span class="p">);</span>
<span class="n">corba/object/is-nil</span><span class="p">(</span><span class="n">philosopher</span><span class="p">);</span><span class="w"> </span><span class="c1">// returns #t</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="dynamic-invocation-interface">
<h3>Dynamic Invocation Interface<a class="headerlink" href="#dynamic-invocation-interface" title="Permalink to this heading">#</a></h3>
<section id="nvlist">
<h4>NVList<a class="headerlink" href="#nvlist" title="Permalink to this heading">#</a></h4>
<section id="id125">
<h5>Background<a class="headerlink" href="#id125" title="Permalink to this heading">#</a></h5>
<p>CORBA NVLists are partially opaque in that they can normally only be
created by the ORB <code class="docutils literal notranslate"><span class="pre">create_list</span></code> operation and added to by the
<code class="docutils literal notranslate"><span class="pre">add_item</span></code> operation.</p>
</section>
<section id="id126">
<h5>Specification<a class="headerlink" href="#id126" title="Permalink to this heading">#</a></h5>
<p>NVLists shall be mapped to CORBA sequences of NamedValues.</p>
</section>
<section id="id127">
<h5>Rationale<a class="headerlink" href="#id127" title="Permalink to this heading">#</a></h5>
<p>Since CORBA sequences shall be mapped to a type that supports the
<code class="docutils literal notranslate"><span class="pre">&lt;stretchy-vector&gt;</span></code> protocol, they can be created and added to using
the normal Dylan calls.</p>
<p>This is in addition to the pseudo IDL interfaces <code class="docutils literal notranslate"><span class="pre">create_list</span></code> and
<code class="docutils literal notranslate"><span class="pre">add_item</span></code>.</p>
</section>
<section id="id128">
<h5>Example<a class="headerlink" href="#id128" title="Permalink to this heading">#</a></h5>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan</span>
<span class="k">let</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="n">corba/&lt;nvlist&gt;</span><span class="p">);</span>
<span class="n">args</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">add!</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="n">corba/&lt;namedvalue&gt;</span><span class="p">,</span>
<span class="w">                        </span><span class="k">name:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="k">argument:</span><span class="w"> </span><span class="nb">as</span><span class="p">(</span><span class="n">corba/&lt;any&gt;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">),</span>
<span class="w">                        </span><span class="k">len:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                        </span><span class="k">arg-modes:</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="dynamic-skeleton-interface">
<h3>Dynamic Skeleton Interface<a class="headerlink" href="#dynamic-skeleton-interface" title="Permalink to this heading">#</a></h3>
<section id="dynamic-implementation-routine">
<h4>Dynamic Implementation Routine<a class="headerlink" href="#dynamic-implementation-routine" title="Permalink to this heading">#</a></h4>
<section id="id129">
<h5>Background<a class="headerlink" href="#id129" title="Permalink to this heading">#</a></h5>
<p>The Dynamic Implementation Routine (DIR) is intended to support a
variety of uses, including dynamic programming/scripting languages,
bridge building, debugging, monitoring, and so on.</p>
<p>The idea is that a particular kind of registered servant is invoked
via the DIR for all operations instead of invoking particular
skeletons and thence particular implementation methods.</p>
<p>An auxiliary function is required for the application to inform the
POA of the repository-ID of the most derived interface supported by
the dynamic servant.</p>
</section>
<section id="id130">
<h5>Specification<a class="headerlink" href="#id130" title="Permalink to this heading">#</a></h5>
<p>There shall be a subclass of <code class="docutils literal notranslate"><span class="pre">portableserver/&lt;servant&gt;</span></code> called
<code class="docutils literal notranslate"><span class="pre">portableserver/&lt;dynamic-servant&gt;</span></code>. Instances of subclasses of this
class registered with the adapter as servants for objects shall have
operations invoked via the DIR function
<code class="docutils literal notranslate"><span class="pre">corba/serverrequest/invoke</span></code>.</p>
<p>The shall be an open generic function
<code class="docutils literal notranslate"><span class="pre">portableserver/servant/primary-interface</span></code> which shall be called by
the POA to determine the repository-ID of the most derived interface
supported by the dynamic servant.</p>
<p>The pseudo IDL of the above is:</p>
<div class="highlight-idl notranslate"><div class="highlight"><pre><span></span><span class="o">//</span><span class="w"> </span>IDL
module<span class="w"> </span>CORBA<span class="w"> </span>{
<span class="w">  </span>interface<span class="w"> </span>PortableServer<span class="o">::</span>Dynamic_Servant<span class="w"> </span><span class="o">:</span>
<span class="w">    </span>PortableServer<span class="o">::</span>Servant<span class="w"> </span>{};
<span class="w">  </span>interface<span class="w"> </span>ServerRequest<span class="w"> </span>{
<span class="w">    </span><span class="o">//</span><span class="w"> </span>...
<span class="w">    </span>void<span class="w"> </span>invoke<span class="w"> </span>(in<span class="w"> </span>PortableServer<span class="o">::</span>Dynamic_Servant<span class="w"> </span>servant);
<span class="w">  </span>};
};

module<span class="w"> </span>PortableServer<span class="w"> </span>{
<span class="w">  </span>interface<span class="w"> </span>Servant<span class="w"> </span>{
<span class="w">  </span><span class="o">//</span><span class="w"> </span>...
<span class="w">    </span>RepositoryID<span class="w"> </span>primary_interface
<span class="w">      </span>(in<span class="w"> </span>ObjectID<span class="w"> </span>id,<span class="w"> </span>in<span class="w"> </span>POA<span class="w"> </span>poa)
<span class="w">  </span>};
};
</pre></div>
</div>
</section>
<section id="id131">
<h5>Rationale<a class="headerlink" href="#id131" title="Permalink to this heading">#</a></h5>
<p>We just need to specify the function that is called on the registered
servant for all operations, plus the auxiliary function for
determining the repository-ID.</p>
</section>
<section id="id132">
<h5>Example<a class="headerlink" href="#id132" title="Permalink to this heading">#</a></h5>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="c1">// Dylan</span>
<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;buckstop&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">portableserver/&lt;dynamic-servant&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">corba/serverrequest/invoke</span>
<span class="w">     </span><span class="p">(</span><span class="n">request</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">corba/&lt;serverrequest&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">servant</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;buckstop&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">   </span><span class="c1">// ...</span>
<span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="w"> </span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">portableserver/servant/primary-interface</span>
<span class="w">     </span><span class="p">(</span><span class="n">servant</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;buckstop&gt;</span><span class="p">,</span>
<span class="w">      </span><span class="n">id</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;string&gt;</span><span class="p">,</span>
<span class="w">      </span><span class="n">poa</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="n">portableserver/&lt;poa&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">repositoryid</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;string&gt;</span><span class="p">)</span>
<span class="w">   </span><span class="s">&quot;LOCAL:buckstop&quot;</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="the-portable-object-adapter">
<h3>The Portable Object Adapter<a class="headerlink" href="#the-portable-object-adapter" title="Permalink to this heading">#</a></h3>
<section id="servants">
<h4>Servants<a class="headerlink" href="#servants" title="Permalink to this heading">#</a></h4>
<section id="id133">
<h5>Background<a class="headerlink" href="#id133" title="Permalink to this heading">#</a></h5>
<p>The <code class="docutils literal notranslate"><span class="pre">PortableServer</span></code> module for the Portable Object Adapter (POA)
defines the native <code class="docutils literal notranslate"><span class="pre">Servant</span></code> type.</p>
</section>
<section id="id134">
<h5>Specification<a class="headerlink" href="#id134" title="Permalink to this heading">#</a></h5>
<p>The Dylan mapping for the Servant type shall be the open abstract
class <code class="docutils literal notranslate"><span class="pre">portableserver/&lt;servant&gt;</span></code>.</p>
<p>An IDL interface shall be mapped to a skeleton class that is a direct
or indirect subclass of both the interface class itself and
<code class="docutils literal notranslate"><span class="pre">portableserver/&lt;servant&gt;</span></code>.</p>
<p>The name of the skeleton class shall be formed by appending
<code class="docutils literal notranslate"><span class="pre">-servant</span></code> to the interface name and applying the normal identifier
mapping rules.</p>
<p>The skeleton class shall be exported from the skeletons library
generated from the IDL.</p>
</section>
<section id="id135">
<h5>Rationale<a class="headerlink" href="#id135" title="Permalink to this heading">#</a></h5>
<dl class="simple">
<dt>Only instances of subclasses of <code class="docutils literal notranslate"><span class="pre">portableserver/&lt;servant&gt;</span></code> should be</dt><dd><p>created.</p>
</dd>
</dl>
</section>
<section id="id136">
<h5>Examples<a class="headerlink" href="#id136" title="Permalink to this heading">#</a></h5>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="c1">// Dylan Skeleton (generated from IDL)</span>
<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;grid-servant&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nc">&lt;grid&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">portableserver/&lt;servant&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="c1">// Dylan Implementation</span>
<span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;grid-implementation&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;grid-servant&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../building-with-duim/index.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Building Applications With DUIM</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="scepter.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Using the Dylan IDL Compiler</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2011-2023, Dylan Hackers
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">An IDL Binding for Dylan</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#document-conventions">Document conventions</a></li>
<li><a class="reference internal" href="#bibliography">Bibliography</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-rationale">Design rationale</a><ul>
<li><a class="reference internal" href="#glossary-of-terms">Glossary of terms</a></li>
<li><a class="reference internal" href="#design-philosophy">Design philosophy</a><ul>
<li><a class="reference internal" href="#linguistic-requirements">Linguistic requirements</a></li>
<li><a class="reference internal" href="#engineering-requirements">Engineering requirements</a></li>
<li><a class="reference internal" href="#miscellaneous-requirements">Miscellaneous requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-summary">Mapping summary</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lexical-mapping">Lexical mapping</a><ul>
<li><a class="reference internal" href="#identifiers">Identifiers</a><ul>
<li><a class="reference internal" href="#background">Background</a></li>
<li><a class="reference internal" href="#specification">Specification</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#literals">Literals</a><ul>
<li><a class="reference internal" href="#integers">Integers</a><ul>
<li><a class="reference internal" href="#id1">Background</a></li>
<li><a class="reference internal" href="#id2">Specification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#floating-point-numbers">Floating point numbers</a><ul>
<li><a class="reference internal" href="#id3">Background</a></li>
<li><a class="reference internal" href="#id4">Specification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#character-literals">Character literals</a><ul>
<li><a class="reference internal" href="#id5">Background</a></li>
<li><a class="reference internal" href="#id6">Specification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#string-literals">String Literals</a><ul>
<li><a class="reference internal" href="#id7">Background</a></li>
<li><a class="reference internal" href="#id8">Specification</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#fixed-point-decimals">Fixed point decimals</a><ul>
<li><a class="reference internal" href="#id9">Background</a></li>
<li><a class="reference internal" href="#id10">Specification</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constant-expressions">Constant expressions</a><ul>
<li><a class="reference internal" href="#operators">Operators</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-mapping-of-idl-to-dylan">The mapping of IDL to Dylan</a><ul>
<li><a class="reference internal" href="#names">Names</a><ul>
<li><a class="reference internal" href="#id11">Identifiers</a></li>
<li><a class="reference internal" href="#scoped-names">Scoped names</a><ul>
<li><a class="reference internal" href="#id12">Specification</a></li>
<li><a class="reference internal" href="#rationale">Rationale</a></li>
<li><a class="reference internal" href="#id13">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#idl-files">IDL Files</a><ul>
<li><a class="reference internal" href="#id14">Specification</a></li>
<li><a class="reference internal" href="#id15">Rationale</a></li>
<li><a class="reference internal" href="#implementation-notes">Implementation notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-dylan-orb-library">The DYLAN-ORB library</a></li>
<li><a class="reference internal" href="#mapping-modules">Mapping modules</a><ul>
<li><a class="reference internal" href="#id16">Background</a></li>
<li><a class="reference internal" href="#id17">Specification</a></li>
<li><a class="reference internal" href="#id18">Rationale</a></li>
<li><a class="reference internal" href="#id19">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-interfaces">Mapping for interfaces</a><ul>
<li><a class="reference internal" href="#id20">Background</a></li>
<li><a class="reference internal" href="#id21">Specification</a></li>
<li><a class="reference internal" href="#id22">Rationale</a></li>
<li><a class="reference internal" href="#id23">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-interface-inheritance">Mapping for interface inheritance</a><ul>
<li><a class="reference internal" href="#id24">Background</a></li>
<li><a class="reference internal" href="#id25">Specification</a></li>
<li><a class="reference internal" href="#id26">Rationale</a></li>
<li><a class="reference internal" href="#id27">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-constants">Mapping for constants</a><ul>
<li><a class="reference internal" href="#id28">Specification</a></li>
<li><a class="reference internal" href="#id29">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-basic-types">Mapping for basic types</a><ul>
<li><a class="reference internal" href="#overall-background">Overall Background</a></li>
<li><a class="reference internal" href="#id30">Specification</a></li>
<li><a class="reference internal" href="#id31">Rationale</a></li>
<li><a class="reference internal" href="#id32">Integers</a><ul>
<li><a class="reference internal" href="#id33">Background</a></li>
<li><a class="reference internal" href="#id34">Specification</a></li>
<li><a class="reference internal" href="#id35">Rationale</a></li>
<li><a class="reference internal" href="#id36">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id37">Floating-point numbers</a><ul>
<li><a class="reference internal" href="#id38">Background</a></li>
<li><a class="reference internal" href="#id39">Specification</a></li>
<li><a class="reference internal" href="#id40">Rationale</a></li>
<li><a class="reference internal" href="#id41">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id42">Fixed-point decimals</a><ul>
<li><a class="reference internal" href="#id43">Background</a></li>
<li><a class="reference internal" href="#id44">Specification</a></li>
<li><a class="reference internal" href="#id45">Rationale</a></li>
<li><a class="reference internal" href="#id46">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#characters">Characters</a><ul>
<li><a class="reference internal" href="#id47">Background</a></li>
<li><a class="reference internal" href="#id48">Specification</a></li>
<li><a class="reference internal" href="#id49">Rationale</a></li>
<li><a class="reference internal" href="#id50">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wide-characters">Wide characters</a><ul>
<li><a class="reference internal" href="#id51">Background</a></li>
<li><a class="reference internal" href="#id52">Specification</a></li>
<li><a class="reference internal" href="#id53">Rationale</a></li>
<li><a class="reference internal" href="#id54">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#boolean-values">Boolean values</a><ul>
<li><a class="reference internal" href="#id55">Background</a></li>
<li><a class="reference internal" href="#id56">Specification</a></li>
<li><a class="reference internal" href="#id57">Rationale</a></li>
<li><a class="reference internal" href="#id58">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#octets">Octets</a><ul>
<li><a class="reference internal" href="#id59">Background</a></li>
<li><a class="reference internal" href="#id60">Specification</a></li>
<li><a class="reference internal" href="#id61">Rationale</a></li>
<li><a class="reference internal" href="#id62">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-any-type">The “any” type</a><ul>
<li><a class="reference internal" href="#id63">Background</a></li>
<li><a class="reference internal" href="#id64">Specification</a></li>
<li><a class="reference internal" href="#id65">Rationale</a></li>
<li><a class="reference internal" href="#id66">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-constructed-types">Mapping for constructed types</a><ul>
<li><a class="reference internal" href="#mapping-for-typedefs">Mapping for typedefs</a><ul>
<li><a class="reference internal" href="#id67">Background</a></li>
<li><a class="reference internal" href="#id68">Specification</a></li>
<li><a class="reference internal" href="#id69">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-enumeration-types">Mapping for enumeration types</a><ul>
<li><a class="reference internal" href="#id70">Background</a></li>
<li><a class="reference internal" href="#id71">Specification</a></li>
<li><a class="reference internal" href="#id72">Rationale</a></li>
<li><a class="reference internal" href="#id73">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-structure-types">Mapping for structure types</a><ul>
<li><a class="reference internal" href="#id74">Background</a></li>
<li><a class="reference internal" href="#id75">Specification</a></li>
<li><a class="reference internal" href="#id76">Rationale</a></li>
<li><a class="reference internal" href="#id77">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-discriminated-union-type">Mapping for discriminated union type</a><ul>
<li><a class="reference internal" href="#id78">Background</a></li>
<li><a class="reference internal" href="#id79">Specification</a></li>
<li><a class="reference internal" href="#id80">Rationale</a></li>
<li><a class="reference internal" href="#id81">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-sequence-type">Mapping for sequence type</a><ul>
<li><a class="reference internal" href="#id82">Background</a></li>
<li><a class="reference internal" href="#id83">Specification</a></li>
<li><a class="reference internal" href="#id84">Rationale</a></li>
<li><a class="reference internal" href="#id85">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-string-type">Mapping for string type</a><ul>
<li><a class="reference internal" href="#id86">Background</a></li>
<li><a class="reference internal" href="#id87">Specification</a></li>
<li><a class="reference internal" href="#id88">Rationale</a></li>
<li><a class="reference internal" href="#id89">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-wide-string-type">Mapping for wide string type</a><ul>
<li><a class="reference internal" href="#id90">Background</a></li>
<li><a class="reference internal" href="#id91">Specification</a></li>
<li><a class="reference internal" href="#id92">Rationale</a></li>
<li><a class="reference internal" href="#id93">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-array-type">Mapping for array type</a><ul>
<li><a class="reference internal" href="#id94">Background</a></li>
<li><a class="reference internal" href="#id95">Specification</a></li>
<li><a class="reference internal" href="#id96">Rationale</a></li>
<li><a class="reference internal" href="#id97">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-exceptions">Mapping for exceptions</a><ul>
<li><a class="reference internal" href="#id98">Background</a></li>
<li><a class="reference internal" href="#id99">Specification</a></li>
<li><a class="reference internal" href="#id100">Rationale</a></li>
<li><a class="reference internal" href="#id101">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-operations">Mapping for operations</a><ul>
<li><a class="reference internal" href="#id102">Background</a></li>
<li><a class="reference internal" href="#id103">Specification</a></li>
<li><a class="reference internal" href="#id104">Rationale</a></li>
<li><a class="reference internal" href="#id105">Examples</a><ul>
<li><a class="reference internal" href="#in-parameters">In Parameters</a></li>
<li><a class="reference internal" href="#out-parameters">Out Parameters</a></li>
<li><a class="reference internal" href="#inout-parameters">InOut Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#mapping-for-attributes">Mapping for attributes</a><ul>
<li><a class="reference internal" href="#id106">Background</a></li>
<li><a class="reference internal" href="#id107">Specification</a></li>
<li><a class="reference internal" href="#id108">Rationale</a></li>
<li><a class="reference internal" href="#id109">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory-management-considerations">Memory management considerations</a></li>
<li><a class="reference internal" href="#multi-threading-considerations">Multi-threading considerations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-mapping-of-pseudo-objects-to-dylan">The mapping of pseudo-objects to Dylan</a><ul>
<li><a class="reference internal" href="#id110">Introduction</a><ul>
<li><a class="reference internal" href="#id111">Background</a></li>
<li><a class="reference internal" href="#id112">Specification</a></li>
<li><a class="reference internal" href="#id113">Rationale</a></li>
</ul>
</li>
<li><a class="reference internal" href="#orb-interface">ORB Interface</a><ul>
<li><a class="reference internal" href="#object-references">Object references</a><ul>
<li><a class="reference internal" href="#id114">Background</a></li>
<li><a class="reference internal" href="#id115">Specification</a></li>
<li><a class="reference internal" href="#id116">Rationale</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#object-reference-equality">Object reference equality</a><ul>
<li><a class="reference internal" href="#id117">Background</a></li>
<li><a class="reference internal" href="#id118">Specification</a></li>
<li><a class="reference internal" href="#id119">Rationale</a></li>
<li><a class="reference internal" href="#id120">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nil-object-references">Nil object references</a><ul>
<li><a class="reference internal" href="#id121">Background</a></li>
<li><a class="reference internal" href="#id122">Specification</a></li>
<li><a class="reference internal" href="#id123">Rationale</a></li>
<li><a class="reference internal" href="#id124">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#dynamic-invocation-interface">Dynamic Invocation Interface</a><ul>
<li><a class="reference internal" href="#nvlist">NVList</a><ul>
<li><a class="reference internal" href="#id125">Background</a></li>
<li><a class="reference internal" href="#id126">Specification</a></li>
<li><a class="reference internal" href="#id127">Rationale</a></li>
<li><a class="reference internal" href="#id128">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#dynamic-skeleton-interface">Dynamic Skeleton Interface</a><ul>
<li><a class="reference internal" href="#dynamic-implementation-routine">Dynamic Implementation Routine</a><ul>
<li><a class="reference internal" href="#id129">Background</a></li>
<li><a class="reference internal" href="#id130">Specification</a></li>
<li><a class="reference internal" href="#id131">Rationale</a></li>
<li><a class="reference internal" href="#id132">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#the-portable-object-adapter">The Portable Object Adapter</a><ul>
<li><a class="reference internal" href="#servants">Servants</a><ul>
<li><a class="reference internal" href="#id133">Background</a></li>
<li><a class="reference internal" href="#id134">Specification</a></li>
<li><a class="reference internal" href="#id135">Rationale</a></li>
<li><a class="reference internal" href="#id136">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=2df60dd4"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>