<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="The standard-io Module" href="standard-io.html" /><link rel="prev" title="The print and pprint Modules" href="print.html" />

    <link rel="shortcut icon" href="../../_static/favicon.ico"/><!-- Generated with Sphinx 7.1.2 and Furo 2024.01.29 -->
        <title>The streams Module - Open Dylan</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?v=135e06be" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?v=36a5483c" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Open Dylan</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../../_static/images/opendylan-light.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../../_static/images/opendylan-dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Get Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download/index.html">Download</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../hacker-guide/index.html">Hacker Guide</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Hacker Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hacker-guide/documentation/index.html">Writing Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Writing Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/documentation/guidelines.html">Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/documentation/generating.html">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/documentation/doctower.html">Doctower</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/documentation/example.html">Example documentation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../hacker-guide/build-system.html">Jam-based Build System</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hacker-guide/compiler/index.html">DFMC, The Dylan Flow Machine Compiler</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of DFMC, The Dylan Flow Machine Compiler</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/compiler/notes-warnings-errors.html">Notes, Warnings and Errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/compiler/old/design.html">Compiler Design (Old)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/compiler/old/internals.html">Compiler Internals (Old)</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hacker-guide/runtime/index.html">The Runtime</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of The Runtime</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/object-representation.html">Object Representation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/calling-convention.html">Calling Convention</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/special-features.html">Special Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/mangling.html">Name Mangling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/threads.html">Compiler Support for Threads</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime/startup.html">Startup</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hacker-guide/runtime-manager/index.html">Runtime Manager</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Runtime Manager</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime-manager/access-path.html">The ACCESS-PATH library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/runtime-manager/debugger-manager.html">The DEBUGGER-MANAGER library</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../hacker-guide/duim/index.html">DUIM - Dylan User Interface Manager</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../hacker-guide/topics/index.html">Topics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Topics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/topics/method-dispatch.html">Method Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/topics/debugging.html">Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/topics/porting.html">Porting to a New Target Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/topics/ppml.html">The PPML library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hacker-guide/topics/making-a-release.html">Release Check-list</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../hacker-guide/glossary.html">Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hacker-guide/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../proposals/index.html">Enhancement Proposals</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Enhancement Proposals</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0001-dep-process.html">DEP Purpose and Guidelines</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0002-define-function.html">Define Function</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0003-c3-linearization.html">C3 superclass linearization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0004-strings-library.html">New strings Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0005-subclass-function.html">Subclass</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0006-single-file-library.html">Single File Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0007-collection-type-safety.html">Type-Safe Limited Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0008-multi-line-strings.html">Multi-line Strings</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0010-element-otherwise.html">Defaulted Element Reference Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0011-numeric-literal-syntax.html">Numeric Literal Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../proposals/dep-0012-string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Learning</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../about/index.html">Tour of Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Tour of Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/hello_world.html">Hello, World!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/everything_value.html">Everything is a value</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/classes.html">Classes &amp; Instantiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/generic_functions.html">Generic Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/getters_setters_functions.html">Getters &amp; Setters are functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/keyword_arguments.html">Keyword Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/limited_types.html">Limited Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/macros.html">Macros</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../about/examples/multiple_return_values.html">Multiple Return Values</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../getting-started-cli/index.html">Getting Started Guide</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Getting Started Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/hello-world.html">Hello World</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/source-registries.html">Using Source Registries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/managing-dependencies.html">Managing Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/quick-tips.html">A Few More Quick Tips</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/dylan-compiler.html">Using dylan-compiler interactively</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/dylan-environment.html">An example of dylan-environment interactive functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/editor-support.html">Editor Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/dylan-mode-for-emacs.html">Dylan Interactor Mode for Emacs (DIME)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/debugging-with-gdb-lldb.html">Debugging with GDB or LLDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/windows.html">Notes for Windows Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/environment-variables.html">Environment Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/cross-compilation.html">Cross Compilation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/platform-specific.html">Platform Specific Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started-cli/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/dpg/">Dylan Programming Guide</a></li>
<li class="toctree-l1"><a class="reference external" href="https://play.opendylan.org">Dylan Playground</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://opendylan.org/books/drm/">Dylan Reference Manual</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../index.html">Open Dylan Libraries</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Open Dylan Libraries</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../language-extensions/index.html">Dylan Language Extensions</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Dylan Language Extensions</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/language-differences.html">Language Differences</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/define-function.html">Function Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/for-iteration.html">Extensions to the FOR iteration construct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/weak-tables.html">Weak tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/inlining.html">Inlining adjectives for methods, constants, functions, and slots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/numbers.html">Integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/object-with-elements.html">object-with-elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/macro-system-extensions.html">Macro System Extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/parser-expansions.html">Parser Expansions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/alternative-curry-syntax.html">Alternative Curry Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/numeric-literals.html">Numeric Literal Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language-extensions/string-literals.html">String Literal Syntax</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../lid.html">LID File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="../c-ffi/index.html">The c-ffi Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../collections/index.html">The collections Library</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of The collections Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../collections/bit-set.html">The bit-set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/bit-vector.html">The bit-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/collectors.html">The collectors Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/plists.html">The plists Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/set.html">The set Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../collections/table-extensions.html">The table-extensions Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../coloring-stream/index.html">The coloring-stream Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../common-dylan/index.html">The common-dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle navigation of The common-dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/byte-vector.html">The byte-vector Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/common-extensions.html">The common-extensions Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/machine-words.html">The machine-words Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/simple-format.html">The simple-format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/simple-profiling.html">The simple-profiling Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/simple-random.html">The simple-random Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/simple-timers.html">The simple-timers Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../common-dylan/transcendentals.html">The transcendentals Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../dood/index.html">The DOOD library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../dylan/index.html">The dylan Library</a><input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle navigation of The dylan Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../dylan/finalization.html">The finalization Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dylan/primitives.html">The dylan-primitives Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dylan/threads.html">The threads Module</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="index.html">The io Library</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle navigation of The io Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="format.html">The format Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="format-out.html">The format-out Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="print.html">The print and pprint Modules</a></li>
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">The streams Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="standard-io.html">The standard-io Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../network/index.html">The network Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../progress-stream/index.html">The progress-stream Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sql/index.html">The sql Library</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../system/index.html">The system Library</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle navigation of The system Library</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../system/date.html">The date Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system/locators.html">The locators Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system/file-system.html">The file-system Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../system/operating-system.html">The operating-system Module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../t-lists/index.html">The t-lists Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../win32/index.html">The Win32 API Libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../documentation/index.html">All Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle navigation of All Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../news/index.html">News</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../documentation/cheatsheets/index.html">Cheat Sheets</a><input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" role="switch" type="checkbox"/><label for="toctree-checkbox-18"><div class="visually-hidden">Toggle navigation of Cheat Sheets</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../documentation/cheatsheets/syntax.html">Syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../documentation/cheatsheets/conditionals.html">Conditionals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../documentation/cheatsheets/collections.html">Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../documentation/cheatsheets/iteration.html">Iteration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../documentation/cheatsheets/scheme.html">For Schemers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../documentation/publications.html">Publications</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../intro-dylan/index.html">Intro to Dylan</a><input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" role="switch" type="checkbox"/><label for="toctree-checkbox-19"><div class="visually-hidden">Toggle navigation of Intro to Dylan</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/why-dylan.html">Why Dylan?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/expressions-variables.html">Expressions &amp; Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/methods-generic-functions.html">Methods &amp; Generic Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/objects.html">Objects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/multiple-dispatch.html">Multiple Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/modules-libraries.html">Modules &amp; Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/conditions.html">Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../intro-dylan/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../corba-guide/index.html">CORBA Guide</a><input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" role="switch" type="checkbox"/><label for="toctree-checkbox-20"><div class="visually-hidden">Toggle navigation of CORBA Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/intro.html">About Open Dylan CORBA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/getstart.html">Quick Start Tutorial</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/bank-setup.html">Setting up the Bank Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/bank-idl.html">Writing and Compiling IDL</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/bank-client.html">The Bank Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/bank-server.html">The Bank Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/projects.html">Creating CORBA Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/rundebug.html">Running and Debugging CORBA Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/scepter.html">Using the Dylan IDL Compiler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../corba-guide/idl-app.html">An IDL Binding for Dylan</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../building-with-duim/index.html">DUIM Guide</a><input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" role="switch" type="checkbox"/><label for="toctree-checkbox-21"><div class="visually-hidden">Toggle navigation of DUIM Guide</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/intro.html">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/design.html">Designing A Simple DUIM Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/improve.html">Improving The Design</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/menus.html">Adding Menus To The Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/callbacks.html">Adding Callbacks to the Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/commands.html">Using Command Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/tour.html">A Tour of the DUIM Libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/source.html">Source Code For The Task List Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../building-with-duim/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../duim-reference/index.html">DUIM Reference</a><input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" role="switch" type="checkbox"/><label for="toctree-checkbox-22"><div class="visually-hidden">Toggle navigation of DUIM Reference</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/conventions.html">Conventions in this Manual</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/geom.html">DUIM-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/ext-geom.html">DUIM-Extended-Geometry Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/dcs.html">DUIM-DCs Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/sheets.html">DUIM-Sheets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/graphics.html">DUIM-Graphics Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/layouts.html">DUIM-Layouts Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/gadgets.html">DUIM-Gadgets Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/frames.html">DUIM-Frames Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../duim-reference/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../getting-started-ide/index.html">Getting Started / IDE</a><input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" role="switch" type="checkbox"/><label for="toctree-checkbox-23"><div class="visually-hidden">Toggle navigation of Getting Started / IDE</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/preface.html">Preface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/quick-start.html">Quick Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/expanding.html">Fixing Bugs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/model.html">Programming in Open Dylan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/projects.html">Creating and Using Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/browsing.html">Learning More About an Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/debug.html">Debugging and Interactive Development</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/remotedbg.html">Remote Debugging</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/coloring.html">Dispatch Optimization Coloring in the Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/delivery.html">Delivering Dylan Applications</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/editopt.html">The Interactive Editor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/com-projects.html">Creating COM Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started-ide/copyright.html">Copyright</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../release-notes/index.html">Release Notes</a><input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" role="switch" type="checkbox"/><label for="toctree-checkbox-24"><div class="visually-hidden">Toggle navigation of Release Notes</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2024.1.html">Open Dylan 2024.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2023.1.html">Open Dylan 2023.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2022.1.html">Open Dylan 2022.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2020.1.html">Open Dylan 2020.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2019.1.html">Open Dylan 2019.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2014.1.html">Open Dylan 2014.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2013.2.html">Open Dylan 2013.2 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2013.1.html">Open Dylan 2013.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2012.1.html">Open Dylan 2012.1 Release Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release-notes/2011.1.html">Open Dylan 2011.1 Release Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../style-guide/index.html">Style Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Full Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/dylan-lang/website/edit/master/source/library-reference/io/streams.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="the-streams-module">
<h1>The streams Module<a class="headerlink" href="#the-streams-module" title="Permalink to this heading">#</a></h1>
<p>This document describes the Streams module, which allows you to establish
and control input to and output from aggregates of data, such as files
on disk, or sequences. This module, together with the Standard-IO
module, provides similar functionality to the <em>java.io</em> package in Java.
See <a class="reference internal" href="standard-io.html"><span class="doc">The standard-io Module</span></a>, for details about the Standard-IO module in Dylan.</p>
<p><a class="reference internal" href="#concepts">Concepts</a> discusses the basic concepts and terminology involved in streaming
over data.  <a class="reference internal" href="#stream-classes">Stream classes</a> describes the different classes of stream
available, and how to create them, and <a class="reference internal" href="#reading-from-and-writing-to-streams">Reading from and writing to streams</a>
describes how to read from and write to them.</p>
<p>More specialized subjects are covered next: <a class="reference internal" href="#locking-streams">Locking streams</a> discusses
locking streams while they are in use; <a class="reference internal" href="#using-buffered-streams">Using buffered streams</a> describes
using buffered streams; <a class="reference internal" href="#wrapper-streams">Wrapper streams</a> describes wrapper streams;
<a class="reference internal" href="#conditions">Conditions</a> the different stream-specific error conditions that can be
raised. For the most part, you do not have to worry about the information in
these later sections when using streams.</p>
<p>Finally, <a class="reference internal" href="#the-streams-module-reference">The streams Module Reference</a> gives complete details on all
interfaces in the Streams module, in alphabetical order.</p>
<section id="goals-of-this-module">
<h2>Goals of this module<a class="headerlink" href="#goals-of-this-module" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>A generic, easy-to-use interface for streaming over aggregates of data. The
same high-level interface for consuming or producing is available
irrespective of the type of stream, or the types of the elements being
streamed over.</p></li>
<li><p>Efficiency, such that it may be used as a basis for the common cases of file
and network I/O.</p></li>
<li><p>Access to an underlying buffer management protocol.</p></li>
</ul>
</section>
<section id="concepts">
<h2>Concepts<a class="headerlink" href="#concepts" title="Permalink to this heading">#</a></h2>
<p>A <em>stream</em> provides sequential access to an aggregate of data, such as a Dylan
<code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code> or a disk file. Streams grant this access according to a
metaphor of <em>reading</em> and <em>writing</em>: elements can be read from streams or
written to them.</p>
<p>Streams are represented as general instances of the class <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.
It is usual to say that a stream is established <em>over</em> the data
aggregate. Hence, a stream providing access to the string <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code> is
said to be a stream over the string <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code>.</p>
<p>Streams permitting reading operations are called <em>input</em> streams. Input
streams allow elements from the underlying data aggregate to be
consumed. Conversely, streams permitting writing operations are called
<em>output</em> streams. Output streams allow elements to be written to the
underlying data aggregate. Streams permitting both kinds of operations
are called <em>input-output</em> streams.</p>
<section id="input-streams">
<h3>Input Streams<a class="headerlink" href="#input-streams" title="Permalink to this heading">#</a></h3>
<p>The Streams module provides a set of functions for reading elements from
an input stream. These functions hide the details of indexing,
buffering, and so on. For instance, the function <a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a>
reads a single data element from an input stream.</p>
<p>The following expression binds <em>stream</em> to an input stream over the
string <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code>:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p>The first invocation of <a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> on <em>stream</em> returns the
character “h”, the next invocation “e”, and so on. Once a stream has
been used to consume all the elements of the data, the stream is said to
be at its end. This condition can be tested with the function
<a class="reference internal" href="#io:streams:stream-at-end?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-at-end?</span></code></a>. The following code fragment applies <em>my-function</em>
to all elements of the sequence:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="n">seq</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">~stream-at-end?</span><span class="p">(</span><span class="n">stream</span><span class="p">))</span>
<span class="w">  </span><span class="n">my-function</span><span class="p">(</span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
<p>When all elements of a stream have been read, further calls to
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> result in an <a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a> condition being
signaled. Optionally, you may provide a distinguished value to return instead,
with the <code class="docutils literal notranslate"><span class="pre">on-end-of-stream:</span></code> parameter. This is often more concise and most
reading functions support it.</p>
</section>
<section id="output-streams">
<h3>Output Streams<a class="headerlink" href="#output-streams" title="Permalink to this heading">#</a></h3>
<p>The Streams module also provides a set of functions for writing data elements
to an output stream. Like the functions that operate upon input streams, these
functions hide the details of indexing, growing an underlying buffer, and so
on. For instance, the function <a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> writes a single data element
to an output stream.</p>
<p>The following forms bind <em>stream</em> to an output stream over an empty
string and create the string “I see!”, using the function
<a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a> to access all of the stream’s elements.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;I see!&quot;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p>Calling <a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a> on a sequence has the same effect as calling
<a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> on all the elements of the sequence. For more
information about writing to streams, see <a class="reference internal" href="#writing-to-streams">Writing to streams</a>.</p>
</section>
<section id="positionable-streams">
<h3>Positionable Streams<a class="headerlink" href="#positionable-streams" title="Permalink to this heading">#</a></h3>
<p>Some streams are <em>positionable</em>; that is, any element of the stream can
be accessed at any time. Positionable streams allow you to set the
position at which the stream is accessed by the next operation. The
following example uses positioning to return the character “w” from a
stream over the string <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code>:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
<span class="n">stream-position</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p>The following example returns a string. The first ten characters are the
fill characters for the underlying sequence of the stream. The fill
character for <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a> is “ “ (the space character), so in the
example below, the first ten characters are spaces.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">adjust-stream-position</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;whoa!&quot;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p>You can request a sequence containing all of the elements of a
positionable stream by calling <a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a> on it. If the
positionable stream is a <a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a>, then it must be
readable. Otherwise, it must be a sequence stream. The sequence returned
never shares structure with any underlying sequence that might be used
in the future by the stream. For instance, the string returned by
calling <a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a> on an output <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a> will
not be the same string as that being used to represent the string
stream.</p>
<p>When making an input <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>, you can cause the stream
to produce elements from any subsequence of the supplied string. For
example:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">read-to-end</span><span class="p">(</span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;hello there, world&quot;</span><span class="p">,</span>
<span class="w">                 </span><span class="k">start:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">                 </span><span class="k">end:</span><span class="w"> </span><span class="mi">11</span><span class="p">));</span>
</pre></div>
</div>
<p>This example evaluates to <code class="docutils literal notranslate"><span class="pre">&quot;there&quot;</span></code>. The interval (<em>start</em>, <em>end</em>)
includes the index <em>start</em> but excludes the index <em>end</em>. This is
consistent with standard Dylan functions over sequences, such as
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Operations#copy-sequence"><code class="xref drm docutils literal notranslate"><span class="pre">copy-sequence</span></code></a>. The <a class="reference internal" href="#io:streams:read-to-end"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to-end</span></code></a> function is one of a number
of convenient utility functions for operating on streams and returns all
the elements up to the end of the stream from the stream’s current
position.</p>
</section>
</section>
<section id="stream-classes">
<h2>Stream classes<a class="headerlink" href="#stream-classes" title="Permalink to this heading">#</a></h2>
<p>The exported streams class heterarchy includes the classes shown in
the image below. Classes shown in bold are all instantiable.</p>
<figure class="align-center">
<img alt="../../_images/streams.png" src="../../_images/streams.png" />
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a> is included for completeness but is actually
exported from the <a class="reference internal" href="../system/file-system.html"><span class="doc">file-system</span></a> module.</p>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[buffered-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffered-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a></p></li>
</ul>
<section id="sequence-streams">
<h3>Sequence streams<a class="headerlink" href="#sequence-streams" title="Permalink to this heading">#</a></h3>
<p>Dylan provides various functions for manipulating sequences, such as
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Operations#concatenate"><code class="xref drm docutils literal notranslate"><span class="pre">concatenate</span></code></a> and <a class="reference external" href="https://opendylan.org/books/drm/Collection_Operations#copy-sequence"><code class="xref drm docutils literal notranslate"><span class="pre">copy-sequence</span></code></a>, but sometimes it can be useful to
use the streams model to create or consume sequences. For example, if you’re
writing a library that reads bytes from a network socket you might write tests
that use a <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> over a <a class="reference internal" href="#io:streams:[byte-vector]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-vector&gt;</span></code></a> to mock the
network stream.</p>
<p>String streams are the most commonly used type of sequence stream so there are
several features to make using them easier.</p>
<ol class="arabic simple">
<li><p>Calling <code class="docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;,</span> <span class="pre">contents:</span> <span class="pre">&quot;a</span> <span class="pre">string&quot;,</span> <span class="pre">direction:</span> <span class="pre">#&quot;input&quot;)</span></code>
returns a <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#io:streams:with-output-to-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-output-to-string</span></code></a> provides a convenient way to create a string
using multiple calls to <a class="reference internal" href="format.html#io:format:format"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">format</span></code></a>.</p></li>
<li><p><a class="reference internal" href="#io:streams:with-input-from-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-input-from-string</span></code></a> can be used to read the contents of a string.</p></li>
<li><p><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">format-to-string</span></code> is implemented by making an output
<a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>, calling <a class="reference internal" href="format.html#io:format:format"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">format</span></code></a> on it, and then returning the
stream contents.</p></li>
</ol>
<section id="sequence-streams-and-object-identity">
<h4>Sequence streams and object identity<a class="headerlink" href="#sequence-streams-and-object-identity" title="Permalink to this heading">#</a></h4>
<p>When writing to output streams over sequences, Dylan may from time to
time need to grow the underlying sequence that it is using to represent
the stream data.</p>
<p>Consider the example of an output stream instantiated over an empty
string. As soon as a write operation is performed on the stream, it is
necessary to replace the string object used in the representation of the
string stream. As well as incurring the cost of creating a new string,
references to the string within the program after the replacement
operation has occurred will still refer to the <em>original</em> string, and
this may not be what the user intended.</p>
<p>To guarantee that other references to a sequence used in an output
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> will have access to any elements written to the
sequence via the stream, supply a stretchy collection (such as a
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#stretchy-vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;stretchy-vector&gt;</span></code></a>) to <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#make"><code class="xref drm docutils literal notranslate"><span class="pre">make</span></code></a> when creating the stream. A stream
over a stretchy vector will use the same stretchy vector throughout the
stream’s existence.</p>
<p>For example:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;stretchy-vector&gt;</span><span class="p">);</span>
<span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">contents:</span><span class="w"> </span><span class="n">v</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="p">#(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ABC&quot;</span><span class="p">);</span>
<span class="nb">values</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
</pre></div>
</div>
<p>The example returns two values. Each value is the same (<a class="reference external" href="https://opendylan.org/books/drm/Equality_and_Comparison#identity"><code class="xref drm docutils literal notranslate"><span class="pre">==</span></code></a>) stretchy
vector:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="p">#[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;C&#39;</span><span class="p">]</span>
<span class="p">#[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;C&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>If a stretchy vector is not supplied, the result is different:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;vector&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">size:</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">contents:</span><span class="w"> </span><span class="n">v</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="p">#(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ABC&quot;</span><span class="p">);</span>
<span class="nb">values</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
</pre></div>
</div>
<p>This example returns as its first value the original vector, which was
initially filled with all <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> and then with the values from the first call
to <a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a>, but the second value is a new vector that had to be allocated
on the second call to <a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a>:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="p">#[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="l">#f</span><span class="p">,</span><span class="w"> </span><span class="l">#f</span><span class="p">]</span>
<span class="p">#[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;A&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;B&#39;</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;C&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This difference arises because the output stream in the second example does not
use a stretchy vector to hold the stream data. A vector of at least 6 elements
is necessary to accommodate the elements written to the stream, but <code class="docutils literal notranslate"><span class="pre">v</span></code> can
hold only 5. Since the stream cannot change <code class="docutils literal notranslate"><span class="pre">v</span></code>’s size, it must allocate a new
vector each time it grows.</p>
</section>
</section>
<section id="closing-streams">
<h3>Closing streams<a class="headerlink" href="#closing-streams" title="Permalink to this heading">#</a></h3>
<p>It is important to call <a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a> on streams when you have finished with
them. Typically, external streams such as <a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a> and
<code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;console-stream&gt;</span></code> allocate underlying system resources when they are
created, and these resources are not recovered until the stream is closed.</p>
<p>A common way to ensure that <a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a> is called is to use the <code class="docutils literal notranslate"><span class="pre">cleanup</span></code>
clause of the <a class="reference external" href="https://opendylan.org/books/drm/Statement_Macros#block"><code class="xref drm docutils literal notranslate"><span class="pre">block</span></code></a> macro. For example:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">open-my-stream</span><span class="p">(...);</span>
<span class="nb">block</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="p">...</span><span class="n">read</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">stream</span><span class="p">...</span>
<span class="k">cleanup</span>
<span class="w">  </span><span class="n">close</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
<span class="k">end</span>
</pre></div>
</div>
<p>To make this easier, and so you’re less likely to forget to call <a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a>,
most libraries that provide stream classes provide a macro. For example,
<a class="reference internal" href="../system/file-system.html#system:file-system:with-open-file"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-open-file</span></code></a> for file streams, ensures that <a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a> is called:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-open-file</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;/my/file&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">...</span><span class="n">read</span><span class="w"> </span><span class="n">or</span><span class="w"> </span><span class="n">write</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">stream</span><span class="p">...</span>
<span class="w">  </span><span class="c1">// close(stream) is called automatically</span>
<span class="k">end</span>
</pre></div>
</div>
</section>
<section id="with-output-to-string-with-input-from-string-macros">
<h3>with-output-to-string / with-input-from-string macros<a class="headerlink" href="#with-output-to-string-with-input-from-string-macros" title="Permalink to this heading">#</a></h3>
<p>The macro <a class="reference internal" href="#io:streams:with-output-to-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-output-to-string</span></code></a> provides a convenient way of
returning a <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a> after performing a series of operations on a
<a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>, and then close the stream.</p>
<p>Instead of writing this code:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;k&#39;</span><span class="p">);</span>
<span class="n">contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
<p>we can write:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-output-to-string</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;O&#39;</span><span class="p">);</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;k&#39;</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
<p>The symmetric macro <a class="reference internal" href="#io:streams:with-input-from-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-input-from-string</span></code></a> creates a
<a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a> with direction <cite>#”input”</cite>, provides an
opportunity to perform operations and closes the stream.</p>
<p>For instance:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-input-from-string</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Foobar&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">       </span><span class="n">char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">)</span>
<span class="w">       </span><span class="k">then</span><span class="w">   </span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">),</span>
<span class="w">       </span><span class="k">while:</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="w">    </span><span class="n">format-out</span><span class="p">(</span><span class="s">&quot;%d: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>

<span class="c1">// 0: F</span>
<span class="c1">// 1: o</span>
<span class="c1">// 2: o</span>
<span class="c1">// 3: b</span>
<span class="c1">// 4: a</span>
<span class="c1">// 5: r</span>
</pre></div>
</div>
<p>will replace:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;Foobar&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;input&quot;</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">     </span><span class="n">char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">)</span>
<span class="w">     </span><span class="k">then</span><span class="w">   </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">),</span>
<span class="w">     </span><span class="k">while:</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="w">  </span><span class="n">format-out</span><span class="p">(</span><span class="s">&quot;%d: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="k">end</span><span class="p">;</span>
<span class="n">close</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="locking-streams">
<h3>Locking streams<a class="headerlink" href="#locking-streams" title="Permalink to this heading">#</a></h3>
<p>In an application where more than one thread may access a shared stream, it is
important to match the granularity of locking to the transaction model of the
application. Ideally, an application should lock a stream only once per
transaction, to minimize the performance penalty. Since the streams module
cannot know the transaction model of your code, it does not provide any
default locking scheme.</p>
<p>Instead, the streams module provides the user with a single, per-instance slot,
<a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a>, which is inherited by all subclasses of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.
You may provide a lock via the <code class="docutils literal notranslate"><span class="pre">stream-lock:</span></code> init keyword when creating the
stream, or set it with <code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream-setter</span></code>. Thereafter use
<a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a> and <a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a> or the <a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a>
macro, together with other appropriate functions and macros from the
<a class="reference internal" href="../dylan/threads.html"><span class="doc">threads</span></a> module, to implement a locking strategy
appropriate to your application.</p>
<p>The functions in the streams module are not of themselves thread safe, and make
no guarantees about the atomicity of read and write operations.</p>
</section>
</section>
<section id="reading-from-and-writing-to-streams">
<h2>Reading from and writing to streams<a class="headerlink" href="#reading-from-and-writing-to-streams" title="Permalink to this heading">#</a></h2>
<p>This section describes how you can read from or write to a stream. Note that
the result is undefined if you call any of these functions on a buffered stream
while its buffer is held by another thread; see <a class="reference internal" href="#using-buffered-streams">Using buffered streams</a> for
details about buffered streams.</p>
<section id="reading-from-streams">
<h3>Reading from streams<a class="headerlink" href="#reading-from-streams" title="Permalink to this heading">#</a></h3>
<p>The following are the basic functions for reading from streams.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a></p></li>
</ul>
<p>A number of other functions are available for reading from streams. See
<a class="reference internal" href="#io:streams:peek"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">peek</span></code></a>, <a class="reference internal" href="#io:streams:read-into!"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-into!</span></code></a>, <a class="reference internal" href="#io:streams:discard-input"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-input</span></code></a>, and
<a class="reference internal" href="#io:streams:stream-input-available?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-input-available?</span></code></a>.</p>
</section>
<section id="convenience-functions-for-reading-from-streams">
<h3>Convenience functions for reading from streams<a class="headerlink" href="#convenience-functions-for-reading-from-streams" title="Permalink to this heading">#</a></h3>
<p>The following is a small set of reading functions that search for
particular elements in a stream. These functions behave as though they
were implemented in terms of the more primitive functions described in
<a class="reference internal" href="#reading-from-streams">Reading from streams</a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-to"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-to-end"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to-end</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:skip-through"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">skip-through</span></code></a></p></li>
</ul>
</section>
<section id="writing-to-streams">
<h3>Writing to streams<a class="headerlink" href="#writing-to-streams" title="Permalink to this heading">#</a></h3>
<p>This section describes the basic functions for writing to streams.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a></p></li>
</ul>
<p>See <a class="reference internal" href="#io:streams:force-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">force-output</span></code></a>, <a class="reference internal" href="#io:streams:synchronize-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">synchronize-output</span></code></a>, and
<a class="reference internal" href="#io:streams:discard-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-output</span></code></a>.</p>
</section>
<section id="reading-and-writing-by-lines">
<h3>Reading and writing by lines<a class="headerlink" href="#reading-and-writing-by-lines" title="Permalink to this heading">#</a></h3>
<p>The following functions provide line-based input and output operations.</p>
<p>The newline sequence for string streams is a sequence comprising the
single newline character <code class="docutils literal notranslate"><span class="pre">\n</span></code>. For character file streams, the newline
sequence is whatever sequence of characters the underlying platform uses
to represent a newline. For example, on MS-DOS platforms, the sequence
comprises two characters: a carriage return followed by a linefeed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>No other functions in the Streams module do anything to
manage the encoding of newlines; calling <a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> on the
character <code class="docutils literal notranslate"><span class="pre">\n</span></code> does not cause the <code class="docutils literal notranslate"><span class="pre">\n</span></code> character to be written as
the native newline sequence, unless <code class="docutils literal notranslate"><span class="pre">\n</span></code> happens to <em>be</em> the native
newline sequence.</p>
</div>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:new-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">new-line</span></code></a></p></li>
</ul>
<p>See also <a class="reference internal" href="#io:streams:read-line-into!"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line-into!</span></code></a>.</p>
</section>
<section id="querying-streams">
<h3>Querying streams<a class="headerlink" href="#querying-streams" title="Permalink to this heading">#</a></h3>
<p>The following functions can be used to determine various properties of a
stream.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:stream-open?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-open?</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-element-type"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-element-type</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-at-end?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-at-end?</span></code></a></p></li>
</ul>
<p>For output streams, note that you can determine if a stream is one place
past the last written element by comparing <a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a> to
<a class="reference internal" href="#io:streams:stream-size"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-size</span></code></a>.</p>
</section>
<section id="using-file-streams">
<h3>Using file streams<a class="headerlink" href="#using-file-streams" title="Permalink to this heading">#</a></h3>
<p>The following operations can be performed on file streams.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:close([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">close(&lt;file-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-console?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-console?</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:wait-for-io-completion"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">wait-for-io-completion</span></code></a></p></li>
<li><p><a class="reference internal" href="../system/file-system.html#system:file-system:with-open-file"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-open-file</span></code></a></p></li>
</ul>
</section>
</section>
<section id="using-buffered-streams">
<h2>Using buffered streams<a class="headerlink" href="#using-buffered-streams" title="Permalink to this heading">#</a></h2>
<p>The Streams module provides efficient support for general use of
buffered I/O. Most ordinary programmers using the module do not need to
be concerned with buffering in most cases. When using buffered streams,
the buffering is transparent, but programs requiring more control can
access buffering functionality when appropriate. This section describes
the available buffering functionality.</p>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h3>
<p>A buffered stream maintains some sort of buffer. All buffered streams
use the sealed class <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a> for their buffers. You can
suggest a buffer size when creating buffered streams, but normally you
do not need to do so, because a buffer size that is appropriate for the
stream’s source or destination is chosen for you.</p>
<p>Instances of the class <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a> also contain some state
information. This state information includes an index where reading or
writing should begin, and an index that is the end of input to be read,
or the end of space available for writing.</p>
<p>Buffered streams also maintain a <em>held</em> state, indicating whether the
application has taken the buffer for a stream and has not released it yet. When
a thread already holds the buffer for a stream, any attempt to get the buffer
again (or any other buffer for the same stream) has undefined results.</p>
</section>
<section id="useful-types-when-using-buffers">
<h3>Useful types when using buffers<a class="headerlink" href="#useful-types-when-using-buffers" title="Permalink to this heading">#</a></h3>
<p>The following types are used in operations that involve buffers.</p>
<dl class="simple">
<dt><a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a></dt><dd><p>A type representing limited integers in the range 0 to 255 inclusive.</p>
</dd>
<dt><a class="reference internal" href="#io:streams:[byte-character]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte-character&gt;</span></code></a></dt><dd><p>A type representing 8-bit characters that instances of
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a> can contain.</p>
</dd>
<dt><a class="reference internal" href="#io:streams:[unicode-character]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;unicode-character&gt;</span></code></a></dt><dd><p>A type representing Unicode characters that instances of
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a> can contain.</p>
</dd>
<dt><a class="reference internal" href="#io:streams:[byte-vector]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte-vector&gt;</span></code></a></dt><dd><p>A subtype of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a> whose element-type is <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>.</p>
</dd>
</dl>
</section>
</section>
<section id="wrapper-streams">
<h2>Wrapper streams<a class="headerlink" href="#wrapper-streams" title="Permalink to this heading">#</a></h2>
<p>Sometimes stream data requires conversion before an application can use it: you
might have a stream over a file of UTF-8 bytes which you would prefer to handle
as UTF-32 equivalents, or you might need to encrypt or decrypt file data.</p>
<p>Wrapper streams provide a mechanism for working with streams which
require such conversion. Wrapper streams hold on to an underlying
stream, delegating to it most streams operations. The wrapper stream
carries out appropriate processing in its own implementations of the
streaming protocol.</p>
<p>The Streams module includes a base class called
<a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> upon which other wrapping streams can be
implemented.</p>
<p>A subclass of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> can “pass on” functions such as
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> and <a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> by simply delegating these
operations to the inner stream, as shown below:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read-element</span>
<span class="w">    </span><span class="p">(</span><span class="n">ws</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">element</span><span class="p">)</span>
<span class="w">  </span><span class="n">read-element</span><span class="p">(</span><span class="n">ws</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">write-element</span>
<span class="w">    </span><span class="p">(</span><span class="n">ws</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="nb">element</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">ws</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="nb">element</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
<p>Assuming that <code class="docutils literal notranslate"><span class="pre">&lt;io-wrapper-stream&gt;</span></code> delegates all other operations to
its inner stream, the following would suffice to implement a 16-bit
Unicode character stream wrapping an 8-bit character stream.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">)</span><span class="w"> </span><span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read-element</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">ch</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-character&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">first-char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span>
<span class="w">                                </span><span class="n">on-end-of-stream</span><span class="p">);</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">second-char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w">  </span><span class="n">convert-byte-pair-to-unicode</span><span class="p">(</span><span class="n">first-char</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">write-element</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="n">c</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;character&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="p">(</span><span class="n">first-char</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">convert-unicode-to-byte-pair</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="n">first-char</span><span class="p">);</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span>
<span class="w">  </span><span class="n">c</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">stream-position</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">;</span>
<span class="w">  </span><span class="nb">truncate/</span><span class="p">(</span><span class="n">stream-position</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">stream-position-setter</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">);</span>
<span class="w">  </span><span class="n">stream-position</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
<section id="wrapper-streams-and-delegation">
<h3>Wrapper streams and delegation<a class="headerlink" href="#wrapper-streams-and-delegation" title="Permalink to this heading">#</a></h3>
<p>One problem with wrapper streams is the need for a wrapper stream to
intercept methods invoked by its inner stream. For example, consider two
hypothetical streams, <code class="docutils literal notranslate"><span class="pre">&lt;interactive-stream&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;dialog-stream&gt;</span></code>,
the latter a subclass of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>. Both of these
classes have a method called <em>prompt</em>. The <code class="docutils literal notranslate"><span class="pre">&lt;interactive-stream&gt;</span></code>
class specializes <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a> thus:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;interactive-stream&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">);</span>
<span class="w">  </span><span class="n">prompt</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
<span class="w">  </span><span class="nb">next-method</span><span class="p">()</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
<p>If a <code class="docutils literal notranslate"><span class="pre">&lt;dialog-stream&gt;</span></code> is used to wrap an <code class="docutils literal notranslate"><span class="pre">&lt;interactive-stream&gt;</span></code> then
an invocation of <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">&lt;dialog-stream&gt;</span></code> will call <code class="docutils literal notranslate"><span class="pre">prompt</span></code> on
the inner <code class="docutils literal notranslate"><span class="pre">&lt;interactive-stream&gt;</span></code>, not on the <code class="docutils literal notranslate"><span class="pre">&lt;dialog-stream&gt;</span></code>, as desired.
The problem is that the <code class="docutils literal notranslate"><span class="pre">&lt;dialog-stream&gt;</span></code> delegates some tasks to its inner
stream, but handles some other tasks itself.</p>
<p>Delegation by inner-streams to outer-streams is implemented by the use
of the <a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> function. The <a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> function is used
instead of the stream itself whenever a stream invokes one of its
other protocol methods.</p>
<p>A correct implementation of the <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a> method in the example above
would be as follows:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;interactive-stream&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">n</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w">  </span><span class="n">prompt</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">outer-stream</span><span class="p">);</span>
<span class="w">  </span><span class="nb">next-method</span><span class="p">()</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
<p>The <em>initialize</em> method on <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> is defined to set the
<a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> slot to be the stream itself. The <em>initialize</em> method
on <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> is specialized to set the
<a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> slot to be the “parent” stream:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="nb">initialize</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;wrapper-stream&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="k">#key</span><span class="w"> </span><span class="n">on</span><span class="p">,</span><span class="w"> </span><span class="k">#rest</span><span class="w"> </span><span class="n">all-keys</span><span class="p">);</span>
<span class="w">  </span><span class="n">an-inner-stream</span><span class="p">.</span><span class="n">outer-stream</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">stream</span><span class="p">;</span>
<span class="w">  </span><span class="nb">next-method</span><span class="p">()</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="conditions">
<h2>Conditions<a class="headerlink" href="#conditions" title="Permalink to this heading">#</a></h2>
<p>The following classes are available for error conditions on streams.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
</ul>
<p>There is no recovery protocol defined for any of these errors. Every
condition that takes an init-keyword has a slot accessor for the value
supplied. The name of this accessor function takes the form <em>class</em> <em>-</em>
<em>key</em>, where <em>class</em> is the name of the condition class (without the
angle brackets) and <em>key</em> is the name of the init-keyword. For example,
the accessor function for the <code class="docutils literal notranslate"><span class="pre">locator:</span></code> init-keyword for
<a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a> is <a class="reference internal" href="#io:streams:file-error-locator"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">file-error-locator</span></code></a>.</p>
<p>For more information, please refer to the reference entry for the
individual conditions.</p>
</section>
<section id="indenting-streams">
<h2>Indenting streams<a class="headerlink" href="#indenting-streams" title="Permalink to this heading">#</a></h2>
<p>The Streams module provides an <a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a> which supports
managing indentation when printing text to a stream. Indenting streams
are implemented as wrapper streams, so the destination stream must be
provided at instantiation.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;indenting-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">inner-stream:</span><span class="w"> </span><span class="vg">*standard-output*</span><span class="p">);</span>
<span class="n">with-indentation</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="c1">// Write normally to the indenting stream.</span>
<span class="w">  </span><span class="n">format</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello %=!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="n">with-indentation</span><span class="p">;</span>
</pre></div>
</div>
<p>Indenting streams analyze everything written to them so that indentation
can be maintained, without having to call <a class="reference internal" href="#io:streams:new-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">new-line</span></code></a> directly.</p>
<section id="using-indenting-streams">
<h3>Using indenting streams<a class="headerlink" href="#using-indenting-streams" title="Permalink to this heading">#</a></h3>
<p>All operations available to <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> are available, as
well as:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:indent"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">indent</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-indentation"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-indentation</span></code></a></p></li>
</ul>
</section>
</section>
<section id="streams-protocols">
<h2>Streams protocols<a class="headerlink" href="#streams-protocols" title="Permalink to this heading">#</a></h2>
<p>This section describes the protocols for different classes of stream.</p>
<section id="positionable-stream-protocol">
<h3>Positionable stream protocol<a class="headerlink" href="#positionable-stream-protocol" title="Permalink to this heading">#</a></h3>
<p>This section describes the protocol for positionable streams.</p>
<p>A stream position can be thought of as a natural number that indicates
how many elements into the stream the stream’s current location is.
However, it is not always the case that a single integer contains enough
information to reposition a stream. Consider the case of an
“uncompressing” file stream that requires additional state beyond simply
the file position to be able to get the next input character from the
compressed file.</p>
<p>The Streams module addresses this problem by introducing the class
<a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a>, which is subclassed by various kinds of
stream implementations that need to maintain additional state. A stream
can be repositioned as efficiently as possible when
<a class="reference internal" href="#io:streams:stream-position-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position-setter</span></code></a> is given a value previously returned by
<a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a> on that stream.</p>
<p>It is also legal to set the position of a stream to an integer position.
However, for some types of streams, to do so might be slow, perhaps
requiring the entire contents of the stream up to that point to be read.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[position-type]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;position-type&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-position-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:adjust-stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">adjust-stream-position</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:as([integer],[stream-position])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">as(&lt;integer&gt;,</span> <span class="pre">&lt;stream-position&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-size"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-size</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unread-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unread-element</span></code></a></p></li>
</ul>
</section>
<section id="wrapper-stream-protocol">
<h3>Wrapper stream protocol<a class="headerlink" href="#wrapper-stream-protocol" title="Permalink to this heading">#</a></h3>
<p>This section describes the protocol for implementing wrapper streams.
For information on using wrapper streams, see <a class="reference internal" href="#wrapper-streams">Wrapper streams</a>.</p>
<ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:inner-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:inner-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream-setter</span></code></a></p></li>
</ul>
</section>
</section>
<section id="the-streams-module-reference">
<h2>The streams Module Reference<a class="headerlink" href="#the-streams-module-reference" title="Permalink to this heading">#</a></h2>
<p>This section includes complete reference entries for all interfaces that
are exported from the <em>streams</em> module.</p>
<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:adjust-stream-position">
<span class="sig-name descname"><span class="pre">adjust-stream-position</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:adjust-stream-position" title="Permalink to this definition">#</a></dt>
<dd><p>Moves the position of a positionable stream by a specified amount.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>adjust-stream-position <em>positionable-stream</em> <em>delta</em> #key <em>from</em> =&gt; <em>new-position</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
<li><p><strong>delta</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
<li><p><strong>from</strong> (<em>#key</em>) – One of <code class="docutils literal notranslate"><span class="pre">#&quot;current&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;start&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;end&quot;</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;current&quot;</span></code>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new-position</strong> – An instance of <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Moves the position of <em>positionable-stream</em> to be offset <em>delta</em>
elements from the position indicated by <em>from</em>. The new position is
returned.</p>
<p>When <em>from</em> is <code class="docutils literal notranslate"><span class="pre">#&quot;start&quot;</span></code>, the stream is positioned relative to
the beginning of the stream. When <em>from</em> is <code class="docutils literal notranslate"><span class="pre">#&quot;end&quot;</span></code>, the stream
is positioned relative to its end. When <em>from</em> is <code class="docutils literal notranslate"><span class="pre">#&quot;current&quot;</span></code>,
the current position is used.</p>
<p>Using <em>adjust-stream-position</em> to set the position of a stream to
be beyond its current last element causes the underlying aggregate
to be grown to a new size. When extending the underlying aggregate
for a stream, the contents of the unwritten elements are the fill
character for the underlying sequence.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following example returns a string, the first ten characters of
which are the space character, which is the fill character for the
sequence <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">adjust-stream-position</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;whoa!&quot;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:stream-position-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position-setter</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:as([integer],[stream-position])">
<span class="sig-name descname"><span class="pre">as(&lt;integer&gt;,</span> <span class="pre">&lt;stream-position&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:as([integer],[stream-position])" title="Permalink to this definition">#</a></dt>
<dd><p>Coerces a <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a> to an integer.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>as <em>integer-class</em> <em>stream-position</em> =&gt; <em>integer</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>integer-class</strong> – The class <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
<li><p><strong>stream-position</strong> – An instance of <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>integer</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Coerces a <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a> to an integer. The <em>integer-class</em>
argument is the class <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference external" href="https://opendylan.org/books/drm/Coercing_and_Copying_Objects#as"><code class="xref drm docutils literal notranslate"><span class="pre">as</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[buffer]">
<span class="sig-name descname"><span class="pre">&lt;buffer&gt;</span></span> <em class="property"><span class="pre">Instantiable</span> <span class="pre">Sealed</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[buffer]" title="Permalink to this definition">#</a></dt>
<dd><p>A subclass of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a> whose <em>element-type</em> is <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>size</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a> specifying the size of
the buffer. Default value: 0.</p></li>
<li><p><strong>next</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. For an input buffer,
this is where the next input byte can be found. For an output buffer,
this is where the next output byte should be written to. Default
value: 0.</p></li>
<li><p><strong>end</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. The value of this is one
more than the last valid index in a buffer. For an input buffer, this
represents the number of bytes read.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>A subclass of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a> whose <em>element-type</em> is <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>.</p>
<p>Instances of <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a> contain a data vector and two indices:
the inclusive start and the exclusive end of valid data in the
buffer. The accessors for these indexes are called <code class="docutils literal notranslate"><span class="pre">buffer-next</span></code>
and <code class="docutils literal notranslate"><span class="pre">buffer-end</span></code>.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">size:</span></code> is not taken as a suggestion of the size the user
would like, as with the value passed with <code class="docutils literal notranslate"><span class="pre">buffer-size:</span></code> to <a class="reference external" href="https://opendylan.org/books/drm/Constructing_and_Initializing_Instances#make"><code class="xref drm docutils literal notranslate"><span class="pre">make</span></code></a>
on <a class="reference internal" href="#io:streams:[buffered-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffered-stream&gt;</span></code></a>; if you supply a value with the <code class="docutils literal notranslate"><span class="pre">size:</span></code>
init-keyword, that size is allocated, or, if that is not possible, an
error is signalled, as when making any vector.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[buffered-stream]">
<span class="sig-name descname"><span class="pre">&lt;buffered-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Abstract</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[buffered-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>A subclass of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> supporting the Stream Extension and
Buffer Access protocols.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>buffer-size</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This is the size
of the buffer in bytes.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>A subclass of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> supporting the Stream Extension
Protocol and the Buffer Access Protocol. It is not instantiable.</p>
<p>Streams of this class support the <code class="docutils literal notranslate"><span class="pre">buffer-size:</span></code> init-keyword,
which can be used to suggest the size of the stream’s buffer.
However, the instantiated stream might not use this value: it is
taken purely as a suggested value. For example, a stream that uses
a specific device’s hardware buffer might use a fixed buffer size
regardless of the value passed with the <code class="docutils literal notranslate"><span class="pre">buffer-size:</span></code>
init-keyword.</p>
<p>In general, it should not be necessary to supply a value for the
<code class="docutils literal notranslate"><span class="pre">buffer-size:</span></code> init-keyword.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan type">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[byte]">
<span class="sig-name descname"><span class="pre">&lt;byte&gt;</span></span> <em class="property"><span class="pre">Type</span></em><a class="headerlink" href="#io:streams:[byte]" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing limited integers in the range 0 to 255 inclusive.</p>
</dd>
<dt class="field-even">Supertypes<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a></p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing limited integers in the range 0 to 255 inclusive.</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:type-for-file-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-file-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan type">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[byte-character]">
<span class="sig-name descname"><span class="pre">&lt;byte-character&gt;</span></span> <em class="property"><span class="pre">Type</span></em><a class="headerlink" href="#io:streams:[byte-character]" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing 8-bit characters that instances of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a> can contain.</p>
</dd>
<dt class="field-even">Supertypes<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#character"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code></a></p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing 8-bit characters that instances of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a>
can contain.</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:type-for-file-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-file-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:byte-storage-address([buffer])">
<span class="sig-name descname"><span class="pre">byte-storage-address(&lt;buffer&gt;)</span></span> <em class="property"><span class="pre">Sealed</span> <span class="pre">Method</span></em><a class="headerlink" href="#io:streams:byte-storage-address([buffer])" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the address of the raw byte storage of a <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="../common-dylan/byte-vector.html#common-dylan:byte-vector:byte-storage-address"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">byte-storage-address</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:byte-storage-offset-address([buffer])">
<span class="sig-name descname"><span class="pre">byte-storage-offset-address(&lt;buffer&gt;)</span></span> <em class="property"><span class="pre">Sealed</span> <span class="pre">Method</span></em><a class="headerlink" href="#io:streams:byte-storage-offset-address([buffer])" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the address of the raw byte storage of a <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a>, with an offset.</p>
<dl class="field-list simple">
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="../common-dylan/byte-vector.html#common-dylan:byte-vector:byte-storage-offset-address"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">byte-storage-offset-address</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[byte-string-stream]">
<span class="sig-name descname"><span class="pre">&lt;byte-string-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Instantiable</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[byte-string-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of streams over byte strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>contents</strong> – A general instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> – Specifies the direction of the stream. It must
be one of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>.
Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
start position of the sequence to be streamed over. Only valid when
<code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default value: 0.</p></li>
<li><p><strong>end</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
sequence position immediately after the portion of the sequence to
stream over. Only valid when <code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default
value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class of streams over byte strings. It is a subclass of
<a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>.</p>
<p>The class supports the same init-keywords as
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">contents:</span></code> init-keyword is used as the input for an input
stream, and as the initial storage for an output stream.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">start:</span></code> and <code class="docutils literal notranslate"><span class="pre">end:</span></code> init-keywords specify the portion of the
byte string to create the stream over: <code class="docutils literal notranslate"><span class="pre">start:</span></code> is inclusive and
<code class="docutils literal notranslate"><span class="pre">end:</span></code> is exclusive. The default is to stream over the entire byte
string.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([byte-string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;byte-string-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([byte-string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;byte-string-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[byte-vector]">
<span class="sig-name descname"><span class="pre">&lt;byte-vector&gt;</span></span> <em class="property"><span class="pre">Sealed</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[byte-vector]" title="Permalink to this definition">#</a></dt>
<dd><p>A subtype of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a> whose element-type is <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a></p>
</dd>
<dt class="field-even">Keyword<span class="colon">:</span></dt>
<dd class="field-even"><p>See Superclasses.</p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A subclass of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#vector"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;vector&gt;</span></code></a> whose element-type is <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>.</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:close">
<span class="sig-name descname"><span class="pre">close</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:close" title="Permalink to this definition">#</a></dt>
<dd><p>Closes a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>close <em>stream</em> #key #all-keys =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Closes <em>stream</em>, an instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:close([file-stream])">
<span class="sig-name descname"><span class="pre">close(&lt;file-stream&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:close([file-stream])" title="Permalink to this definition">#</a></dt>
<dd><p>Closes a file stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>close <em>file-stream</em> #key <em>abort?</em> <em>wait?</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>file-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a>.</p></li>
<li><p><strong>abort?</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
<li><p><strong>wait?</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Closes a file stream. This method frees whatever it can of any
underlying system resources held on behalf of the stream.</p>
<p>If <em>abort</em> is false, any pending data is forced out and
synchronized with the file’s destination. If <em>abort</em> is true, then
any errors caused by closing the file are ignored.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:discard-input">
<span class="sig-name descname"><span class="pre">discard-input</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:discard-input" title="Permalink to this definition">#</a></dt>
<dd><p>Discards input from an input stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>discard-input <em>input-stream</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Discards any pending input from <em>input-stream</em>, both buffered input
and, if possible, any input that might be at the stream’s source.</p>
<p>This operation is principally useful for “interactive” streams,
such as TTY streams, to discard unwanted input after an error
condition arises. There is a default method on <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> so
that applications can call this function on any kind of stream. The
default method does nothing.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:discard-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-output</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:discard-output">
<span class="sig-name descname"><span class="pre">discard-output</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:discard-output" title="Permalink to this definition">#</a></dt>
<dd><p>Discards output to an output stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>discard-output <em>output-stream</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Attempts to abort any pending output for <em>output-stream</em>.</p>
<p>A default method on <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> is defined, so that
applications can call this function on any sort of stream. The
default method does nothing.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:discard-input"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-input</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[end-of-stream-error]">
<span class="sig-name descname"><span class="pre">&lt;end-of-stream-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[end-of-stream-error]" title="Permalink to this definition">#</a></dt>
<dd><p>Error type signaled on reaching the end of an input stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#error"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Signalled when one of the read functions reaches the end of an
input stream. It is a subclass of <a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#error"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;error&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">stream:</span></code> init-keyword has the value of the stream that caused the
error to be signaled. Its accessor is <code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-error-stream</span></code>.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[file-does-not-exist-error]">
<span class="sig-name descname"><span class="pre">&lt;file-does-not-exist-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[file-does-not-exist-error]" title="Permalink to this definition">#</a></dt>
<dd><p>Error type signaled when attempting to read a file that does not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Keyword<span class="colon">:</span></dt>
<dd class="field-even"><p>See Superclasses.</p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Signaled when an input file stream creation function tries to read
a file that does not exist. It is a subclass of
<a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a>.</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:file-error-locator"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">file-error-locator</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[file-error]">
<span class="sig-name descname"><span class="pre">&lt;file-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[file-error]" title="Permalink to this definition">#</a></dt>
<dd><p>The base class for all errors related to file I/O.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#error"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>locator</strong> – An instance of <a class="reference internal" href="../system/locators.html#system:locators:[locator]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;locator&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The base class for all errors related to file I/O. It is a subclass
of <a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#error"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;error&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">locator:</span></code> init-keyword indicates the locator of the file that caused
the error to be signalled. Its accessor is <a class="reference internal" href="#io:streams:file-error-locator"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">file-error-locator</span></code></a>.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:file-error-locator"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">file-error-locator</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:file-error-locator">
<span class="sig-name descname"><span class="pre">file-error-locator</span></span> <em class="property"><span class="pre">Sealed</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:file-error-locator" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the <a class="reference internal" href="../system/locators.html#system:locators:[file-locator]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-locator&gt;</span></code></a> of the file associated with a
<a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>file-error-locator <em>error</em> =&gt; <em>locator</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>error</strong> – An instance of <a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>locator</strong> – An instance of <a class="reference internal" href="../system/locators.html#system:locators:[file-locator]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-locator&gt;</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[file-exists-error]">
<span class="sig-name descname"><span class="pre">&lt;file-exists-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[file-exists-error]" title="Permalink to this definition">#</a></dt>
<dd><p>Error type signaled when trying to create a file that already exists.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Keyword<span class="colon">:</span></dt>
<dd class="field-even"><p>See Superclasses.</p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Signalled when an output file stream creation function tries to
create a file that already exists. It is a subclass of
<a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a>.</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:file-error-locator"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">file-error-locator</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[file-stream]">
<span class="sig-name descname"><span class="pre">&lt;file-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Abstract</span> <span class="pre">Instantiable</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[file-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of single-buffered streams over disk files.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[buffered-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffered-stream&gt;</span></code></a>, <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>locator</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a> or <a class="reference internal" href="../system/locators.html#system:locators:[locator]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;locator&gt;</span></code></a>. This
specifies the file over which to stream.</p></li>
<li><p><strong>direction</strong> – Specifies the direction of the stream. It must be one of
<code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. Default value:
<code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>if-exists</strong> – One of <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>, <code class="docutils literal notranslate"><span class="pre">#&quot;new-version&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">#&quot;overwrite&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;replace&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;append&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;truncate&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">#&quot;signal&quot;</span></code>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
<li><p><strong>if-does-not-exist</strong> – One of <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>, <code class="docutils literal notranslate"><span class="pre">#&quot;signal&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;create&quot;</span></code>. Default value: depends on the value of <code class="docutils literal notranslate"><span class="pre">direction:</span></code>.</p></li>
<li><p><strong>asynchronous?</strong> – If <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a>, all writes on this stream are
performed asynchronously. Default value:<a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class of single-buffered streams over disk files. It is a
subclass of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a> and
<a class="reference internal" href="#io:streams:[buffered-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffered-stream&gt;</span></code></a>.</p>
<p>When you instantiate this class, an indirect instance of it is
created. The file being streamed over is opened immediately upon
creating the stream.</p>
<p>The class supports several init-keywords: <code class="docutils literal notranslate"><span class="pre">locator:</span></code>, <code class="docutils literal notranslate"><span class="pre">direction:</span></code>,
<code class="docutils literal notranslate"><span class="pre">if-exists:</span></code>, and <code class="docutils literal notranslate"><span class="pre">if-does-not-exist:</span></code>.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:close([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">close(&lt;file-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="../system/file-system.html#system:file-system:make([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;file-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="../system/file-system.html#system:file-system:make([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;file-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:force-output">
<span class="sig-name descname"><span class="pre">force-output</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:force-output" title="Permalink to this definition">#</a></dt>
<dd><p>Forces pending output from an output stream buffer to its destination.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>force-output <em>output-stream</em> #key <em>synchronize?</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>synchronize?</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Forces any pending output from <em>output-stream</em> ‘s buffers to its
destination. Even if the stream is asynchronous, this call waits
for all writes to complete. If <em>synchronize?</em> is true, also flushes
the operating system’s write cache for the file so that all data is
physically written to disk. This should only be needed if you’re
concerned about system failure causing loss of data.</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:synchronize-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">synchronize-output</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[incomplete-read-error]">
<span class="sig-name descname"><span class="pre">&lt;incomplete-read-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[incomplete-read-error]" title="Permalink to this definition">#</a></dt>
<dd><p>Error type signaled on encountering the end of a stream before
reading the required number of elements.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
<li><p><strong>count</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>This error is signaled when input functions are reading a required
number of elements, but the end of the stream is read before
completing the required read.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">sequence:</span></code> init-keyword contains the input that was read
before reaching the end of the stream. Its accessor is
<code class="docutils literal notranslate"><span class="pre">incomplete-read-error-sequence</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">count:</span></code> init-keyword contains the number of elements that were
requested to be read. Its accessor is
<code class="docutils literal notranslate"><span class="pre">incomplete-read-error-count</span></code>.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[invalid-file-permissions-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[indenting-stream]">
<span class="sig-name descname"><span class="pre">&lt;indenting-stream&gt;</span></span> <em class="property"><span class="pre">Instantiable</span> <span class="pre">Sealed</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[indenting-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>A wrapper stream which outputs indented text.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>inner-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>. Inherited from
<a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
<li><p><strong>indentation</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.
Default value is <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><strong>input-tab-width</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.
Default value is <code class="docutils literal notranslate"><span class="pre">8</span></code>.</p></li>
<li><p><strong>output-tab-width</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> or <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.
Default value is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>A wrapper stream which outputs indented text.</p>
<p>The initial indentation is controlled by <code class="docutils literal notranslate"><span class="pre">indentation:</span></code>.</p>
<p>When <code class="docutils literal notranslate"><span class="pre">output-tab-width:</span></code> is not false, then the indenting stream
converts sequences of spaces used for indentation to tabs.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:indent"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">indent</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-indentation"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-indentation</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:indent">
<span class="sig-name descname"><span class="pre">indent</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:indent" title="Permalink to this definition">#</a></dt>
<dd><p>Alters the indentation level of an <a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a>.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>indent <em>stream</em> <em>delta</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a>.</p></li>
<li><p><strong>delta</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;indenting-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">inner-stream:</span><span class="w"> </span><span class="vg">*standard-output*</span><span class="p">);</span>
<span class="n">indent</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="n">format</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, %=</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="n">indent</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="mi">-4</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-indentation"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-indentation</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:inner-stream">
<span class="sig-name descname"><span class="pre">inner-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:inner-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the stream being wrapped.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>inner-stream <em>wrapper-stream</em> =&gt; <em>wrapped-stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>wrapper-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wrapped-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the stream wrapped by <em>wrapper-stream</em>.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:inner-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:inner-stream-setter">
<span class="sig-name descname"><span class="pre">inner-stream-setter</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:inner-stream-setter" title="Permalink to this definition">#</a></dt>
<dd><p>Wraps a stream with a wrapper stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>inner-stream-setter <em>stream</em> <em>wrapper-stream</em> =&gt; <em>stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>wrapper-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Wraps <em>stream</em> with <em>wrapper-stream</em>. It does so by setting the
<a class="reference internal" href="#io:streams:inner-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream</span></code></a> slot of <em>wrapper-stream</em> to <em>stream</em>, and the
<a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> slot of <em>stream</em> to <em>wrapper-stream</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Applications should not set <code class="docutils literal notranslate"><span class="pre">inner-stream</span></code> and
<code class="docutils literal notranslate"><span class="pre">outer-stream</span></code> slots directly. The <code class="docutils literal notranslate"><span class="pre">inner-stream-setter</span></code>
function is for use only when implementing stream classes.</p>
</div>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:inner-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream-setter</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[invalid-file-permissions-error]">
<span class="sig-name descname"><span class="pre">&lt;invalid-file-permissions-error&gt;</span></span> <em class="property"><span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[invalid-file-permissions-error]" title="Permalink to this definition">#</a></dt>
<dd><p>Error type signalled when accessing a file in a way that conflicts
with the permissions of the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p>
</dd>
<dt class="field-even">Keyword<span class="colon">:</span></dt>
<dd class="field-even"><p>See Superclasses.</p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Signalled when one of the file stream creation functions tries to access
a file in a manner for which the user does not have permission. It is a
subclass of <a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a>.</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-does-not-exist-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-does-not-exist-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[file-exists-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-exists-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:lock-stream">
<span class="sig-name descname"><span class="pre">lock-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:lock-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Locks a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>lock-stream <em>stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Locks a stream. It is suggested that <a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a>
be used instead of direct usages of <a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a> and
<a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a>.</p>
<p>See <a class="reference internal" href="#locking-streams">Locking streams</a> for more detail and discussion on using
streams from multiple threads.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:make([byte-string-stream])">
<span class="sig-name descname"><span class="pre">make(&lt;byte-string-stream&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:make([byte-string-stream])" title="Permalink to this definition">#</a></dt>
<dd><p>Creates and opens a stream over a byte string.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>make <em>byte-string-stream-class</em> #key <em>contents</em> <em>direction</em> <em>start</em> <em>end</em> =&gt; <em>byte-string-stream-instance</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>byte-string-stream-class</strong> – The class <a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a>.</p></li>
<li><p><strong>contents</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> (<em>#key</em>) – One of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>byte-string-stream-instance</strong> – An instance of <a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Creates and opens a stream over a byte string.</p>
<p>This method returns an instance of <a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a>.
If supplied, <em>contents</em> describes the contents of the stream. The
<em>direction</em>, <em>start</em>, and <em>end</em> init-keywords are as for
<a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make</span></code></a> on
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;byte-string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:make([sequence-stream])">
<span class="sig-name descname"><span class="pre">make(&lt;sequence-stream&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:make([sequence-stream])" title="Permalink to this definition">#</a></dt>
<dd><p>Creates and opens a stream over a sequence.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>make <em>sequence-stream-class</em> #key <em>contents</em> <em>direction</em> <em>start</em> <em>end</em> =&gt; <em>sequence-stream-instance</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>sequence-stream-class</strong> – The class <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p></li>
<li><p><strong>contents</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> (<em>#key</em>) – One of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence-stream-instance</strong> – An instance of <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Creates and opens a stream over a sequence.</p>
<p>This method returns a general instance of
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>. To determine the concrete subclass to
be instantiated, this method calls the generic function
<a class="reference internal" href="#io:streams:type-for-sequence-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-sequence-stream</span></code></a>.</p>
<p>The <em>contents</em> init-keyword is a general instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>
which is used as the input for input streams, and as the initial
storage for an output stream. If <em>contents</em> is a stretchy vector,
then it is the only storage used by the stream.</p>
<p>The <em>direction</em> init-keyword specifies the direction of the stream.</p>
<p>The <em>start</em> and <em>end</em> init-keywords are only valid when <em>direction</em>
is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. They specify the portion of the sequence to create
the stream over: <em>start</em> is inclusive and <em>end</em> is exclusive. The
default is to stream over the entire sequence.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">sv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;stretchy-vector&gt;</span><span class="p">);</span>
<span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">contents:</span><span class="w"> </span><span class="n">sv</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,#(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="mi">9</span><span class="p">));</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="s">&quot;ABCDEF&quot;</span><span class="p">);</span>
<span class="nb">values</span><span class="p">(</span><span class="n">sv</span><span class="p">,</span><span class="w"> </span><span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:type-for-sequence-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-sequence-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:make([string-stream])">
<span class="sig-name descname"><span class="pre">make(&lt;string-stream&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:make([string-stream])" title="Permalink to this definition">#</a></dt>
<dd><p>Creates and opens a stream over a string.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>make <em>string-stream-class</em> #key <em>contents</em> <em>direction</em> <em>start</em> <em>end</em> =&gt; <em>string-stream-instance</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>string-stream-class</strong> – The class <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>.</p></li>
<li><p><strong>contents</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> (<em>#key</em>) – One of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string-stream-instance</strong> – An instance of <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Creates and opens a stream over a string.</p>
<p>This method returns an instance of <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>. If
supplied, <em>contents</em> describes the contents of the stream. The
<em>direction</em>, <em>start</em>, and <em>end</em> init-keywords are as for
<a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make</span></code></a> on
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;here is a sequence&quot;</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan method">
<dt class="sig sig-object dylan-api dylan" id="io:streams:make([unicode-string-stream])">
<span class="sig-name descname"><span class="pre">make(&lt;unicode-string-stream&gt;)</span></span> <em class="property"><span class="pre">Method</span></em><a class="headerlink" href="#io:streams:make([unicode-string-stream])" title="Permalink to this definition">#</a></dt>
<dd><p>Creates and opens a stream over a Unicode string.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>make <em>unicode-string-stream-class</em> #key <em>contents</em> <em>direction</em> <em>start</em> <em>end</em> =&gt; <em>unicode-string-stream-instance</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>unicode-string-stream-class</strong> – The class <a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a>.</p></li>
<li><p><strong>contents</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> (<em>#key</em>) – One of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>unicode-string-stream-instance</strong> – An instance of <a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Creates and opens a stream over a Unicode string.</p>
<p>This method returns a new instance of
<a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a>. If supplied, <em>contents</em> describes
the contents of the stream, and must be an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a>. The <em>direction</em>, <em>start</em>, and <em>end</em>
init-keywords are as for <a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make</span></code></a> on
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:new-line">
<span class="sig-name descname"><span class="pre">new-line</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:new-line" title="Permalink to this definition">#</a></dt>
<dd><p>Writes a newline sequence to an output stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>new-line <em>output-stream</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Writes a newline sequence to <em>output-stream</em>.</p>
<p>A method for <code class="docutils literal notranslate"><span class="pre">new-line</span></code> is defined on <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>
that writes the character <code class="docutils literal notranslate"><span class="pre">\n</span></code> to the string stream.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:outer-stream">
<span class="sig-name descname"><span class="pre">outer-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:outer-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a stream’s wrapper stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>outer-stream <em>stream</em> =&gt; <em>wrapping-stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wrapping-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the stream that is wrapping <em>stream</em>.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:inner-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:outer-stream-setter">
<span class="sig-name descname"><span class="pre">outer-stream-setter</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:outer-stream-setter" title="Permalink to this definition">#</a></dt>
<dd><p>Sets a stream’s wrapper stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>outer-stream-setter <em>wrapper-stream</em> <em>stream</em> =&gt; <em>wrapper-stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>wrapper-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wrapper-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Sets the <a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a> slot of <em>stream</em> to <em>wrapper-stream</em>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Applications should not set <code class="docutils literal notranslate"><span class="pre">inner-stream</span></code> and
<code class="docutils literal notranslate"><span class="pre">outer-stream</span></code> slots directly. The <code class="docutils literal notranslate"><span class="pre">outer-stream-setter</span></code>
function is for use only when implementing stream classes.</p>
</div>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:inner-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:peek">
<span class="sig-name descname"><span class="pre">peek</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:peek" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the next element of a stream without advancing the stream
position.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>peek <em>input-stream</em> #key <em>on-end-of-stream</em> =&gt; <em>element-or-eof</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>This function behaves as <a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> does, but the stream
position is not advanced.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[positionable-stream]">
<span class="sig-name descname"><span class="pre">&lt;positionable-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Abstract</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[positionable-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of positionable streams.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Keyword<span class="colon">:</span></dt>
<dd class="field-even"><p>See Superclasses.</p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A subclass of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a> supporting the Positionable Stream
Protocol. It is not instantiable.</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:adjust-stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">adjust-stream-position</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-position-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unread-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unread-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan type">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[position-type]">
<span class="sig-name descname"><span class="pre">&lt;position-type&gt;</span></span> <em class="property"><span class="pre">Type</span></em><a class="headerlink" href="#io:streams:[position-type]" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing positions in a stream.</p>
</dd>
<dt class="field-even">Equivalent<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">type-union(&lt;stream-position&gt;,</span> <span class="pre">&lt;integer&gt;)</span></code></p>
</dd>
<dt class="field-odd">Supertypes<span class="colon">:</span></dt>
<dd class="field-odd"><p>None.</p>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>A type used to represent a position in a stream. In practice, positions
within a stream are defined as instances of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>, but this type,
together with the <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a> class, allows for cases where
this might not be possible.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read">
<span class="sig-name descname"><span class="pre">read</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a number of elements from an input stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read <em>input-stream</em> <em>n</em> #key <em>on-end-of-stream</em> =&gt; <em>sequence-or-eof</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>n</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>, or an instance
of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of stream is reached.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns a sequence of the next <em>n</em> elements from <em>input-stream</em>.</p>
<p>The type of the sequence returned depends on the type of the
stream’s underlying aggregate. For instances of
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>, the type of the result is given by
<a class="reference external" href="https://opendylan.org/books/drm/Coercing_and_Copying_Objects#type-for-copy"><code class="xref drm docutils literal notranslate"><span class="pre">type-for-copy</span></code></a> of the underlying aggregate. For instances of
<a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a>, the result is a vector that can contain
elements of the type returned by calling <a class="reference internal" href="#io:streams:stream-element-type"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-element-type</span></code></a>
on the stream.</p>
<p>The stream position is advanced so that subsequent reads start
after the <em>n</em> elements.</p>
<p>If the stream is not at its end, <em>read</em> waits until input becomes
available.</p>
<p>If the end of the stream is reached before all <em>n</em> elements have
been read, the behavior is as follows.</p>
<ul class="simple">
<li><p>If a value for the <em>on-end-of-stream</em> argument was supplied, it
is returned as the value of <em>read</em>.</p></li>
<li><p>If a value for the <em>on-end-of-stream</em> argument was not supplied,
and at least one element was read from the stream, then an
<a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a> condition is signaled. When
signaling this condition, <em>read</em> supplies two values: a sequence
of the elements that were read successfully, and <em>n</em>.</p></li>
<li><p>If the <em>on-end-of-stream</em> argument was not supplied, and no
elements were read from the stream, an
<a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a> condition is signalled.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[incomplete-read-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;incomplete-read-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-element-type"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-element-type</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-element">
<span class="sig-name descname"><span class="pre">read-element</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-element" title="Permalink to this definition">#</a></dt>
<dd><p>Reads the next element in a stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-element <em>input-stream</em> #key <em>on-end-of-stream</em> =&gt; <em>element-or-eof</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns the next element in the stream. If the stream is not at its
end, the stream is advanced so that the next call to
<code class="docutils literal notranslate"><span class="pre">read-element</span></code> returns the next element along in <em>input-stream</em>.</p>
<p>The <em>on-end-of-stream</em> keyword allows you to specify a value to be
returned if the stream is at its end. If the stream is at its end
and no value was supplied for <em>on-end-of-stream</em>, <code class="docutils literal notranslate"><span class="pre">read-element</span></code>
signals an <a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a> condition.</p>
<p>If no input is available and the stream is not at its end,
<code class="docutils literal notranslate"><span class="pre">read-element</span></code> waits until input becomes available.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following piece of code applies <em>function</em> to all the elements
of a sequence:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="n">seq</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">~stream-at-end?</span><span class="p">(</span><span class="n">stream</span><span class="p">))</span>
<span class="w">  </span><span class="nb">function</span><span class="p">(</span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:peek"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">peek</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unread-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unread-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-into!">
<span class="sig-name descname"><span class="pre">read-into!</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-into!" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a number of elements from a stream into a sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-into! <em>input-stream</em> <em>n</em> <em>sequence</em> #key <em>start</em> <em>on-end-of-stream</em> =&gt; <em>count-or-eof</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>n</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#mutable-sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;mutable-sequence&gt;</span></code></a>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>count-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>, or an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of stream is reached..</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Reads the next <em>n</em> elements from <em>input-stream</em>, and inserts them
into a mutable sequence starting at the position <em>start</em>. Returns
the number of elements actually inserted into <em>sequence</em> unless the
end of the stream is reached, in which case the <em>on-end-of-stream</em>
behavior is as for <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a>.</p>
<p>If the sum of <em>start</em> and <em>n</em> is greater than the size of
<em>sequence</em>, <code class="docutils literal notranslate"><span class="pre">read-into!</span></code> reads only enough elements to fill
sequence up to the end. If <em>sequence</em> is a stretchy vector, no
attempt is made to grow it.</p>
<p>If the stream is not at its end, <code class="docutils literal notranslate"><span class="pre">read-into!</span></code> waits until input
becomes available.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-line">
<span class="sig-name descname"><span class="pre">read-line</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-line" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a stream up to the next newline.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-line <em>input-stream</em> #key <em>on-end-of-stream</em> =&gt; <em>string-or-eof</em> <em>newline?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>, or an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of the stream is reached.</p></li>
<li><p><strong>newline?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns a new string containing all the input in <em>input-stream</em> up
to the next newline sequence.</p>
<p>The resulting string does not contain the newline sequence. The
second value returned is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the read terminated with a
newline or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if the read terminated because it came to the end
of the stream.</p>
<p>The type of the result string is chosen so that the string can
contain characters of <em>input-stream</em> ‘s element type. For example,
if the element type is <a class="reference external" href="byte-character">byte-character</a>, the string will be a
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a>.</p>
<p>If <em>input-stream</em> is at its end immediately upon calling
<code class="docutils literal notranslate"><span class="pre">read-line</span></code> (that is, the end of stream appears to be at the end
of an empty line), then the end-of-stream behavior and the
interpretation of <em>on-end-of-stream</em> is as for <a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-line-into!">
<span class="sig-name descname"><span class="pre">read-line-into!</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-line-into!" title="Permalink to this definition">#</a></dt>
<dd><p>Reads a stream up to the next newline into a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-line-into! <em>input-stream</em> <em>string</em> #key <em>start</em> <em>on-end-of-stream</em> <em>grow?</em> =&gt; <em>string-or-eof</em> <em>newline?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>string</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>grow?</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>, or an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of the stream is reached.</p></li>
<li><p><strong>newline?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Fills <em>string</em> with all the input from <em>input-stream</em> up to the
next newline sequence. The <em>string</em> must be a general instance of
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a> that can hold elements of the stream’s element type.</p>
<p>The input is written into <em>string</em> starting at the position
<em>start</em>. By default, <em>start</em> is the start of the stream.</p>
<p>The second return value is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the read terminated with a
newline, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if the read completed by getting to the end of
the input stream.</p>
<p>If <em>grow?</em> is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a>, and <em>string</em> is not large enough to hold all
of the input, <code class="docutils literal notranslate"><span class="pre">read-line-into!</span></code> creates a new string which it
writes to and returns instead. The resulting string holds all the
original elements of <em>string</em>, except where <code class="docutils literal notranslate"><span class="pre">read-line-into!</span></code>
overwrites them with input from <em>input-stream</em>.</p>
<p>In a manner consistent with the intended semantics of <em>grow?</em>, when
<em>grow?</em> is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> and <em>start</em> is greater than or equal to
<em>string.size</em>, <code class="docutils literal notranslate"><span class="pre">read-line-into!</span></code> grows <em>string</em> to accommodate
the <em>start</em> index and the new input.</p>
<p>If <em>grow?</em> is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> and <em>string</em> is not large enough to hold the
input, the function signals an error.</p>
<p>The end-of-stream behavior and the interpretation of
<em>on-end-of-stream</em> is the same as that of <a class="reference internal" href="#io:streams:read-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-through">
<span class="sig-name descname"><span class="pre">read-through</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-through" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a sequence containing the elements of the stream up to, and
including, the first occurrence of a given element.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-through <em>input-stream</em> <em>element</em> #key <em>on-end-of-stream</em> <em>test</em> =&gt; <em>sequence-or-eof</em> <em>found?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>test</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Function_Classes#function"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;function&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Equality_and_Comparison#identity"><code class="xref drm docutils literal notranslate"><span class="pre">==</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>, or an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of the stream is reached.</p></li>
<li><p><strong>found?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>This function is the same as <a class="reference internal" href="#io:streams:read-to"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to</span></code></a>, except that <em>element</em>
is included in the resulting sequence.</p>
<p>If the <em>element</em> is not found, the result does not contain it. The
stream is left positioned after <em>element</em>.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-to"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-to">
<span class="sig-name descname"><span class="pre">read-to</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-to" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a sequence containing the elements of the stream up to, but
not including, the first occurrence of a given element.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-to <em>input-stream</em> <em>element</em> #key <em>on-end-of-stream</em> <em>test</em> =&gt; <em>sequence-or-eof</em> <em>found?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>on-end-of-stream</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>test</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Function_Classes#function"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;function&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Equality_and_Comparison#identity"><code class="xref drm docutils literal notranslate"><span class="pre">==</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence-or-eof</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>, or an instance of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a> if the end of the stream is reached.</p></li>
<li><p><strong>found?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns a new sequence containing the elements of <em>input-stream</em>
from the stream’s current position to the first occurrence of
<em>element</em>. The result does not contain <em>element</em>.</p>
<p>The second return value is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the read terminated with
<em>element</em>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if the read terminated by reaching the end of
the stream’s source. The “boundary” element is consumed, that is,
the stream is left positioned after <em>element</em>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">read-to</span></code> function determines whether the element occurred by
calling the function <em>test</em>. This function must accept two
arguments, the first of which is the element retrieved from the
stream first and the second of which is <em>element</em>.</p>
<p>The type of the sequence returned is the same that returned by
<a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a>. The end-of-stream behavior is the same as that of
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:read-to-end">
<span class="sig-name descname"><span class="pre">read-to-end</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:read-to-end" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a sequence containing all the elements up to, and including,
the last element of the stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>read-to-end <em>input-stream</em> =&gt; <em>sequence</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns a sequence of all the elements up to, and including, the
last element of <em>input-stream</em>, starting from the stream’s current
position.</p>
<p>The type of the result sequence is as described for <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a>.
There is no special end-of-stream behavior; if the stream is
already at its end, an empty collection is returned.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">read-to-end</span><span class="p">(</span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span>
<span class="w">                 </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;hello there, world&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="k">start:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span>
<span class="w">            </span><span class="k">end:</span><span class="w"> </span><span class="mi">11</span><span class="p">));</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[sequence-stream]">
<span class="sig-name descname"><span class="pre">&lt;sequence-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[sequence-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of streams over sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>contents</strong> – A general instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a> which is used
as the input for an input stream, and as the initial storage for an
output stream.</p></li>
<li><p><strong>direction</strong> – Specifies the direction of the stream. It must
be one of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>.
Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
start position of the sequence to be streamed over. Only valid when
<code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default value: 0.</p></li>
<li><p><strong>end</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
sequence position immediately after the portion of the sequence to
stream over. Only valid when <code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default
value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class of streams over sequences. It is a subclass of
<a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">contents:</span></code> is a stretchy vector, then it is the only storage
used by the stream.</p>
<p>The <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> class can be used for streaming over all
sequences, but there are also subclasses <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>,
<a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a>, and <a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a>, which
are specialized for streaming over strings.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">start:</span></code> and <code class="docutils literal notranslate"><span class="pre">end:</span></code> init-keywords specify the portion of the
sequence to create the stream over: <code class="docutils literal notranslate"><span class="pre">start:</span></code> is inclusive and
<code class="docutils literal notranslate"><span class="pre">end:</span></code> is exclusive. The default is to stream over the entire
sequence.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:skip-through">
<span class="sig-name descname"><span class="pre">skip-through</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:skip-through" title="Permalink to this definition">#</a></dt>
<dd><p>Skips through an input stream past the first occurrence of a given element.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>skip-through <em>input-stream</em> <em>element</em> #key <em>test</em> =&gt; <em>found?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>test</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Function_Classes#function"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;function&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Equality_and_Comparison#identity"><code class="xref drm docutils literal notranslate"><span class="pre">==</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>found?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Positions <em>input-stream</em> after the first occurrence of <em>element</em>,
starting from the stream’s current position. Returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the
element was found, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if the end of the stream was
encountered. When <code class="docutils literal notranslate"><span class="pre">skip-through</span></code> does not find <em>element</em>, it
leaves <em>input-stream</em> positioned at the end.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">skip-through</span></code> function determines whether the element
occurred by calling the test function <em>test</em>. The test function
must accept two arguments. The order of the arguments is the
element retrieved from the stream first and element second.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[stream]">
<span class="sig-name descname"><span class="pre">&lt;stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Abstract</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The superclass of all stream classes.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>outer-stream</strong> – The name of the stream wrapping the stream.
Default value: the stream itself (that is, the stream is not
wrapped).</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The superclass of all stream classes and a direct subclass of
<a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>. It is not instantiable.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">outer-stream:</span></code> init-keyword should be used to delegate a task
to its wrapper stream. See <a class="reference internal" href="#wrapper-streams-and-delegation">Wrapper streams and delegation</a> for
more information.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:discard-input"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-input</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:discard-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">discard-output</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:force-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">force-output</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:new-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">new-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:peek"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">peek</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-into!"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-into!</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-line-into!"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line-into!</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-through"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-through</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-to"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-to-end"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to-end</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:skip-through"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">skip-through</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-at-end?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-at-end?</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-element-type"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-element-type</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-input-available?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-input-available?</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-open?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-open?</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:synchronize-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">synchronize-output</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-at-end?">
<span class="sig-name descname"><span class="pre">stream-at-end?</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-at-end?" title="Permalink to this definition">#</a></dt>
<dd><p>Tests whether a stream is at its end.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-at-end? <em>stream</em> =&gt; <em>at-end?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>at-end?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the stream is at its end and <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if it is not.
For input streams, it returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if a call to
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> with no supplied keyword arguments would signal
an <a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a>.</p>
<p>This function differs from <a class="reference internal" href="#io:streams:stream-input-available?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-input-available?</span></code></a>, which
tests whether the stream can be read.</p>
<p>For output-only streams, this function always returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p>
<p>For output streams, note that you can determine if a stream is one
place past the last written element by comparing
<a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a> to <a class="reference internal" href="#io:streams:stream-size"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-size</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following piece of code applies <em>function</em> to all the elements of a
sequence:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;sequence-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">contents:</span><span class="w"> </span><span class="n">seq</span><span class="p">);</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">~stream-at-end?</span><span class="p">(</span><span class="n">stream</span><span class="p">))</span>
<span class="w">  </span><span class="nb">function</span><span class="p">(</span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">));</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[end-of-stream-error]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;end-of-stream-error&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-input-available?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-input-available?</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-contents">
<span class="sig-name descname"><span class="pre">stream-contents</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-contents" title="Permalink to this definition">#</a></dt>
<dd><p>Returns a sequence containing all the elements of a positionable stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-contents <em>positionable-stream</em> #key <em>clear-contents?</em>  =&gt; <em>sequence</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
<li><p><strong>clear-contents?</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>. Default value: <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns a sequence that contains all of <em>positionable-stream</em> ‘s
elements from its start to its end, regardless of its current
position. The type of the returned sequence is as for <a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a>.</p>
<p>The <em>clear-contents?</em> argument is only applicable to writeable
sequence streams, and is not defined for file-streams or any other
external stream. It returns an error if applied to an input only
stream. If clear-contents? is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> (the default for cases where
the argument is defined), this function sets the size of the stream
to zero, and the position to the stream’s start. Thus the next call
to <code class="docutils literal notranslate"><span class="pre">stream-contents</span></code> will return only the elements written after
the previous call to <code class="docutils literal notranslate"><span class="pre">stream-contents</span></code>.</p>
<p>Note that the sequence returned never shares structure with any
underlying sequence that might be used in the future by the stream.
For instance, the string returned by calling <code class="docutils literal notranslate"><span class="pre">stream-contents</span></code> on
an output <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a> will not be the same string as
that being used to represent the string stream.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following forms bind <em>stream</em> to an output stream over an empty
string and create the string “I see!”, using the function
<code class="docutils literal notranslate"><span class="pre">stream-contents</span></code> to access all of the stream’s elements.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;byte-string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;I&#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39; &#39;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;see&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;!&#39;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-to-end"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-to-end</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-element-type">
<span class="sig-name descname"><span class="pre">stream-element-type</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-element-type" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the element-type of a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-element-type <em>stream</em> =&gt; <em>element-type</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element-type</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Type_Classes#type"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the element type of <em>stream</em> as a Dylan <a class="reference external" href="https://opendylan.org/books/drm/Type_Classes#type"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code></a>.</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-input-available?">
<span class="sig-name descname"><span class="pre">stream-input-available?</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-input-available?" title="Permalink to this definition">#</a></dt>
<dd><p>Tests if an input stream can be read.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-input-available? <em>input-stream</em> =&gt; <em>available?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>input-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>available?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if <em>input-stream</em> would not block on
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a>, otherwise it returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p>
<p>This function differs from <a class="reference internal" href="#io:streams:stream-at-end?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-at-end?</span></code></a>. When
<a class="reference internal" href="#io:streams:stream-input-available?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-input-available?</span></code></a> returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a>, <a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a>
will not block, but it may detect that it is at the end of the
stream’s source, and consequently inspect the <em>on-end-of-stream</em>
argument to determine how to handle the end of stream.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-at-end?"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-at-end?</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-console?">
<span class="sig-name descname"><span class="pre">stream-console?</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-console?" title="Permalink to this definition">#</a></dt>
<dd><p>Tests whether a stream is directed to the console.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-console? <em>stream</em> =&gt; <em>console?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>console?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if the stream is directed to the console and <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if it is not.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following piece of code tests whether stdout has been directed to the
console (./example), or to a file (./example &gt; file):</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stream-console?</span><span class="p">(</span><span class="vg">*standard-output*</span><span class="p">))</span>
<span class="w">  </span><span class="n">format-out</span><span class="p">(</span><span class="s">&quot;Output is directed to the console</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">else</span>
<span class="w">  </span><span class="n">format-out</span><span class="p">(</span><span class="s">&quot;Output is not directed to the console</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-lock">
<span class="sig-name descname"><span class="pre">stream-lock</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-lock" title="Permalink to this definition">#</a></dt>
<dd><p>Returns the lock for a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-lock <em>stream</em> =&gt; <em>lock</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lock</strong> – An instance of <a class="reference internal" href="../dylan/threads.html#dylan:threads:[lock]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;lock&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns <em>lock</em> for the specified <em>stream</em>. You can use this function,
in conjunction with <a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a> to
implement a basic stream locking facility.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-lock-setter">
<span class="sig-name descname"><span class="pre">stream-lock-setter</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-lock-setter" title="Permalink to this definition">#</a></dt>
<dd><p>Sets a lock on a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-lock-setter <em>stream lock</em> =&gt; <em>lock</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>lock</strong> – An instance of <a class="reference internal" href="../dylan/threads.html#dylan:threads:[lock]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;lock&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lock</strong> – An instance of <a class="reference internal" href="../dylan/threads.html#dylan:threads:[lock]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;lock&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets <em>lock</em> for the specified <em>stream</em>. If <em>lock</em> is <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>, then
the lock on <em>stream</em> is freed. You can use this function in
conjunction with <a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a> to implement a basic stream
locking facility.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-open?">
<span class="sig-name descname"><span class="pre">stream-open?</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-open?" title="Permalink to this definition">#</a></dt>
<dd><p>Generic function for testing whether a stream is open.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-open? <em>stream</em> =&gt; <em>open?</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>open?</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#boolean"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;boolean&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#true"><code class="xref drm docutils literal notranslate"><span class="pre">#t</span></code></a> if <em>stream</em> is open and <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a> if it is not.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:close"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">close</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-position">
<span class="sig-name descname"><span class="pre">stream-position</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-position" title="Permalink to this definition">#</a></dt>
<dd><p>Finds the current position of a positionable stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-position <em>positionable-stream</em> =&gt; <em>position</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>position</strong> – An instance of <a class="reference internal" href="#io:streams:[position-type]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;position-type&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns the current position of <em>positionable-stream</em> for reading
or writing.</p>
<p>The value returned can be either an instance of
<a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a> or an integer. When the value is an
integer, it is an offset from position zero, and is in terms of the
stream’s element type. For instance, in a Unicode stream, a
position of four means that four Unicode characters have been read.</p>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>The following example uses positioning to return the character “w”
from a stream over the string <code class="docutils literal notranslate"><span class="pre">&quot;hello</span> <span class="pre">world&quot;</span></code>:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">contents:</span><span class="w"> </span><span class="s">&quot;hello world&quot;</span><span class="p">);</span>
<span class="n">stream-position</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p></p>
</dd>
</dl>
<p><a class="reference internal" href="#io:streams:[position-type]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;position-type&gt;</span></code></a></p>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[stream-position]">
<span class="sig-name descname"><span class="pre">&lt;stream-position&gt;</span></span> <em class="property"><span class="pre">Abstract</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[stream-position]" title="Permalink to this definition">#</a></dt>
<dd><p>The class representing non-integer stream positions.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a></p>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>A direct subclass of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>. It is used in rare cases to
represent positions within streams that cannot be represented by
instances of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. For example, a stream that supports
compression will have some state associated with each position in
the stream that a single integer is not sufficient to represent.</p>
<p>The <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a> class is disjoint from the class
<a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p>
</p>
</dd>
<dt class="field-odd">Operations<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="../common-dylan/machine-words.html#common-dylan:machine-words:as"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">as</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-position-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-size"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-size</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[position-type]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;position-type&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-position-setter">
<span class="sig-name descname"><span class="pre">stream-position-setter</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-position-setter" title="Permalink to this definition">#</a></dt>
<dd><p>Sets the position of a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-position-setter <em>position</em> <em>positionable-stream</em> =&gt; <em>new-position</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>position</strong> – An instance of <a class="reference internal" href="#io:streams:[position-type]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;position-type&gt;</span></code></a>.</p></li>
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>new-position</strong> – An instance of <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a>, or an
instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Changes the stream’s position for reading or writing to <em>position</em>.</p>
<p>When it is an integer, if it is less than zero or greater than
<em>positionable-stream.stream-size</em> this function signals an error. For
file streams, a <code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position-error&gt;</span></code> is signalled. For other types
of stream, the error signalled is <a class="reference external" href="https://opendylan.org/books/drm/Condition_Classes#simple-error"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;simple-error&gt;</span></code></a>.</p>
<p>When <em>position</em> is a <a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a>, if it is invalid
for some reason, this function signals an error. Streams are
permitted to restrict the <em>position</em> to being a member of the set
of values previously returned by calls to <a class="reference internal" href="#io:streams:stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-position</span></code></a> on
the same stream.</p>
<p>The <em>position</em> may also be <code class="docutils literal notranslate"><span class="pre">#&quot;start&quot;</span></code>, meaning that the stream
should be positioned at its start, or <code class="docutils literal notranslate"><span class="pre">#&quot;end&quot;</span></code>, meaning that the
stream should be positioned at its end.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot use <code class="docutils literal notranslate"><span class="pre">stream-position-setter</span></code> to set the
position past the current last element of the stream: use
<code class="docutils literal notranslate"><span class="pre">adjust-stream-position</span></code> instead.</p>
</div>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:adjust-stream-position"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">adjust-stream-position</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[stream-position]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream-position&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:stream-size">
<span class="sig-name descname"><span class="pre">stream-size</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:stream-size" title="Permalink to this definition">#</a></dt>
<dd><p>Finds the number of elements in a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>stream-size <em>positionable-stream</em> =&gt; <em>size</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>size</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns the number of elements in <em>positionable-stream</em>.</p>
<p>For input streams, this is the number of elements that were
available when the stream was created. It is unaffected by any read
operations that might have been performed on the stream.</p>
<p>For output and input-output streams, this is the number of elements
that were available when the stream was created (just as with input
streams), added to the number of elements written past the end of
the stream (regardless of any repositioning operations).</p>
<p>It is assumed that:</p>
<ul class="simple">
<li><p>There is no more than one stream open on the same source or
destination at a time.</p></li>
<li><p>There are no shared references to files by other processes.</p></li>
<li><p>There are no alias references to underlying sequences, or any
other such situations.</p></li>
</ul>
<p>In such situations, the behavior of <code class="docutils literal notranslate"><span class="pre">stream-size</span></code> is undefined.</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[string-stream]">
<span class="sig-name descname"><span class="pre">&lt;string-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Instantiable</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[string-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of streams over strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>contents</strong> – A general instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> – Specifies the direction of the stream. It must
be one of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>;
Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Only valid when
<code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default value: 0.</p></li>
<li><p><strong>end</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the string
position immediately after the portion of the string to stream over.
Only valid when <code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default value:
<em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class of streams over strings.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">contents:</span></code> init-keyword is used as the input for an input
stream, and as the initial storage for an output stream.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">start:</span></code> init-keyword specifies the start position of the
string to be streamed over.</p>
<p>The class supports the same init-keywords as <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">start:</span></code> and <code class="docutils literal notranslate"><span class="pre">end:</span></code> init-keywords specify the portion of the
string to create the stream over: <code class="docutils literal notranslate"><span class="pre">start:</span></code> is inclusive and <code class="docutils literal notranslate"><span class="pre">end:</span></code>
is exclusive. The default is to stream over the entire string.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;string-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;string-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:synchronize-output">
<span class="sig-name descname"><span class="pre">synchronize-output</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:synchronize-output" title="Permalink to this definition">#</a></dt>
<dd><p>Synchronizes an output stream with the application state.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>synchronize-output <em>output-stream</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Forces any pending output from <em>output-stream</em>’s buffers to its
destination. Before returning to its caller, <code class="docutils literal notranslate"><span class="pre">synchronize-output</span></code>
also attempts to ensure that the output reaches the stream’s
destination before, thereby synchronizing the output destination
with the application state.</p>
<p>When creating new stream classes it may be necessary to add a
method to the <code class="docutils literal notranslate"><span class="pre">synchronize-output</span></code> function, even though it is
not part of the Stream Extension Protocol.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:force-output"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">force-output</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:type-for-file-stream">
<span class="sig-name descname"><span class="pre">type-for-file-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:type-for-file-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Finds the type of file-stream class that needs to be instantiated for
a given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>type-for-file-stream <em>filename</em> <em>element-type</em> #rest #all-keys =&gt; <em>file-stream-type</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>filename</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
<li><p><strong>element-type</strong> – One of <a class="reference internal" href="#io:streams:[byte-character]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte-character&gt;</span></code></a>,
<a class="reference internal" href="#io:streams:[unicode-character]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;unicode-character&gt;</span></code></a>, or <a class="reference internal" href="#io:streams:[byte]"><code class="xref dylan dylan-type docutils literal notranslate"><span class="pre">&lt;byte&gt;</span></code></a>, or <a class="reference external" href="https://opendylan.org/books/drm/Other_Built-In_Objects_Defined#false"><code class="xref drm docutils literal notranslate"><span class="pre">#f</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file-stream-type</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Type_Classes#type"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the kind of file-stream class to instantiate for a given
file. The method for <a class="reference internal" href="../system/file-system.html#system:file-system:make([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;file-stream&gt;)</span></code></a> calls this function
to determine the class of which it should create an instance.</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[file-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;file-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="../system/file-system.html#system:file-system:make([file-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;file-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:type-for-sequence-stream">
<span class="sig-name descname"><span class="pre">type-for-sequence-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:type-for-sequence-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Determines the <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> subclass to instantiate to create
a stream over the given sequence.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>type-for-sequence-stream <em>sequence</em> =&gt; <em>sequence-stream-type</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sequence-stream-type</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Type_Classes#type"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;type&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Returns the <a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> subclass to instantiate to create a
stream over <em>sequence</em>. The method for <a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a>
calls this function to determine the concrete subclass of
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a> that it should instantiate.</p>
<p>There are <a class="reference internal" href="#io:streams:type-for-sequence-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-sequence-stream</span></code></a> methods for each of the string
classes. These methods return a stream class that the Streams module
considers appropriate.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([sequence-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;sequence-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[byte-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-string-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[unicode-string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;unicode-string-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan type">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[unicode-character]">
<span class="sig-name descname"><span class="pre">&lt;unicode-character&gt;</span></span> <em class="property"><span class="pre">Type</span></em><a class="headerlink" href="#io:streams:[unicode-character]" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The type that represents Unicode characters.</p>
</dd>
<dt class="field-even">Supertypes<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://opendylan.org/books/drm/Simple_Object_Classes#character"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;character&gt;</span></code></a></p>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>A type representing Unicode characters that instances of
<a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a> can contain.</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:type-for-file-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">type-for-file-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[unicode-string-stream]">
<span class="sig-name descname"><span class="pre">&lt;unicode-string-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Instantiable</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[unicode-string-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of streams over Unicode strings.</p>
<dl class="field-list simple">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>contents</strong> – A general instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
<li><p><strong>direction</strong> – Specifies the direction of the stream. It must
be one of <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>.
Default value: <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>.</p></li>
<li><p><strong>start</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
start position of the sequence to be streamed over. Only valid when
<code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default value: 0.</p></li>
<li><p><strong>end</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. This specifies the
sequence position immediately after the portion of the sequence to
stream over. Only valid when <code class="docutils literal notranslate"><span class="pre">direction:</span></code> is <code class="docutils literal notranslate"><span class="pre">#&quot;input&quot;</span></code>. Default
value: <em>contents.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class of streams over Unicode strings. It is a subclass of
<a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">contents:</span></code> init-keyword is used as the input for an input
stream, and as the initial storage for an output stream. If it is a
stretchy vector, then it is the only storage used by the stream.</p>
<p>The class supports the same init-keywords as
<a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">start:</span></code> and <code class="docutils literal notranslate"><span class="pre">end:</span></code> init-keywords specify the portion of the
Unicode string to create the stream over: <code class="docutils literal notranslate"><span class="pre">start:</span></code> is inclusive and
<code class="docutils literal notranslate"><span class="pre">end:</span></code> is exclusive. The default is to stream over the entire
Unicode string.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([unicode-string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;unicode-string-stream&gt;)</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:make([unicode-string-stream])"><code class="xref dylan dylan-meth docutils literal notranslate"><span class="pre">make(&lt;unicode-string-stream&gt;)</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:[sequence-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;sequence-stream&gt;</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:unlock-stream">
<span class="sig-name descname"><span class="pre">unlock-stream</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:unlock-stream" title="Permalink to this definition">#</a></dt>
<dd><p>Unlocks a stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>unlock-stream <em>stream</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Unlocks a stream. It is suggested that <a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a>
be used instead of direct usages of <a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a> and
<a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a>.</p>
<p>See <a class="reference internal" href="#locking-streams">Locking streams</a> for more detail and discussion on using
streams from multiple threads.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:with-stream-locked"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-stream-locked</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:unread-element">
<span class="sig-name descname"><span class="pre">unread-element</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:unread-element" title="Permalink to this definition">#</a></dt>
<dd><p>Returns an element that has been read back to a positionable stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>unread-element <em>positionable-stream</em> <em>element</em> =&gt; <em>element</em></p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>positionable-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p></li>
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>“Unreads” the last element from <em>positionable-stream</em>. That is, it
returns <em>element</em> to the stream so that the next call to
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> will return <em>element</em>. The stream must be a
<a class="reference internal" href="#io:streams:[positionable-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;positionable-stream&gt;</span></code></a>.</p>
<p>The results of the following actions are undefined:</p>
<ul class="simple">
<li><p>Applying <a class="reference internal" href="#io:streams:unread-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unread-element</span></code></a> to an element that is not the element
most recently read from the stream.</p></li>
<li><p>Calling <a class="reference internal" href="#io:streams:unread-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unread-element</span></code></a> twice in succession.</p></li>
<li><p>Unreading an element if the stream is at its initial position.</p></li>
<li><p>Unreading an element after explicitly setting the stream’s position.</p></li>
</ul>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:wait-for-io-completion">
<span class="sig-name descname"><span class="pre">wait-for-io-completion</span></span> <em class="property"><span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:wait-for-io-completion" title="Permalink to this definition">#</a></dt>
<dd><p>Waits for all pending operations on a stream to complete.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>wait-for-io-completion <em>file-stream</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>file-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>If <em>file-stream</em> is asynchronous, waits for all pending write or
close operations to complete and signals any queued errors. If
<em>file-stream</em> is not asynchronous, returns immediately.</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan macro">
<dt class="sig sig-object dylan-api dylan" id="io:streams:with-indentation">
<span class="sig-name descname"><span class="pre">with-indentation</span></span> <em class="property"><span class="pre">Statement</span> <span class="pre">Macro</span></em><a class="headerlink" href="#io:streams:with-indentation" title="Permalink to this definition">#</a></dt>
<dd><dl class="field-list">
<dt class="field-odd">Macro Call<span class="colon">:</span></dt>
<dd class="field-odd"><p><pre class="literal-block">with-indentation (<cite>stream</cite>)
  <cite>body</cite>
end</pre>
<pre class="literal-block">with-indentation (<cite>stream</cite>, 4)
  <cite>body</cite>
end</pre>
</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream</strong> – A Dylan expression <em>bnf</em>. An instance of
<a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a>.</p></li>
<li><p><strong>indentation</strong> – A Dylan expression <em>bnf</em>. An instance
of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Optional.</p></li>
<li><p><strong>body</strong> – A Dylan body <em>bnf</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>Runs a body of code with an indentation level managed automatically.
This avoids the need to call <a class="reference internal" href="#io:streams:indent"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">indent</span></code></a> to indent and then unindent
around the body of code.</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-indentation</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span>
<span class="w">  </span><span class="n">format</span><span class="p">(</span><span class="n">is</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello %=</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="n">with-indentation</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:[indenting-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;indenting-stream&gt;</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:indent"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">indent</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan macro">
<dt class="sig sig-object dylan-api dylan" id="io:streams:with-input-from-string">
<span class="sig-name descname"><span class="pre">with-input-from-string</span></span> <em class="property"><span class="pre">Statement</span> <span class="pre">Macro</span></em><a class="headerlink" href="#io:streams:with-input-from-string" title="Permalink to this definition">#</a></dt>
<dd><p>Creates an input stream, to perform operations on it and closes the
stream.</p>
<dl class="field-list">
<dt class="field-odd">Macro Call<span class="colon">:</span></dt>
<dd class="field-odd"><p><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="n">from</span><span class="o">-</span><span class="n">string</span> <span class="p">(</span><span class="n">stream</span><span class="o">-</span><span class="n">name</span> <span class="o">=</span> <span class="n">string</span><span class="p">)</span>
  <span class="n">body</span>
<span class="n">end</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="n">from</span><span class="o">-</span><span class="n">string</span> <span class="p">(</span><span class="n">stream</span><span class="o">-</span><span class="n">name</span> <span class="o">=</span> <span class="n">string</span><span class="p">,</span> <span class="n">class</span><span class="o">-</span><span class="n">name</span><span class="p">)</span>
  <span class="n">body</span>
<span class="n">end</span>
</pre></div>
</div>
</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream-name</strong> – A Dylan variable-name <em>bnf</em>.</p></li>
<li><p><strong>string-expression</strong> – A Dylan string expression <em>bnf</em>.</p></li>
<li><p><strong>classname</strong> – A Dylan class.</p></li>
<li><p><strong>body</strong> – A Dylan body <em>bnf</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p>In the first use, it creates a <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a> with
direction <cite>#”input”</cite> that is associated with a variable name.  In
the second use, it allows to specify a class for the stream type.</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-input-from-string</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Foobar&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">       </span><span class="n">char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">)</span>
<span class="w">       </span><span class="k">then</span><span class="w">   </span><span class="n">read-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="k">on-end-of-stream:</span><span class="w"> </span><span class="l">#f</span><span class="p">),</span>
<span class="w">       </span><span class="k">while:</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="w">    </span><span class="n">format-out</span><span class="p">(</span><span class="s">&quot;%d: %c</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">char</span><span class="p">)</span>
<span class="w">  </span><span class="k">end</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">See-also<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:with-output-to-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-output-to-string</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="dylan macro">
<dt class="sig sig-object dylan-api dylan" id="io:streams:with-output-to-string">
<span class="sig-name descname"><span class="pre">with-output-to-string</span></span> <em class="property"><span class="pre">Statement</span> <span class="pre">Macro</span></em><a class="headerlink" href="#io:streams:with-output-to-string" title="Permalink to this definition">#</a></dt>
<dd><p>Provides a convenient way of returning a <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a> after
performing a series of operations on a <a class="reference external" href="https://opendylan.org/books/drm/&lt;stream&gt;"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>, and then
close the stream.</p>
<dl class="field-list">
<dt class="field-odd">Macro Call<span class="colon">:</span></dt>
<dd class="field-odd"><p><pre class="literal-block">with-output-to-string (<cite>stream-name</cite>)
  <cite>body</cite>
end =&gt; <cite>string</cite></pre>
</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream-name</strong> – A Dylan variable-name <em>bnf</em>.</p></li>
<li><p><strong>body</strong> – A Dylan body <em>bnf</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – Instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p>Creates a <a class="reference internal" href="#io:streams:[string-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;string-stream&gt;</span></code></a> with direction <cite>#”output”</cite> and
provides an opportunity to perform operations and close the
stream.</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="n">with-output-string</span><span class="w"> </span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
<span class="w">  </span><span class="n">print-document</span><span class="p">(</span><span class="n">document</span><span class="p">,</span><span class="w"> </span><span class="n">stream</span><span class="p">)</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
</div>
</dd>
<dt class="field-even">See-also<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#io:streams:with-input-from-string"><code class="xref dylan dylan-macro docutils literal notranslate"><span class="pre">with-input-from-string</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="dylan macro">
<dt class="sig sig-object dylan-api dylan" id="io:streams:with-stream-locked">
<span class="sig-name descname"><span class="pre">with-stream-locked</span></span> <em class="property"><span class="pre">Statement</span> <span class="pre">Macro</span></em><a class="headerlink" href="#io:streams:with-stream-locked" title="Permalink to this definition">#</a></dt>
<dd><p>Run a body of code while the stream is locked.</p>
<dl class="field-list simple">
<dt class="field-odd">Macro Call<span class="colon">:</span></dt>
<dd class="field-odd"><p><pre class="literal-block">with-stream-locked (<cite>stream-var</cite>)
  <cite>body</cite>
end =&gt; <cite>values</cite></pre>
</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>stream-var</strong> – An Dylan variable-name <em>bnf</em>.</p></li>
<li><p><strong>body</strong> – A Dylan body <em>bnf</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Values<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> – Instances of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Discussion<span class="colon">:</span></dt>
<dd class="field-even"><p><p>Provides a safe mechanism for locking streams for use from multiple
threads. The macro evaluates a <em>body</em> of code after locking the stream,
and then unlocks the stream. The macro calls <a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a> upon
exiting <em>body</em>.</p>
<p>The values of the last expression in <em>body</em> are returned.</p>
</p>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:lock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">lock-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:stream-lock-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-lock-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:unlock-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">unlock-stream</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan class">
<dt class="sig sig-object dylan-api dylan" id="io:streams:[wrapper-stream]">
<span class="sig-name descname"><span class="pre">&lt;wrapper-stream&gt;</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Instantiable</span> <span class="pre">Class</span></em><a class="headerlink" href="#io:streams:[wrapper-stream]" title="Permalink to this definition">#</a></dt>
<dd><p>The class of wrapper-streams.</p>
<dl class="field-list">
<dt class="field-odd">Superclasses<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a></p>
</dd>
<dt class="field-even">Init-Keywords<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>inner-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>The class that implements the basic wrapper-stream functionality.</p>
<p>It takes a required init-keyword <code class="docutils literal notranslate"><span class="pre">inner-stream:</span></code>, which is used to
specify the wrapped stream.</p>
<p>The <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> class implements default methods for all
of the stream protocol functions described in this document. Each
default method on <a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a> simply “trampolines” to its
inner stream.</p>
</p>
</dd>
<dt class="field-even">Operations<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:inner-stream"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:inner-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">inner-stream-setter</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:outer-stream-setter"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">outer-stream-setter</span></code></a></p></li>
</ul>
</p>
</dd>
<dt class="field-odd">Example<span class="colon">:</span></dt>
<dd class="field-odd"><p>In the example below, <code class="docutils literal notranslate"><span class="pre">&lt;io-wrapper-stream&gt;</span></code>, a subclass of
<a class="reference internal" href="#io:streams:[wrapper-stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;wrapper-stream&gt;</span></code></a>, “passes on” functions such as
<a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a> and <a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> by simply delegating these
operations to the inner stream:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read-element</span><span class="w"> </span><span class="p">(</span><span class="n">ws</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="nb">element</span><span class="p">)</span>
<span class="w">  </span><span class="n">read-element</span><span class="p">(</span><span class="n">ws</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">write-element</span><span class="w"> </span><span class="p">(</span><span class="n">ws</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="nb">element</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">ws</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="nb">element</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
<p>Assuming that <code class="docutils literal notranslate"><span class="pre">&lt;io-wrapper-stream&gt;</span></code> delegates all other
operations to its inner stream, the following is sufficient to
implement a 16-bit Unicode character stream wrapping an 8-bit
character stream.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">define</span><span class="w"> </span><span class="nb">class</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="w"> </span><span class="p">(</span><span class="nc">&lt;io-wrapper-stream&gt;</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">class</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">read-element</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="k">#key</span><span class="w"> </span><span class="n">on-end-of-stream</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">ch</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-character&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">first-char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span>
<span class="w">                                </span><span class="n">on-end-of-stream</span><span class="p">);</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">second-char</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">read-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span>
<span class="w">                                 </span><span class="n">on-end-of-stream</span><span class="p">);</span>
<span class="w">  </span><span class="n">convert-byte-pair-to-unicode</span><span class="p">(</span><span class="n">first-char</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">write-element</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">,</span>
<span class="w">  </span><span class="n">c</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;character&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">()</span>
<span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="p">(</span><span class="n">first-char</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span>
<span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">convert-unicode-to-byte-pair</span><span class="p">(</span><span class="n">c</span><span class="p">);</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="n">first-char</span><span class="p">);</span>
<span class="w">  </span><span class="n">write-element</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">,</span><span class="w"> </span><span class="n">second-char</span><span class="p">)</span>
<span class="w">  </span><span class="n">c</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">stream-position</span><span class="w"> </span><span class="p">(</span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">)</span>
<span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">)</span>
<span class="w">  </span><span class="nb">truncate/</span><span class="p">(</span><span class="n">stream-position</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">),</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>

<span class="k">define</span><span class="w"> </span><span class="nb">method</span><span class="w"> </span><span class="n">stream-position-setter</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;integer&gt;</span><span class="p">,</span>
<span class="w">    </span><span class="n">s</span><span class="w"> </span><span class="p">::</span><span class="w"> </span><span class="nc">&lt;unicode-stream&gt;</span><span class="p">);</span>
<span class="w">  </span><span class="n">stream-position</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">inner-stream</span><span class="p">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span>
<span class="k">end</span><span class="w"> </span><span class="nb">method</span><span class="p">;</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:write">
<span class="sig-name descname"><span class="pre">write</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:write" title="Permalink to this definition">#</a></dt>
<dd><p>Writes the elements of a sequence to an output stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>write <em>output-stream</em> <em>sequence</em> #key <em>start</em> <em>end</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>sequence</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>sequence.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Writes the elements of <em>sequence</em> to <em>output-stream</em>, starting at
the stream’s current position.</p>
<p>The elements in <em>sequence</em> are accessed in the order defined by the
forward iteration protocol on <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#sequence"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;sequence&gt;</span></code></a>. This is effectively
the same as the following:</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="nb">do</span><span class="w"> </span><span class="p">(</span><span class="nb">method</span><span class="w"> </span><span class="p">(</span><span class="n">elt</span><span class="p">)</span><span class="w"> </span><span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="n">elt</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span><span class="p">,</span><span class="w"> </span><span class="n">sequence</span><span class="p">);</span>
<span class="n">sequence</span><span class="p">;</span>
</pre></div>
</div>
<p>If supplied, <code class="docutils literal notranslate"><span class="pre">start:</span></code> and <code class="docutils literal notranslate"><span class="pre">end:</span></code> delimit the portion of <em>sequence</em> to
write to the stream. The value of <code class="docutils literal notranslate"><span class="pre">start:</span></code> is inclusive and that of
<code class="docutils literal notranslate"><span class="pre">end:</span></code> is exclusive.</p>
<p>If the stream is positionable, and it is not positioned at its end,
<code class="docutils literal notranslate"><span class="pre">write</span></code> overwrites elements in the stream and then advances the
stream’s position to be beyond the last element written.</p>
<p><em>Implementation Note:</em> Buffered streams are intended to provide a very
efficient implementation of <code class="docutils literal notranslate"><span class="pre">write</span></code>, particularly when sequence is an
instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#byte-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;byte-string&gt;</span></code></a>, <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#unicode-string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;unicode-string&gt;</span></code></a>,
<a class="reference internal" href="#io:streams:[byte-vector]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;byte-vector&gt;</span></code></a>, or <a class="reference internal" href="#io:streams:[buffer]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;buffer&gt;</span></code></a>, and the stream’s element
type is the same as the element type of sequence.</p>
</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>The following forms bind <em>stream</em> to an output stream over an empty
string and create the string “I see!”, using the function
<a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a> to access all of the stream’s
elements.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;byte-string-stream&gt;</span><span class="p">,</span>
<span class="w">                  </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;I&#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39; &#39;</span><span class="p">);</span>
<span class="n">write</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;see&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;!&#39;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-line</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:write-element">
<span class="sig-name descname"><span class="pre">write-element</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:write-element" title="Permalink to this definition">#</a></dt>
<dd><p>Writes an element to an output stream.</p>
<dl class="field-list">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>write-element <em>output-stream</em> <em>element</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>element</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Object_Classes#object"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;object&gt;</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Writes <em>element</em> to <em>output-stream</em> at the stream’s current position. The
stream’s direction must be either <code class="docutils literal notranslate"><span class="pre">#&quot;output&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">#&quot;input-output&quot;</span></code>. The results are undefined if the type of <em>element</em> is
inappropriate for the stream’s underlying <a class="reference internal" href="#io:streams:stream-element-type"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-element-type</span></code></a>.</p>
<p>If the stream is positionable, and it is not positioned at its end,
<a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a> overwrites the element at the current position and
then advances the stream position.</p>
</p>
</dd>
<dt class="field-even">Example<span class="colon">:</span></dt>
<dd class="field-even"><p>The following forms bind <em>stream</em> to an output stream over an empty string
and create the string “I do”, using the function <a class="reference internal" href="#io:streams:stream-contents"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">stream-contents</span></code></a> to
access all of the stream’s elements.</p>
<div class="highlight-dylan notranslate"><div class="highlight"><pre><span></span><span class="k">let</span><span class="w"> </span><span class="n">stream</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">make</span><span class="p">(</span><span class="nc">&lt;string-stream&gt;</span><span class="p">,</span><span class="w"> </span><span class="k">direction:</span><span class="w"> </span><span class="ss">#&quot;output&quot;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;I&#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39; &#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;d&#39;</span><span class="p">);</span>
<span class="n">write-element</span><span class="p">(</span><span class="n">stream</span><span class="p">,</span><span class="w"> </span><span class="sc">&#39;o&#39;</span><span class="p">);</span>
<span class="n">stream-contents</span><span class="p">(</span><span class="n">stream</span><span class="p">);</span>
</pre></div>
</div>
</dd>
<dt class="field-odd">See also<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:read-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-element</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-line</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="dylan generic-function">
<dt class="sig sig-object dylan-api dylan" id="io:streams:write-line">
<span class="sig-name descname"><span class="pre">write-line</span></span> <em class="property"><span class="pre">Open</span> <span class="pre">Generic</span> <span class="pre">function</span></em><a class="headerlink" href="#io:streams:write-line" title="Permalink to this definition">#</a></dt>
<dd><p>Writes a string followed by a newline to an output stream.</p>
<dl class="field-list simple">
<dt class="field-odd">Signature<span class="colon">:</span></dt>
<dd class="field-odd"><p>write-line <em>output-stream</em> <em>string</em> #key <em>start</em> <em>end</em> =&gt; ()</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>output-stream</strong> – An instance of <a class="reference internal" href="#io:streams:[stream]"><code class="xref dylan dylan-class docutils literal notranslate"><span class="pre">&lt;stream&gt;</span></code></a>.</p></li>
<li><p><strong>string</strong> – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Collection_Classes#string"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;string&gt;</span></code></a>.</p></li>
<li><p><strong>start</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: 0.</p></li>
<li><p><strong>end</strong> (<em>#key</em>) – An instance of <a class="reference external" href="https://opendylan.org/books/drm/Number_Classes#integer"><code class="xref drm docutils literal notranslate"><span class="pre">&lt;integer&gt;</span></code></a>. Default value: <em>string.size</em>.</p></li>
</ul>
</dd>
<dt class="field-odd">Discussion<span class="colon">:</span></dt>
<dd class="field-odd"><p><p>Writes <em>string</em> followed by a newline sequence to <em>output-stream</em>.</p>
<p>The default method behaves as though it calls <a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a> on <em>string</em>
and then calls <a class="reference internal" href="#io:streams:new-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">new-line</span></code></a>.</p>
<p>If supplied, <em>start</em> and <em>end</em> delimit the portion of <em>string</em> to
write to the stream.</p>
</p>
</dd>
<dt class="field-even">See also<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><a class="reference internal" href="#io:streams:new-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">new-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:read-line"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">read-line</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write</span></code></a></p></li>
<li><p><a class="reference internal" href="#io:streams:write-element"><code class="xref dylan dylan-gf docutils literal notranslate"><span class="pre">write-element</span></code></a></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="standard-io.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">The standard-io Module</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="print.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">The print and pprint Modules</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2011-2023, Dylan Hackers
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">The streams Module</a><ul>
<li><a class="reference internal" href="#goals-of-this-module">Goals of this module</a></li>
<li><a class="reference internal" href="#concepts">Concepts</a><ul>
<li><a class="reference internal" href="#input-streams">Input Streams</a></li>
<li><a class="reference internal" href="#output-streams">Output Streams</a></li>
<li><a class="reference internal" href="#positionable-streams">Positionable Streams</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stream-classes">Stream classes</a><ul>
<li><a class="reference internal" href="#sequence-streams">Sequence streams</a><ul>
<li><a class="reference internal" href="#sequence-streams-and-object-identity">Sequence streams and object identity</a></li>
</ul>
</li>
<li><a class="reference internal" href="#closing-streams">Closing streams</a></li>
<li><a class="reference internal" href="#with-output-to-string-with-input-from-string-macros">with-output-to-string / with-input-from-string macros</a></li>
<li><a class="reference internal" href="#locking-streams">Locking streams</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reading-from-and-writing-to-streams">Reading from and writing to streams</a><ul>
<li><a class="reference internal" href="#reading-from-streams">Reading from streams</a></li>
<li><a class="reference internal" href="#convenience-functions-for-reading-from-streams">Convenience functions for reading from streams</a></li>
<li><a class="reference internal" href="#writing-to-streams">Writing to streams</a></li>
<li><a class="reference internal" href="#reading-and-writing-by-lines">Reading and writing by lines</a></li>
<li><a class="reference internal" href="#querying-streams">Querying streams</a></li>
<li><a class="reference internal" href="#using-file-streams">Using file streams</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-buffered-streams">Using buffered streams</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#useful-types-when-using-buffers">Useful types when using buffers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#wrapper-streams">Wrapper streams</a><ul>
<li><a class="reference internal" href="#wrapper-streams-and-delegation">Wrapper streams and delegation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conditions">Conditions</a></li>
<li><a class="reference internal" href="#indenting-streams">Indenting streams</a><ul>
<li><a class="reference internal" href="#using-indenting-streams">Using indenting streams</a></li>
</ul>
</li>
<li><a class="reference internal" href="#streams-protocols">Streams protocols</a><ul>
<li><a class="reference internal" href="#positionable-stream-protocol">Positionable stream protocol</a></li>
<li><a class="reference internal" href="#wrapper-stream-protocol">Wrapper stream protocol</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-streams-module-reference">The streams Module Reference</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js?v=2df60dd4"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="../../_static/scripts/furo.js?v=32e29ea5"></script>
    </body>
</html>